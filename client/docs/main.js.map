{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app-routing.module.ts","./src/app/app.module.ts","./src/app/classes/bucket-options.ts","./src/app/classes/data-structures/queue.ts","./src/app/classes/grid-options.ts","./src/app/classes/line-options.ts","./src/app/classes/math-line.ts","./src/app/classes/shape-options.ts","./src/app/classes/spray-options.ts","./src/app/classes/stamp-options.ts","./src/app/classes/text-options.ts","./src/app/classes/tool-info.ts","./src/app/classes/tool-option.ts","./src/app/classes/tool.ts","./src/app/components/app/app.component.ts","./src/app/components/app/app.component.html","./src/app/components/attributes-panel/attributes-panel.component.ts","./src/app/components/attributes-panel/attributes-panel.component.html","./src/app/components/attributes-panel/attributes-panel.module.ts","./src/app/components/carrousel/carrousel.component.ts","./src/app/components/carrousel/carrousel.component.html","./src/app/components/carrousel/carrousel.module.ts","./src/app/components/color-panel/color-panel.component.ts","./src/app/components/color-panel/color-panel.component.html","./src/app/components/color-panel/color-panel.module.ts","./src/app/components/color-picker/color-palette/color-palette.component.ts","./src/app/components/color-picker/color-palette/color-palette.component.html","./src/app/components/color-picker/color-picker.component.ts","./src/app/components/color-picker/color-picker.component.html","./src/app/components/color-picker/color-picker.module.ts","./src/app/components/color-picker/color-slider/color-slider.component.ts","./src/app/components/color-picker/color-slider/color-slider.component.html","./src/app/components/drawing/drawing.component.ts","./src/app/components/drawing/drawing.component.html","./src/app/components/drawing/drawing.module.ts","./src/app/components/editor/editor.component.ts","./src/app/components/editor/editor.component.html","./src/app/components/editor/editor.module.ts","./src/app/components/export/export.component.ts","./src/app/components/export/export.component.html","./src/app/components/export/export.module.ts","./src/app/components/fiche/fiche.component.ts","./src/app/components/fiche/fiche.component.html","./src/app/components/fiche/fiche.module.ts","./src/app/components/main-page/main-page.component.ts","./src/app/components/main-page/main-page.component.html","./src/app/components/main-page/main-page.module.ts","./src/app/components/save/save.component.ts","./src/app/components/save/save.component.html","./src/app/components/save/save.module.ts","./src/app/components/selection/selection-box/selection-box.component.ts","./src/app/components/selection/selection-box/selection-box.component.html","./src/app/components/selection/selection-box/selection-box.module.ts","./src/app/components/selection/selection-manager/selection-manager.component.ts","./src/app/components/selection/selection-manager/selection-manager.module.ts","./src/app/components/sidebar/sidebar.component.ts","./src/app/components/sidebar/sidebar.component.html","./src/app/components/sidebar/sidebar.module.ts","./src/app/components/warning/warning.component.ts","./src/app/components/warning/warning.component.html","./src/app/components/warning/warning.module.ts","./src/app/services/clipboard/clipboard.service.ts","./src/app/services/commands/command-manager.service.ts","./src/app/services/drawing/drawing.service.ts","./src/app/services/event-manager/event-manager.service.ts","./src/app/services/grid/grid.service.ts","./src/app/services/grid/magnet.service.ts","./src/app/services/index/save.service.ts","./src/app/services/selection/ellipse-selection.service.ts","./src/app/services/selection/lasso-selection.service.ts","./src/app/services/selection/rectangle-selection.service.ts","./src/app/services/selection/resize-selection.service.ts","./src/app/services/selection/shift-selection.service.ts","./src/app/services/selection/surface-selection.service.ts","./src/app/services/tools/ellipse.service.ts","./src/app/services/tools/eraser.service.ts","./src/app/services/tools/eye-dropper.service.ts","./src/app/services/tools/fill-bucket.service.ts","./src/app/services/tools/line.service.ts","./src/app/services/tools/pencil.service.ts","./src/app/services/tools/polygone.service.ts","./src/app/services/tools/rectangle.service.ts","./src/app/services/tools/spray.service.ts","./src/app/services/tools/stamp.service.ts","./src/app/services/tools/text.service.ts","./src/app/services/tools/tool.service.ts","./src/app/shared/global.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,wE;;;;;;;;;;;;ACZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AACgB;AACQ;;;AAE/E,MAAM,MAAM,GAAW;IACtB,EAAE,IAAI,EAAE,EAAE,EAAE,UAAU,EAAE,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE;IACpD,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,2FAAiB,EAAE;IAC9C,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,mFAAe,EAAE;IAC9C,EAAE,IAAI,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE;CACnC,CAAC;AAMK,MAAM,gBAAgB;;+FAAhB,gBAAgB;0JAAhB,gBAAgB,kBAHnB,CAAC,4DAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAC7B,4DAAY;mIAEV,gBAAgB,uFAFlB,4DAAY;6FAEV,gBAAgB;cAJ5B,sDAAQ;eAAC;gBACT,OAAO,EAAE,CAAC,4DAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;gBACvC,OAAO,EAAE,CAAC,4DAAY,CAAC;aACvB;;;;;;;;;;;;;;ACfD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwD;AACf;AACiB;AACqB;AACvB;AACM;AACG;AACA;AACQ;;AAQlE,MAAM,SAAS;;wFAAT,SAAS,cAFT,0EAAY;4IAEZ,SAAS,mBAHV,EAAE,YADJ,CAAC,uEAAa,EAAE,qEAAgB,EAAE,4FAAuB,EAAE,oEAAgB,EAAE,qFAAc,EAAE,6EAAY,EAAE,6EAAY,CAAC;mIAIrH,SAAS,mBALN,0EAAY,aACjB,uEAAa,EAAE,qEAAgB,EAAE,4FAAuB,EAAE,oEAAgB,EAAE,qFAAc,EAAE,6EAAY,EAAE,6EAAY;6FAIpH,SAAS;cANrB,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,0EAAY,CAAC;gBAC5B,OAAO,EAAE,CAAC,uEAAa,EAAE,qEAAgB,EAAE,4FAAuB,EAAE,oEAAgB,EAAE,qFAAc,EAAE,6EAAY,EAAE,6EAAY,CAAC;gBACjI,SAAS,EAAE,EAAE;gBACb,SAAS,EAAE,CAAC,0EAAY,CAAC;aACzB;;;;;;;;;;;;;;ACfD;AAAA;AAAO,MAAM,aAAa;IAA1B;QACC,cAAS,GAAW,CAAC,CAAC;IACvB,CAAC;CAAA;;;;;;;;;;;;;ACFD;AAAA;AAAO,MAAM,KAAK;IAAlB;QACC,UAAK,GAAQ,EAAE,CAAC;IAUjB,CAAC;IATA,IAAI,CAAC,GAAM;QACV,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACtB,CAAC;IACD,GAAG;QACF,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;IAC3B,CAAC;IACD,IAAI,MAAM;QACT,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;IAC1B,CAAC;CACD;;;;;;;;;;;;;ACXD;AAAA;AAAO,MAAM,WAAW;IAAxB;QACC,SAAI,GAAW,EAAE,CAAC;QAClB,YAAO,GAAW,EAAE,CAAC;QACrB,aAAQ,GAAY,KAAK,CAAC;IAC3B,CAAC;CAAA;;;;;;;;;;;;;ACJD;AAAA;AAAA;AAA4C;AAErC,MAAM,WAAW;IAAxB;QACC,sBAAiB,GAAW,yDAAM,CAAC,aAAa,CAAC;QACjD,sBAAiB,GAAY,IAAI,CAAC;IACnC,CAAC;CAAA;;;;;;;;;;;;;ACHD;AAAA;AAAO,MAAM,IAAI;IAOhB,YAAY,MAAY,EAAE,MAAY,EAAE,QAAgB;QACvD,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACzC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACvD,IAAI,CAAC,EAAE,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACtD,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;IAC1B,CAAC;IAED,UAAU,CAAC,MAAY,EAAE,MAAY;QACpC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACvF,CAAC;IACD,WAAW,CAAC,KAAW;QACtB,OAAO,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC;IACvD,CAAC;IAED,YAAY,CAAC,MAAY,EAAE,MAAY,EAAE,MAAY,EAAE,MAAY;QAClE,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,KAAK,CAAC,EAAE;YAC9B,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;SACvD;QAED,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,KAAK,CAAC,EAAE;YAC9B,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;SACvD;QAED,IAAI,MAAM,KAAK,MAAM,EAAE;YACtB,GAAG;gBACF,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;oBACnE,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;oBACrE,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACjG,GAAG;gBACF,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;oBACnE,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;oBACrE,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SACjG;QACD,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAU,CAAC;IACnC,CAAC;CACD;;;;;;;;;;;;;ACjDD;AAAA;AAAO,MAAM,YAAY;IAKxB,YAAY,UAAkB;QAJ9B,YAAO,GAAY,KAAK,CAAC;QACzB,SAAI,GAAY,IAAI,CAAC;QAIpB,IAAI,UAAU,KAAK,CAAC;YAAE,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IACpD,CAAC;CACD;;;;;;;;;;;;;ACRD;AAAA;AAAA;AAA4C;AAErC,MAAM,YAAY;IAAzB;QACC,gBAAW,GAAW,CAAC,CAAC;QACxB,cAAS,GAAW,yDAAM,CAAC,cAAc,CAAC;QAC1C,cAAS,GAAW,yDAAM,CAAC,UAAU,CAAC;IACvC,CAAC;CAAA;;;;;;;;;;;;;ACND;AAAA;AAAA;AAA4C;AAErC,MAAM,YAAY;IAKxB;QAHA,kBAAa,GAAW,CAAC,CAAC;QAC1B,gBAAW,GAAW,CAAC,CAAC;QAGvB,IAAI,CAAC,QAAQ,GAAG,yDAAM,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;CACD;;;;;;;;;;;;;ACVD;AAAA;AAAA;AAAmD;AAE5C,MAAM,WAAW;IAAxB;QACC,aAAQ,GAAW,yDAAM,CAAC,iBAAiB,CAAC;QAC5C,SAAI,GAAU,wDAAK,CAAC,KAAK,CAAC;QAC1B,WAAM,GAAY,KAAK,CAAC;QACxB,aAAQ,GAAY,KAAK,CAAC;QAC1B,cAAS,GAAW,MAAM,CAAC;IAC5B,CAAC;CAAA;;;;;;;;;;;;;ACRD;AAAA;AAAO,MAAM,QAAQ;IAKpB,YAAY,IAAY,EAAE,UAAkB,EAAE,QAAgB;QAC7D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC1B,CAAC;CACD;;;;;;;;;;;;;ACVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4D;AACJ;AACA;AACE;AACA;AACd;AACG;AACF;AAEtC,MAAM,UAAU;IAUtB,YACC,aAAsB,EACtB,WAAqB,EACrB,YAAsB,EACtB,IAAa,EACb,WAAqB,EACrB,aAAuB,EACvB,WAAqB,EACrB,YAAsB;QAXvB,SAAI,GAAW,yDAAM,CAAC,aAAa,CAAC;QAanC,IAAI,aAAa,KAAK,SAAS,IAAI,aAAa,IAAI,CAAC;YAAE,IAAI,CAAC,YAAY,GAAG,IAAI,uEAAY,CAAC,aAAa,CAAC,CAAC;QAC3G,IAAI,WAAW;YAAE,IAAI,CAAC,WAAW,GAAG,IAAI,qEAAW,EAAE,CAAC;QACtD,IAAI,YAAY;YAAE,IAAI,CAAC,YAAY,GAAG,IAAI,uEAAY,EAAE,CAAC;QACzD,IAAI,WAAW;YAAE,IAAI,CAAC,WAAW,GAAG,IAAI,yDAAW,EAAE,CAAC;QACtD,IAAI,WAAW;YAAE,IAAI,CAAC,WAAW,GAAG,IAAI,qEAAW,EAAE,CAAC;QACtD,IAAI,YAAY;YAAE,IAAI,CAAC,YAAY,GAAG,IAAI,2DAAY,EAAE,CAAC;QACzD,IAAI,IAAI;YAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QAC3B,IAAI,aAAa;YAAE,IAAI,CAAC,aAAa,GAAG,IAAI,yEAAa,EAAE,CAAC;IAC7D,CAAC;CACD;;;;;;;;;;;;;ACjCD;AAAA;AAAA,0BAA0B;AACnB,MAAe,IAAI;IAOzB,YAAsB,cAA8B;QAA9B,mBAAc,GAAd,cAAc,CAAgB;QALpD,cAAS,GAAY,KAAK,CAAC;IAK4B,CAAC;IAExD,WAAW,CAAC,KAAiB,IAAS,CAAC;IAEvC,SAAS,CAAC,KAAiB,IAAS,CAAC;IAErC,WAAW,CAAC,KAAiB,IAAS,CAAC;IAEvC,aAAa,CAAC,KAAiB,IAAS,CAAC;IAEzC,OAAO,CAAC,KAAiB,IAAS,CAAC;IAEnC,aAAa,CAAC,OAAsB,EAAE,MAAe,IAAS,CAAC;IAE/D,iBAAiB;QAChB,OAAO,IAAI,CAAC,cAAc,CAAC;IAC5B,CAAC;IAED,oBAAoB,CAAC,KAAiB;QACrC,OAAO,EAAE,CAAC,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC;IAC/C,CAAC;IAED,wBAAwB,CAAC,KAAiB;QACzC,OAAO,EAAE,CAAC,EAAE,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,CAAC;IAC3E,CAAC;CACD;;;;;;;;;;;;;ACtCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AAC6C;AACC;AACzB;;;;;;AAOxD,MAAM,YAAY;IACxB,YAAmB,WAAwB,EAAS,cAAqC,EAAS,YAAiC;QAAhH,gBAAW,GAAX,WAAW,CAAa;QAAS,mBAAc,GAAd,cAAc,CAAuB;QAAS,iBAAY,GAAZ,YAAY,CAAqB;IAAG,CAAC;;wEAD3H,YAAY;4FAAZ,YAAY;QCTzB,2EAA+B;;6FDSlB,YAAY;cALxB,uDAAS;eAAC;gBACV,QAAQ,EAAE,UAAU;gBACpB,WAAW,EAAE,sBAAsB;gBACnC,SAAS,EAAE,CAAC,sBAAsB,CAAC;aACnC;;;;;;;;;;;;;;AETD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiD;AACR;AACyB;AACZ;;;;;;;;;;;;;ICFrD,wEAUC;IAAA,uDACD;IAAA,4DAAK;;;IADJ,0DACD;IADC,uHACD;;;IAUC,0EAAsC;IAAA,0EAAe;IAAA,4DAAM;;;;IAT5D,sEASC;IAAA,0HAAsC;IACtC,gFAAsH;IAA9D,uXAAgD;IAAC,4DAAa;IACtH,oEAAI;IAAA,uDAA6C;IAAA,4DAAI;IACtD,4DAAM;;;IAHA,0DAAkB;IAAlB,mFAAkB;IACX,0DAAW;IAAX,2EAAW;IACnB,0DAA6C;IAA7C,yHAA6C;;;;IAqBjD,0EACC;IAAA,sFACA;IAAA,gFAAsI;IAAjF,kZAAmE;IAAC,4DAAa;IACtI,oEAAI;IAAA,uDAA6D;IAAA,4DAAI;IACtE,4DAAM;;;IAFO,0DAAU;IAAV,mEAAU;IAClB,0DAA6D;IAA7D,0IAA6D;;;;IArBnE,sEACC;IAAA,gEACA;IAAA,2FAKE;IAJD,iZAAkE;IAIjE,kEAAO;IAAA,4DACR;IACD,gEACA;IAAA,2FAIE;IAHD,8YAA+D;IAG9D,gEAAK;IAAA,4DACN;IACD,gEACA;IAAA,iEACA;IAAA,4HACC;IAIF,4DAAM;;;IApBJ,0DAAkE;IAAlE,gIAAkE;IAQlE,0DAA+D;IAA/D,6HAA+D;IAO3D,0DAA+D;IAA/D,gIAA+D;;;;IAmBpE,sEACC;IAAA,0EAAmB;IAAA,2EAAgB;IAAA,4DAAM;IACzC,gFAKc;IADb,uZAAyE;IACzE,4DAAa;IACd,oEAAI;IAAA,uDAAwD;IAAA,4DAAI;IACjE,4DAAM;;;IANJ,0DAAW;IAAX,4EAAW;IAKR,0DAAwD;IAAxD,qIAAwD;;;;IApB9D,sEACC;IAAA,0EACC;IAAA,wEAAO;IAAA,6EAAkB;IAAA,4DAAQ;IAClC,4DAAM;IACN,sEACC;IAAA,2FAKoB;IAFnB,0ZAA2E;IAE3E,4DAAmB;IACrB,4DAAM;IACN,0HACC;IASF,4DAAM;;;;IAdH,0DAA2E;IAA3E,yIAA2E;IAIxE,0DAA2B;IAA3B,8EAA2B;;;;IAWjC,sEACC;IAAA,0EACC;IAAA,wEAAO;IAAA,wFAAwB;IAAA,4DAAQ;IACxC,4DAAM;IACN,sEACC;IAAA,gFAAsI;IAAlF,2YAAoE;IAAC,4DAAa;IACtI,oEAAI;IAAA,uDAAiE;IAAA,4DAAI;IAC1E,4DAAM;IACN,0EACC;IAAA,wEAAO;IAAA,gFAAe;IAAA,4DAAQ;IAC/B,4DAAM;IACN,uEACC;IAAA,iFAAsI;IAAhF,0YAAkE;IAAC,4DAAa;IACtI,qEAAI;IAAA,wDAA+D;IAAA,4DAAI;IACxE,4DAAM;IACN,2EACC;IAAA,yEAAO;IAAA,uFAAsB;IAAA,4DAAQ;IACtC,4DAAM;IACN,uEACC;IAAA,iFAAyI;IAAhF,0YAAkE;IAAC,4DAAa;IACzI,qEAAI;IAAA,wDAA4D;IAAA,4DAAI;IACrE,4DAAM;IACP,4DAAM;;;IAjBQ,0DAAS;IAAT,kEAAS;IACjB,0DAAiE;IAAjE,6IAAiE;IAMzD,0DAAU;IAAV,mEAAU;IAClB,0DAA+D;IAA/D,2IAA+D;IAMvD,0DAAY;IAAZ,qEAAY;IACpB,0DAA4D;IAA5D,wIAA4D;;;;IAGlE,sEACC;IAAA,0EACC;IAAA,wEAAO;IAAA,6EAAa;IAAA,4DAAQ;IAC7B,4DAAM;IACN,sEACC;IAAA,gFAAuI;IAAjF,0YAAmE;IAAC,4DAAa;IACxI,4DAAM;IACP,4DAAM;;;IAFQ,0DAAW;IAAX,oEAAW;;;;IAGzB,sEACC;IAAA,0EACC;IAAA,wEAAO;IAAA,iFAAiB;IAAA,4DAAQ;IACjC,4DAAM;IACN,sEACC;IAAA,iFAMc;IAFb,oTAAU,gDAAwC,IAAC;IAEnD,4DAAa;IACd,oEAAI;IAAA,uDAAyD;IAAA,4DAAI;IAClE,4DAAM;IACN,0EACC;IAAA,wEAAO;IAAA,qFAAoB;IAAA,4DAAQ;IACpC,4DAAM;IACN,uEACC;IAAA,iFAAoI;IAA7E,uYAA+D;IAAC,4DAAa;IACpI,qEAAI;IAAA,wDAA2D;IAAA,4DAAI;IACpE,4DAAM;IACP,4DAAM;;;IAfH,0DAAW;IAAX,oEAAW;IAMR,0DAAyD;IAAzD,qIAAyD;IAMjD,0DAAW;IAAX,oEAAW;IACnB,0DAA2D;IAA3D,uIAA2D;;;IAIjE,sEACC;IAAA,wEAAyC;IAC1C,4DAAM;;;IAUH,iFAAsD;IAAA,uDAAU;IAAA,4DAAa;;;IAAjE,2EAAc;IAA4B,0DAAU;IAAV,yEAAU;;;;IARnE,0EACC;IAAA,0EAAmB;IAAA,iEAAM;IAAA,4DAAM;IAC/B,qFACC;IAAA,qFAKC;IAHA,mYAA4D,kPAClD,qCAA2C,IADO;IAG5D,yIAAsD;IACvD,4DAAa;IACd,4DAAiB;IACjB,gEACA;IAAA,gEACA;IAAA,0EAAmB;IAAA,+EAAmB;IAAA,4DAAM;IAC5C,sFAOc;IAFb,wYAAgE,oPACtD,qCAA+C,IADO;IAEhE,4DAAa;IACd,qEAAI;IAAA,wDAA4D;IAAA,4DAAI;IACpE,iEACA;IAAA,iEACA;IAAA,wFAGE;IAFD,gZAAgE;IAE/D,gEAAI;IAAA,4DACL;IACD,iEACA;IAAA,wFAGE;IAFD,kZAAkE;IAEjE,oEAAQ;IAAA,4DACT;IACD,iEACA;IAAA,iEACA;IAAA,+FACC;IADwB,sZAAiE;IACzF,yFACC;IAAA,4EAAU;IAAA,6EAAiB;IAAA,4DAAW;IACvC,4DAAoB;IACpB,yFACC;IAAA,4EAAU;IAAA,+EAAmB;IAAA,4DAAW;IACzC,4DAAoB;IACpB,yFACC;IAAA,4EAAU;IAAA,8EAAkB;IAAA,4DAAW;IACxC,4DAAoB;IACrB,4DAA0B;IAC3B,4DAAM;;;IA5CH,0DAA4D;IAA5D,0HAA4D;IAGjC,0DAA0B;IAA1B,iFAA0B;IAQtD,0DAAU;IAAV,mEAAU;IAMP,0DAA4D;IAA5D,wIAA4D;IAI/D,0DAAgE;IAAhE,8HAAgE;IAMhE,0DAAkE;IAAlE,gIAAkE;IAM1C,0DAAiE;IAAjE,+HAAiE;;;IAoBzF,wFACC;IAAA,qEACD;IAAA,4DAAoB;;;IAFwD,uFAAmB;IACvE,0DAAiB;IAAjB,kJAAiB;;;;IAR3C,0EACC;IAAA,0EAAmB;IAAA,sEAAM;IAAA,4DAAM;IAC/B,8FAKC;IAHA,kZAA+E;IAG/E,wJACC;IAEF,4DAA0B;IAC1B,gEACA;IAAA,gEACA;IAAA,0EAAmB;IAAA,gGAA2B;IAAA,4DAAM;IACpD,qFASc;IAFb,8YAAsE,oPAC5D,qCAAgD,IADY;IAEtE,4DAAa;IACd,qEAAI;IAAA,wDAAgE;IAAA,4DAAI;IACxE,iEACA;IAAA,iEACA;IAAA,2EAAmB;IAAA,kFAAiB;IAAA,4DAAM;IAC1C,sFASc;IAFb,6YAAoE,qPAC1D,qCAAuD,IADG;IAEpE,4DAAa;IACd,qEAAI;IAAA,wDAA+D;IAAA,4DAAI;IAGrE,4DAAM;;;IApCP,0DAAuB;IAAvB,8FAAuB;IAEwB,0DAA4B;IAA5B,kFAA4B;IAU3E,0DAAS;IAAT,kEAAS;IAON,0DAAgE;IAAhE,4IAAgE;IAOnE,0DAAW;IAAX,oEAAW;IAOR,0DAA+D;IAA/D,gJAA+D;;;;IAIpE,sEACC;IAAA,oEAAG;IAAA,4EAAiB;IAAA,4DAAI;IACxB,kGACU;IADsD,kUAAY,kEAA0D,IAAC;IAC7H,wFACC;IAAA,mEACD;IAAA,4DAAoB;IAC7B,wFACC;IAAA,0EACD;IAAA,4DAAoB;IACpB,wFACC;IAAA,0EACD;IAAA,4DAAoB;IAClB,yFACD;IAAA,yEACD;IAAA,4DAAoB;IACpB,yFACC;IAAA,wEACD;IAAA,4DAAoB;IACpB,yFACC;IAAA,8EACD;IAAA,4DAAoB;IACpB,yFACC;IAAA,6EACD;IAAA,4DAAoB;IACpB,yFACC;IAAA,6EACD;IAAA,4DAAoB;IACpB,yFACC;IAAA,4EACD;IAAA,4DAAoB;IAEf,4DAA0B;IACjC,4DAAM;;;IA7BgC,0DAAsD;IAAtD,wHAAsD;IAG/D,0DAAsD;IAAtD,wHAAsD;IAGtD,0DAAsD;IAAtD,wHAAsD;IAGpD,0DAAsD;IAAtD,wHAAsD;IAGxD,0DAAsD;IAAtD,wHAAsD;IAGtD,0DAAsD;IAAtD,wHAAsD;IAGtD,0DAAsD;IAAtD,wHAAsD;IAGtD,0DAAsD;IAAtD,wHAAsD;IAGtD,0DAAsD;IAAtD,wHAAsD;;ADnP7E,MAAM,wBAAwB;IAMpC,YAAmB,WAAwB;QAAxB,gBAAW,GAAX,WAAW,CAAa;QAL3C,QAAG,GAAW,CAAC,CAAC;QAChB,QAAG,GAAW,EAAE,CAAC;QACjB,UAAK,GAAW,CAAC,CAAC;QAIjB,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,OAAe,EAAE,EAAE;YAC/D,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC;QACpB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC,WAAW,CAAC;IAC3C,CAAC;IAED,IAAI,KAAK;QACR,OAAO,MAAM,CAAC,MAAM,CAAC,2DAAK,CAAC,CAAC;IAC7B,CAAC;IAED,IAAI,MAAM;QACT,OAAO,4DAAM,CAAC;IACf,CAAC;;gGAnBW,wBAAwB;wGAAxB,wBAAwB;QCVrC,yEACC;QAAA,kHAUC;QAED,oHASC;QAKD,qHACC;QAwBD,oHACC;QAsBD,sHACC;QAsBD,oHACC;QAOD,sHACC;QAsBD,oHACC;QAGD,sHACC;QAkDD,wHACC;QAyCD,uHACC;QAgCD,0EACC;QAAA,iFAEmB;QACpB,4DAAM;QACP,4DAAM;;QAtQJ,0DAMC;QAND,wPAMC;QAMD,0DAMC;QAND,iRAMC;QAOG,0DAAkG;QAAlG,oKAAkG;QAyBlG,0DAAsC;QAAtC,oGAAsC;QAuBtC,0DAAwC;QAAxC,sGAAwC;QAuBxC,0DAAuC;QAAvC,qGAAuC;QAQvC,0DAAyC;QAAzC,uGAAyC;QAuBzC,0DAA8C;QAA9C,4GAA8C;QAI9C,0DAAuC;QAAvC,qGAAuC;QAmDjB,0DAAwC;QAAxC,sGAAwC;QA0C9D,0DAAyF;QAAzF,0JAAyF;QAmC5F,0DAAqH;QAArH,4KAAqH;;6FD3P3G,wBAAwB;cALpC,uDAAS;eAAC;gBACV,QAAQ,EAAE,sBAAsB;gBAChC,WAAW,EAAE,mCAAmC;gBAChD,SAAS,EAAE,CAAC,mCAAmC,CAAC;aAChD;+HAKS,UAAU;kBAAlB,mDAAK;;;;;;;;;;;;;;AEdP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AAC+B;AACjB;AACI;AACW;AACX;AACoB;AACG;AACV;;AAgBjE,MAAM,qBAAqB;;oGAArB,qBAAqB;oKAArB,qBAAqB,kBAZxB;YACR,4DAAY;YACZ,wEAAe;YACf,4FAAuB;YACvB,mFAAoB;YACpB,+FAAgB;YAChB,wEAAe;YACf,qFAAqB;YACrB,oEAAa;SACb;mIAGW,qBAAqB,mBAblB,oFAAwB,aAEtC,4DAAY;QACZ,wEAAe;QACf,4FAAuB;QACvB,mFAAoB;QACpB,+FAAgB;QAChB,wEAAe;QACf,qFAAqB;QACrB,oEAAa,aAEJ,oFAAwB;6FAEtB,qBAAqB;cAdjC,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,oFAAwB,CAAC;gBACxC,OAAO,EAAE;oBACR,4DAAY;oBACZ,wEAAe;oBACf,4FAAuB;oBACvB,mFAAoB;oBACpB,+FAAgB;oBAChB,wEAAe;oBACf,qFAAqB;oBACrB,oEAAa;iBACb;gBACD,OAAO,EAAE,CAAC,oFAAwB,CAAC;aACnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxB6C;AAEyC;AAC1C;AACkD;AAEvC;AACE;AACa;AAC3B;AAEI;AAEA;AACkB;;;;;;;;;;;;;;;;;;;ICXhE,+EACC;IAD6F,8WAA6B;IAC1H,uDACA;IAAA,+EAAwB;IAAA,iEAAM;IAAA,4DAAW;IAC1C,4DAAW;;;IAH4C,4EAAmB;IACzE,0DACA;IADA,wFACA;;;IAeD,iFACC;IAAA,uDACD;IAAA,4DAAa;;;IAFoD,+EAAmB;IACnF,0DACD;IADC,wFACD;;ADDK,MAAM,kBAAkB;IAuB9B,YACS,YAAyB,EACzB,cAA8B,EAC9B,QAAqB,EACrB,MAAwC;QAHxC,iBAAY,GAAZ,YAAY,CAAa;QACzB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,aAAQ,GAAR,QAAQ,CAAa;QACrB,WAAM,GAAN,MAAM,CAAkC;QA1BjD,6BAA6B;QAC7B,gBAAW,GAAW,CAAC,CAAC,CAAC;QACzB,eAAU,GAAW,CAAC,CAAC;QACd,uBAAkB,GAAa,CAAC,2DAAK,CAAC,CAAC;QAChD,eAAU,GAAa,EAAE,CAAC;QAC1B,oBAAe,GAAa,EAAE,CAAC;QAC/B,iBAAY,GAAW;YACtB,IAAI,EAAE,aAAa;YACnB,SAAS,EAAE,EAAE;YACb,KAAK,EAAE,EAAE;SACT,CAAC;QACF,sBAAiB,GAAY,KAAK,CAAC;QACnC,oBAAe,GAAY,KAAK,CAAC;QACjC,kBAAa,GAAY,KAAK,CAAC;QAC/B,eAAU,GAAa,EAAE,CAAC;QAC1B,uBAAkB,GAAa,EAAE,CAAC;QAElC,kBAAa,GAAgB,IAAI,0DAAW,EAAE,CAAC;QAW9C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAC7D,iEAAS,CAAC,IAAI,CAAC,EACf,2DAAG,CAAC,CAAC,SAAwB,EAAE,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,CAAC,CAClG,CAAC;IACH,CAAC;IAEK,QAAQ;;YACb,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC;YAC3B,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;gBAClC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,EAAE;oBACtC,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,yDAAM,CAAC,GAAG;wBAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBACzF,CAAC,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;QACJ,CAAC;KAAA;IAGD,uBAAuB,CAAC,KAAoB;QAC3C,IAAK,QAAQ,CAAC,aAAyB,CAAC,EAAE,KAAK,gBAAgB,EAAE;YAChE,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,QAAQ,KAAK,CAAC,GAAG,EAAE;gBAClB,KAAK,WAAW;oBACf,IAAI,CAAC,aAAa,EAAE,CAAC;oBACrB,MAAM;gBACP,KAAK,YAAY;oBAChB,IAAI,CAAC,aAAa,EAAE,CAAC;oBACrB,MAAM;aACP;SACD;IACF,CAAC;IAED,gCAAgC;IAChC,+BAA+B;IAC/B,GAAG,CAAC,KAAwB;QAC3B,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;QAC1B,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;QAC1B,gBAAgB;QAChB,IAAI,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,WAAW,EAAE;YAChE,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC;YAC5D,IAAI,KAAK,IAAI,CAAC,EAAE;gBACf,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;gBACrD,IAAI,CAAC,gBAAgB,EAAE,CAAC;aACxB;iBAAM;gBACN,IAAI,QAAQ,CAAC,aAAa,KAAK,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,EAAE;oBACzE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,wBAAwB,EAAE,EAAE,EAAE;wBAChD,QAAQ,EAAE,IAAI;qBACd,CAAC,CAAC;iBACH;aACD;SACD;QACD,wBAAwB;QACxB,IAAI,KAAK,EAAE;YACV,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;SACjB;QACD,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED,MAAM,CAAC,SAAiB;QACvB,MAAM,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,KAAK,IAAI,CAAC,EAAE;YACf,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,KAAK,EAAE,yDAAM,CAAC,GAAG,CAAC,CAAC;YAClD,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,KAAK,CAAC,EAAE;gBACzC,IAAI,CAAC,eAAe,EAAE,CAAC;aACvB;iBAAM;gBACN,IAAI,CAAC,gBAAgB,EAAE,CAAC;aACxB;SACD;IACF,CAAC;IAED,QAAQ,CAAC,KAAmC;QAC3C,IAAI,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,WAAW,EAAE;YAC7E,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACjD,IAAI,CAAC,gBAAgB,EAAE,CAAC;SACxB;QACD,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;QAC7C,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAEO,OAAO,CAAC,KAAa;QAC5B,MAAM,WAAW,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QACxC,OAAO,IAAI,CAAC,UAAU,CAAC,MAAM,CAC5B,CAAC,SAAS,EAAE,EAAE,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,WAAW,CACpI,CAAC;IACH,CAAC;IAEO,gBAAgB;QACvB,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,UAAU,EAAE,EAAE;gBAC9C,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,yDAAM,CAAC,GAAG,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,yDAAM,CAAC,GAAG;oBACtH,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC/B,CAAC,CAAC,CAAC;SACH;IACF,CAAC;IAEO,eAAe;QACtB,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAC7B;IACF,CAAC;IAED,mBAAmB,CAAC,eAAuB,EAAE,YAAoB;QAChE,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,UAAU,KAAK,YAAY;YAAE,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,yDAAM,CAAC,GAAG,CAAC,CAAC,CAAC;QACpI,IAAI,IAAI,CAAC,UAAU,KAAK,eAAe;YAAE,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;QACzF,OAAO,IAAI,CAAC,YAAY,CAAC;IAC1B,CAAC;IAED,IAAI,WAAW;QACd,IAAI,MAAc,CAAC;QACnB,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,WAAW;QAC5E,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,yDAAM,CAAC,uBAAuB,EAAE;YACjE,aAAa;YACb,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,yDAAM,CAAC,GAAG,CAAC,CAAC;SACjD;aAAM;YACN,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;SAChE;QACD,IAAI,MAAM,CAAC,IAAI,KAAK,aAAa,IAAI,MAAM,CAAC,KAAK,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YACzF,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACxC,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC9B,CAAC,CAAC,CAAC;SACH;QACD,OAAO,MAAM,CAAC;IACf,CAAC;IAED,IAAI,aAAa;QAChB,WAAW;QACX,IAAI,MAAc,CAAC;QACnB,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,WAAW;QAC5E,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,yDAAM,CAAC,uBAAuB,EAAE;YACjE,aAAa;YACb,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACxC;aAAM;YACN,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC;YACpE,IAAI,IAAI,CAAC,UAAU,GAAG,yDAAM,CAAC,GAAG,KAAK,CAAC,yDAAM,CAAC,GAAG;gBAC/C,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,yDAAM,CAAC,GAAG,CAAC,CAAC,CAAC;SAC1F;QACD,IAAI,MAAM,CAAC,IAAI,KAAK,aAAa,IAAI,MAAM,CAAC,KAAK,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YAC3F,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAC9B,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACxC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAChC,CAAC,CAAC,CAAC;SACH;QACD,OAAO,MAAM,CAAC;IACf,CAAC;IAED,IAAI,SAAS;QACZ,MAAM;QACN,IAAI,MAAc,CAAC;QACnB,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,WAAW;QAC5E,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,yDAAM,CAAC,uBAAuB,EAAE;YACjE,aAAa;YACb,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACxC;aAAM;YACN,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,GAAG,yDAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAC7E,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,KAAK,IAAI,CAAC,eAAe,CAAC,MAAM;gBAAE,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;SAC3G;QACD,IAAI,MAAM,CAAC,IAAI,KAAK,aAAa,IAAI,MAAM,CAAC,KAAK,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACvF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACxC,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC5B,CAAC,CAAC,CAAC;SACH;QACD,OAAO,MAAM,CAAC;IACf,CAAC;IAED,aAAa;QACZ,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,yDAAM,CAAC,GAAG;YAClC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,yDAAM,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,yDAAM,CAAC,GAAG,CAAC;IAChI,CAAC;IAED,aAAa;QACZ,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,yDAAM,CAAC,uBAAuB,EAAE;YACjE,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC;gBAAE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SAC7C;aAAM;YACN,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM;gBAAE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SACxE;IACF,CAAC;IAEK,aAAa;;YAClB,MAAM,IAAI,CAAC,YAAY;iBACrB,QAAQ,EAAE;iBACV,IAAI,CAAC,CAAC,OAAiB,EAAE,EAAE;gBAC3B,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC;YAC3B,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;gBAChB,IAAI,KAAK,EAAE;oBACV,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;oBACrB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,yBAAyB,EAAE,EAAE,EAAE;wBACjD,QAAQ,EAAE,IAAI;qBACd,CAAC,CAAC;iBACH;YACF,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAED,aAAa,CAAC,OAAe;QAC5B,MAAM,IAAI,GAAG,IAAI,QAAQ,EAAE,CAAC;QAC5B,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QACrD,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,EAAY,CAAC,CAAC;QACxC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,QAA4B,EAAE,EAAE;YAC7E,IAAI,OAAO,GAAG,EAAE,CAAC;YACjB,QAAQ,QAAQ,CAAC,MAAM,EAAE;gBACxB,KAAK,6DAAW,CAAC,OAAO;oBACvB,OAAO,GAAG,wBAAwB,CAAC;oBACnC,MAAM;gBACP,KAAK,6DAAW,CAAC,WAAW;oBAC3B,OAAO,GAAG,oCAAoC,CAAC;oBAC/C,MAAM;gBACP,KAAK,6DAAW,CAAC,qBAAqB;oBACrC,OAAO,GAAG,yBAAyB,CAAC;oBACpC,MAAM;aACP;YACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,EAAE;gBAC/B,QAAQ,EAAE,IAAI;aACd,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,yDAAM,CAAC,GAAG,CAAC,CAAC;QACrE,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,KAAK,CAAC,EAAE;YACzC,IAAI,CAAC,eAAe,EAAE,CAAC;SACvB;aAAM;YACN,IAAI,CAAC,gBAAgB,EAAE,CAAC;SACxB;IACF,CAAC;IAEK,IAAI,CAAC,OAAe;;YACzB,IAAI,OAAO,CAAC,IAAI,KAAK,aAAa,EAAE;gBACnC,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,OAAO,CAAC,KAAe,CAAC;gBAC1D,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gBACxB,OAAO;aACP;YACD,IAAI,MAAM,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE;gBAC1C,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,OAAO,CAAC,KAAe,CAAC;gBAC1D,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;aACxB;iBAAM;gBACN,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,gCAAgC,EAAE,EAAE,EAAE;oBACxD,QAAQ,EAAE,IAAI;iBACd,CAAC,CAAC;aACH;QACF,CAAC;KAAA;IAEK,iBAAiB,CAAC,OAAe;;YACtC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;gBAC9B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,EAAY,CAAC,CAAC,SAAS,CAC3D,CAAO,IAAI,EAAE,EAAE,CAAC;oBACf,OAAO,CAAC,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;oBAC3C,OAAO,CAAC,IAAI,CAAC,CAAC;gBACf,CAAC,GACD,CAAC,KAAK,EAAE,EAAE;oBACT,IAAI,KAAK,EAAE;wBACV,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;wBAC5D,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,KAAK,CAAC,EAAE;4BACzC,IAAI,CAAC,eAAe,EAAE,CAAC;yBACvB;6BAAM;4BACN,IAAI,CAAC,gBAAgB,EAAE,CAAC;yBACxB;wBACD,OAAO,CAAC,KAAK,CAAC,CAAC;qBACf;gBACF,CAAC,CACD,CAAC;YACH,CAAC,CAAC,CAAC;QACJ,CAAC;KAAA;IAEK,SAAS,CAAC,IAAU;;YACzB,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;YAChC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;gBAC9B,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,GAAG,EAAE;oBACpC,OAAO,CAAC,MAAM,CAAC,MAAgB,CAAC,CAAC;gBAClC,CAAC,CAAC,CAAC;gBACH,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC;QACJ,CAAC;KAAA;;oFAlTW,kBAAkB;kGAAlB,kBAAkB;;;;;;;;oJAAlB,mCAA+B;;QCrB5C,wEAAmC;QAAA,oEAAS;QAAA,4DAAK;QACjD,iFACC;QAAA,sFACC;QAAA,wHACC;QAGD,8EAWD;QAFE,6KAAwB,eAAW,IAAC;QATrC,4DAWD;QAAA,4DAAgB;QAChB,yFACC;QAD2D,4KAAkB,oBAAgB,IAAC;QAC9F,8HACC;;QAEF,4DAAmB;QACpB,4DAAiB;QAEjB,sFACC;QAAA,6EACC;QADwB,2IAAS,mBAAe,IAAC;QACjD,4EAAU;QAAA,+EAAmB;QAAA,4DAAW;QACzC,4DAAS;QACT,2EACC;QAAA,iFAAyI;QAArG,sKAAkB,gBAAY,IAAC,kHAAqB,yBAAqB,IAA1C;QAA0D,4DAAY;QAEzI,iFAAuI;QAArG,sKAAkB,gBAAY,IAAC,kHAAqB,yBAAqB,IAA1C;QAA0D,4DAAY;QAEvI,iFAAqI;QAArG,sKAAkB,gBAAY,IAAC,kHAAqB,yBAAqB,IAA1C;QAA0D,4DAAY;QACtI,4DAAM;QACN,8EACC;QADyB,2IAAS,mBAAe,IAAC;QAClD,4EAAU;QAAA,gFAAoB;QAAA,4DAAW;QAC1C,4DAAS;QACV,4DAAqB;QAErB,0FACC;QAAA,8EAAyD;QAAA,kEAAM;QAAA,4DAAS;QACzE,4DAAqB;;;;QAzCT,0DAA4C;QAA5C,2FAA4C;QAMrD,0DAA4B;QAA5B,gFAA4B;QAWjB,0DAAoD;QAApD,8JAAoD;QAWrD,0DAAwB;QAAxB,qFAAwB;QAExB,0DAAsB;QAAtB,mFAAsB;QAEtB,0DAAoB;QAApB,iFAAoB;;6FDdpB,kBAAkB;cAL9B,uDAAS;eAAC;gBACV,QAAQ,EAAE,eAAe;gBACzB,WAAW,EAAE,4BAA4B;gBACzC,SAAS,EAAE,CAAC,4BAA4B,CAAC;aACzC;oYAqBmB,eAAe;kBAAjC,uDAAS;mBAAC,MAAM;YACY,cAAc;kBAA1C,uDAAS;mBAAC,gBAAgB;YAyB3B,uBAAuB;kBADtB,0DAAY;mBAAC,kBAAkB,EAAE,CAAC,QAAQ,CAAC;;;;;;;;;;;;;;AElE7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACyB;AACK;AACZ;AACF;AACE;AACO;AACX;AACe;AACN;AACe;AACX;AACT;;AAoBpD,MAAM,eAAe;;8FAAf,eAAe;wJAAf,eAAe,kBAjBlB;YACR,4DAAY;YACZ,wEAAe;YACf,6FAAuB;YACvB,wEAAe;YACf,kFAAW;YACX,sEAAc;YACd,oEAAa;YACb,+EAAkB;YAClB,oFAAqB;YACrB,0DAAW;YACX,kEAAmB;YACnB,8EAAiB;YACjB,mFAAoB;SACpB;mIAGW,eAAe,mBAlBZ,wEAAkB,aAEhC,4DAAY;QACZ,wEAAe;QACf,6FAAuB;QACvB,wEAAe;QACf,kFAAW;QACX,sEAAc;QACd,oEAAa;QACb,+EAAkB;QAClB,oFAAqB;QACrB,0DAAW;QACX,kEAAmB;QACnB,8EAAiB;QACjB,mFAAoB,aAEX,wEAAkB;6FAEhB,eAAe;cAnB3B,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,wEAAkB,CAAC;gBAClC,OAAO,EAAE;oBACR,4DAAY;oBACZ,wEAAe;oBACf,6FAAuB;oBACvB,wEAAe;oBACf,kFAAW;oBACX,sEAAc;oBACd,oEAAa;oBACb,+EAAkB;oBAClB,oFAAqB;oBACrB,0DAAW;oBACX,kEAAmB;oBACnB,8EAAiB;oBACjB,mFAAoB;iBACpB;gBACD,OAAO,EAAE,CAAC,wEAAkB,CAAC;aAC7B;;;;;;;;;;;;;;AChCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AACO;AACyB;;;;;;;ICCzE,yFAMoB;IADnB,iaAAmC,KAAK,SAAE,iBAA6B,IAAC;IACxE,4DAAmB;;IAFnB,gFAAuB;;;;IAOxB,2FAMoB;IADnB,gaAAkC,KAAK,SAAE,iBAAkC,IAAC;IAC5E,4DAAmB;;IAFnB,iFAAwB;;;;;IAKzB,0EAKO;IADN,uYAA2D;IAC3D,4DAAM;;;;IAFN,mLAAgE;;ADjB3D,MAAM,mBAAmB;IAI/B,YAAoB,cAA8B;QAA9B,mBAAc,GAAd,cAAc,CAAgB;QAHlD,uBAAkB,GAAY,KAAK,CAAC;QACpC,sBAAiB,GAAY,KAAK,CAAC;IAEkB,CAAC;IAEtD,gBAAgB;QACf,MAAM,YAAY,GAAW,IAAI,CAAC,YAAY,CAAC;QAC/C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC;QACxC,IAAI,CAAC,cAAc,GAAG,YAAY,CAAC;IACpC,CAAC;IAED,eAAe,CAAC,KAAiB,EAAE,KAAa;QAC/C,IAAI,kBAAkB,GAAmB,IAAI,CAAC;QAC9C,IAAI,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,EAAE;YACtC,kBAAkB,GAAG,IAAI,CAAC;SAC1B;aAAM,IAAI,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,KAAK,EAAE;YAC9C,kBAAkB,GAAG,KAAK,CAAC;SAC3B;QAED,IAAI,kBAAkB,KAAK,IAAI,EAAE;YAChC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,KAAK,EAAE,kBAAkB,EAAE,KAAK,CAAC,CAAC;SAClE;IACF,CAAC;IAED,IAAI,YAAY;QACf,OAAO,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC;IACzC,CAAC;IAED,IAAI,YAAY;QACf,OAAO,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC;IACzC,CAAC;IAED,IAAI,YAAY,CAAC,KAAa;QAC7B,IAAI,CAAC,cAAc,CAAC,YAAY,GAAG,KAAK,CAAC;IAC1C,CAAC;IAED,IAAI,cAAc;QACjB,OAAO,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC;IAC3C,CAAC;IAED,IAAI,cAAc,CAAC,KAAa;QAC/B,IAAI,CAAC,cAAc,CAAC,cAAc,GAAG,KAAK,CAAC;IAC5C,CAAC;;sFA3CW,mBAAmB;mGAAnB,mBAAmB;QCThC,yEACC;QAAA,yEAAgI;QAA1C,iKAA8B,IAAI,IAAC;QAAC,4DAAM;QAEhI,yIAMC;QAED,4EAA8C;QAAtC,2IAAS,sBAAkB,IAAC;QAAC,4DAAS;QAE9C,yEAAmI;QAAzC,gKAA6B,IAAI,IAAC;QAAC,4DAAM;QACnI,yIAMC;QACF,4DAAM;QACN,yEACC;QAAA,+GAKC;QACF,4DAAM;;QA5B2B,0DAAqD;QAArD,4JAAqD;QAIpF,0DAA0B;QAA1B,wFAA0B;QAQO,0DAAuD;QAAvD,8JAAuD;QAGxF,0DAAyB;QAAzB,uFAAyB;QASzB,0DAAiD;QAAjD,qFAAiD;;6FDhBtC,mBAAmB;cAL/B,uDAAS;eAAC;gBACV,QAAQ,EAAE,iBAAiB;gBAC3B,WAAW,EAAE,8BAA8B;gBAC3C,SAAS,EAAE,CAAC,8BAA8B,CAAC;aAC3C;;;;;;;;;;;;;;AERD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACkB;AACJ;AAC8B;AACvB;;AAOvD,MAAM,gBAAgB;;+FAAhB,gBAAgB;0JAAhB,gBAAgB,kBAHnB,CAAC,4DAAY,EAAE,kGAAiB,EAAE,wEAAe,EAAE,oEAAa,CAAC;mIAG9D,gBAAgB,mBAJb,0EAAmB,aACxB,4DAAY,EAAE,kGAAiB,EAAE,wEAAe,EAAE,oEAAa,aAC/D,0EAAmB;6FAEjB,gBAAgB;cAL5B,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,0EAAmB,CAAC;gBACnC,OAAO,EAAE,CAAC,4DAAY,EAAE,kGAAiB,EAAE,wEAAe,EAAE,oEAAa,CAAC;gBAC1E,OAAO,EAAE,CAAC,0EAAmB,CAAC;aAC9B;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAuI;AAEhE;AACxB;;;;AAE/C,4DAA4D;AAC5D,mDAAmD;AAO5C,MAAM,qBAAqB;IAUjC,YAAoB,cAA8B;QAA9B,mBAAc,GAAd,cAAc,CAAgB;QANxC,UAAK,GAAyB,IAAI,0DAAY,EAAE,CAAC;QAO1D,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5C,CAAC;IAED,eAAe;QACd,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QACzE,IAAI,CAAC,IAAI,EAAE,CAAC;IACb,CAAC;IAED,WAAW,CAAC,OAAsB;QACjC,IAAI,OAAO,CAAC,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE;YAC/B,IAAI,CAAC,IAAI,EAAE,CAAC;YACZ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;SACjE;IACF,CAAC;IAED,WAAW,CAAC,GAAe;QAC1B,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAC1D,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IACvB,CAAC;IAEO,SAAS;QAChB,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACjE,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAC9D,CAAC;IAEO,WAAW,CAAC,GAAe;QAClC,MAAM,gBAAgB,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC;QAE3E,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,gBAAgB,CAAC,IAAI,CAAC;QACtC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC,gBAAgB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE7E,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,gBAAgB,CAAC,GAAG,CAAC;QACrC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAE1E,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QACjC,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACtB,CAAC;IAEO,SAAS,CAAC,CAAS,EAAE,CAAS;QACrC,MAAM,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC3B,CAAC;IAEO,kBAAkB,CAAC,CAAS,EAAE,CAAS;QAC9C,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QACzD,OAAO,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/E,CAAC;IAEO,IAAI;QACX,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;SAClF;QAED,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC;QAC9C,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC;QAEhD,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC;QAC9B,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;QAE/C,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;QACpE,SAAS,CAAC,YAAY,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;QACvC,SAAS,CAAC,YAAY,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;QAEvC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC;QAE3C,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;QACrE,SAAS,CAAC,YAAY,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;QACvC,SAAS,CAAC,YAAY,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;QAEvC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;QAE3C,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;QAC7B,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;QACrB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC,EAAE,4DAAM,CAAC,yBAAyB,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;QACjH,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,4DAAM,CAAC,mBAAmB,CAAC;QAChD,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;IACnB,CAAC;;0FA7FW,qBAAqB;qGAArB,qBAAqB;;;;;;QCblC,+EAA2G;QAA5C,2JAAa,uBAAmB,IAAC;QAAE,4DAAS;;6FDa9F,qBAAqB;cALjC,uDAAS;eAAC;gBACV,QAAQ,EAAE,mBAAmB;gBAC7B,WAAW,EAAE,gCAAgC;gBAC7C,SAAS,EAAE,CAAC,gCAAgC,CAAC;aAC7C;oIAEqB,MAAM;kBAA1B,uDAAS;mBAAC,QAAQ;YAEV,GAAG;kBAAX,mDAAK;YACI,KAAK;kBAAd,oDAAM;;;;;;;;;;;;;;AEjBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AAC5B;AACd;AAC3B;;;;;;;;;;;;AAOxC,MAAM,oBAAoB;IAShC,YAAoB,cAA8B,EAAU,YAAiC,EAAU,UAAsB;QAAzG,mBAAc,GAAd,cAAc,CAAgB;QAAU,iBAAY,GAAZ,YAAY,CAAqB;QAAU,eAAU,GAAV,UAAU,CAAY;QARpH,mBAAc,GAAY,IAAI,CAAC;QAC9B,eAAU,GAAuB,IAAI,0DAAY,EAAE,CAAC;QAE9D,sBAAiB,GAAW,IAAI,MAAM,CAAC,oBAAoB,CAAC,CAAC;QAE7D,QAAG,GAAW,WAAW,CAAC;IAGsG,CAAC;IAEjI,QAAQ;QACP,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC;QACzG,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC;IACtC,CAAC;IAED,WAAW;QACV,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,CAAC;IACrC,CAAC;IAGD,WAAW,CAAC,GAAe;QAC1B,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC;QACzE,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC,IAAI,CAAC;QAClC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC,GAAG,CAAC;QAEjC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE;YACrE,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;SACvB;IACF,CAAC;IAED,WAAW,CAAC,KAAa;QACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;IACzD,CAAC;IAED,WAAW;QACV,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;IACxE,CAAC;IAGD,aAAa,CAAC,KAAoB;QACjC,MAAM,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAE3C,IACC,CAAC,UAAU,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,UAAU,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACpE,CAAC,UAAU,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,UAAU,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACpE,CAAC,UAAU,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,UAAU,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACpE,KAAK,CAAC,GAAG,KAAK,WAAW;YACzB,KAAK,CAAC,GAAG,KAAK,QAAQ,EACrB;YACD,OAAO;SACP;QAED,KAAK,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,IAAI,IAAI;QACP,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,4DAAM,CAAC,aAAa,EAAE,4DAAM,CAAC,aAAa,GAAG,4DAAM,CAAC,gBAAgB,CAAC,CAAC;IACnG,CAAC;IAED,IAAI,IAAI,CAAC,KAAa;QACrB,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE;YAC9D,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,4DAAM,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;SAC3E;IACF,CAAC;IAED,IAAI,IAAI;QACP,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,4DAAM,CAAC,eAAe,EAAE,4DAAM,CAAC,eAAe,GAAG,4DAAM,CAAC,gBAAgB,CAAC,CAAC;IACvG,CAAC;IAED,IAAI,IAAI,CAAC,KAAa;QACrB,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE;YAC9D,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,4DAAM,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;SAC7E;IACF,CAAC;IAED,IAAI,IAAI;QACP,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,4DAAM,CAAC,cAAc,EAAE,4DAAM,CAAC,cAAc,GAAG,4DAAM,CAAC,gBAAgB,CAAC,CAAC;IACrG,CAAC;IAED,IAAI,IAAI,CAAC,KAAa;QACrB,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE;YAC9D,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,4DAAM,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;SAC5E;IACF,CAAC;IAED,IAAI,KAAK;QACR,MAAM,WAAW,GAAW,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,4DAAM,CAAC,eAAe,EAAE,4DAAM,CAAC,eAAe,GAAG,4DAAM,CAAC,gBAAgB,CAAC,CAAC;QAC3H,OAAO,CAAC,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,GAAG,4DAAM,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACvE,CAAC;IAED,IAAI,KAAK,CAAC,KAAa;QACtB,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,4DAAM,CAAC,aAAa,CAAC;aACrD,QAAQ,CAAC,EAAE,CAAC;aACZ,WAAW,EAAE,CAAC;QAEhB,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC;YAAE,QAAQ,GAAG,GAAG,GAAG,QAAQ,CAAC;QAErD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,4DAAM,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;IACjF,CAAC;IAEO,eAAe,CAAC,cAAsB,EAAE,KAAa,EAAE,cAAsB;QACpF,OAAO,cAAc,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,cAAc,GAAG,cAAc,CAAC,SAAS,CAAC,KAAK,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;IACtH,CAAC;;wFAvGW,oBAAoB;oGAApB,oBAAoB;0JAApB,uBAAmB,kKAAnB,yBAAqB;;QCVlC,yEACC;QAAA,0FAA+F;QAAlD,6JAAS,uBAAmB,IAAC;QAAC,4DAAoB;QAC/F,yFAA8E;QAA/C,gLAA2B;QAAC,4DAAmB;QAC/E,4DAAM;QACN,yEACC;QAAA,yEACC;QAAA,oFACC;QAAA,4EAAW;QAAA,4DAAC;QAAA,4DAAY;QACxB,4EACD;QADwC,uLAAuB;QAA9D,4DACD;QAAA,4DAAiB;QACjB,qFACC;QAAA,6EAAW;QAAA,6DAAC;QAAA,4DAAY;QACxB,4EACD;QADwC,uLAAuB;QAA9D,4DACD;QAAA,4DAAiB;QACjB,qFACC;QAAA,6EAAW;QAAA,6DAAC;QAAA,4DAAY;QACxB,6EACD;QADwC,uLAAuB;QAA9D,4DACD;QAAA,4DAAiB;QAClB,4DAAM;QAEN,2EACC;QAAA,kFASc;QAFb,mLAAmC;QAEnC,4DAAa;QACd,qEAAI;QAAA,wDAAgB;QAAA,4DAAI;QACxB,sEAAiG;QAClG,4DAAM;QACP,4DAAM;;QAjC4B,0DAAW;QAAX,wEAAW;QAOH,0DAAuB;QAAvB,6EAAuB;QAIvB,0DAAuB;QAAvB,6EAAuB;QAIvB,0DAAuB;QAAvB,6EAAuB;QAW9D,0DAAoB;QAApB,4EAAoB;QAIjB,0DAAgB;QAAhB,oFAAgB;QACG,0DAAmE;QAAnE,gKAAmE;;6FDtB/E,oBAAoB;cALhC,uDAAS;eAAC;gBACV,QAAQ,EAAE,kBAAkB;gBAC5B,WAAW,EAAE,+BAA+B;gBAC5C,SAAS,EAAE,CAAC,+BAA+B,CAAC;aAC5C;4TAES,cAAc;kBAAtB,mDAAK;YACI,UAAU;kBAAnB,oDAAM;YAmBP,WAAW;kBADV,0DAAY;mBAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC;YAoB9C,aAAa;kBADZ,0DAAY;mBAAC,kBAAkB,EAAE,CAAC,QAAQ,CAAC;;;;;;;;;;;;;;AEjD7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACI;AACqB;AACT;AACE;AACmC;AACd;AACH;;AAOtE,MAAM,iBAAiB;;gGAAjB,iBAAiB;4JAAjB,iBAAiB,kBAHpB,CAAC,4DAAY,EAAE,sEAAc,EAAE,wEAAe,EAAE,+EAAkB,EAAE,0DAAW,CAAC;mIAG7E,iBAAiB,mBAJd,2GAAoB,EAAE,4FAAqB,EAAE,yFAAoB,aACtE,4DAAY,EAAE,sEAAc,EAAE,wEAAe,EAAE,+EAAkB,EAAE,0DAAW,aAC9E,2GAAoB;6FAElB,iBAAiB;cAL7B,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,2GAAoB,EAAE,4FAAqB,EAAE,yFAAoB,CAAC;gBACjF,OAAO,EAAE,CAAC,4DAAY,EAAE,sEAAc,EAAE,wEAAe,EAAE,+EAAkB,EAAE,0DAAW,CAAC;gBACzF,OAAO,EAAE,CAAC,2GAAoB,CAAC;aAC/B;;;;;;;;;;;;;;ACdD;AAAA;AAAA;AAAA;AAAA;AAAsG;AAC/B;AACxB;;;;AAE/C,4DAA4D;AAC5D,mDAAmD;AAO5C,MAAM,oBAAoB;IAOhC,YAAoB,cAA8B;QAA9B,mBAAc,GAAd,cAAc,CAAgB;QALxC,UAAK,GAAyB,IAAI,0DAAY,EAAE,CAAC;QAM1D,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5C,CAAC;IAED,eAAe;QACd,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,IAAI,EAAE,CAAC;IACb,CAAC;IAEO,SAAS;QAChB,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACjE,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAC9D,CAAC;IAED,WAAW,CAAC,GAAe;QAC1B,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAC1D,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IACvB,CAAC;IAEO,WAAW,CAAC,GAAe;QAClC,MAAM,gBAAgB,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC;QAE3E,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,gBAAgB,CAAC,GAAG,CAAC;QACrC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE/E,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;IACxD,CAAC;IAEO,SAAS,CAAC,CAAS,EAAE,CAAS;QACrC,MAAM,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC3B,CAAC;IAEO,kBAAkB,CAAC,CAAS,EAAE,CAAS;QAC9C,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QACzD,OAAO,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/E,CAAC;IAEO,IAAI;QACX,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;SAClF;QAED,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC;QAC9C,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC;QAEhD,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;QAChE,kCAAkC;QAClC,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;QACpC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC;QACxC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC;QACxC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC;QACxC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC;QACxC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC;QACxC,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;QACpC,iCAAiC;QAEjC,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;QACrB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QACnC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC9B,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;QAChB,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;QAErB,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;QACrB,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,4DAAM,CAAC,mBAAmB,CAAC;QAChD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,cAAc,GAAG,4DAAM,CAAC,mBAAmB,EAAE,KAAK,EAAE,4DAAM,CAAC,yBAAyB,CAAC,CAAC;QAC5G,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;QAClB,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACtB,CAAC;;wFAhFW,oBAAoB;oGAApB,oBAAoB;;;;;;QCZjC,+EAAwG;QAA3C,0JAAa,uBAAmB,IAAC;QAAC,4DAAS;;6FDY3F,oBAAoB;cALhC,uDAAS;eAAC;gBACV,QAAQ,EAAE,kBAAkB;gBAC5B,WAAW,EAAE,+BAA+B;gBAC5C,SAAS,EAAE,CAAC,+BAA+B,CAAC;aAC5C;oIAEqB,MAAM;kBAA1B,uDAAS;mBAAC,QAAQ;YACT,KAAK;kBAAd,oDAAM;;;;;;;;;;;;;;AEdR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgF;AAET;AACiB;AAC1B;AAClB;;;;;;;;;;;;;ICCxC,8DACC;IADD,0EACC;IAAA,uEACC;IAAA,8EAMC;IAAA,sEAOA;IAAA,sEAOD;IAAA,4DAAU;IACX,4DAAO;IACP,sEACD;IAAA,4DAAM;;;IAzBY,sFAA+B;IAI9C,0DAAmD;IAAnD,+GAAmD;IASlD,0DAAsE;IAAtE,gMAAsE;IAJtE,wFAA4B;IAW5B,0DAAsE;IAAtE,iMAAsE;IAJtE,wFAA4B;;;;IA8CjC,qEAAwH;;;IAAhG,0LAAyE;;ADxD7F,MAAM,gBAAgB;IAe5B,YAAoB,cAA8B,EAAU,YAAiC,EAAS,WAAwB;QAA1G,mBAAc,GAAd,cAAc,CAAgB;QAAU,iBAAY,GAAZ,YAAY,CAAqB;QAAS,gBAAW,GAAX,WAAW,CAAa;QAC7H,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,yDAAM,CAAC,aAAa,EAAE,CAAC,EAAE,yDAAM,CAAC,cAAc,EAAE,CAAC;QACxE,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC,EAAE,yDAAM,CAAC,aAAa,EAAE,CAAC,EAAE,yDAAM,CAAC,cAAc,EAAE,CAAC;QACjF,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,EAAE,yDAAM,CAAC,aAAa,EAAE,CAAC,EAAE,yDAAM,CAAC,cAAc,EAAE,CAAC;QACzE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,GAAG,KAAK,CAAC;IACvD,CAAC;IAED,eAAe;QACd,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;QAC1F,IAAI,CAAC,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;QAChG,IAAI,CAAC,cAAc,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACjD,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,WAAW,CAAC;QAC/E,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,YAAY,CAAC;QAChF,IAAI,CAAC,cAAc,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAEjD,UAAU,CAAC,GAAG,EAAE;YACf,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,GAAG,yDAAM,CAAC,6BAA6B,CAAC;YAChG,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,GAAG,yDAAM,CAAC,6BAA6B,CAAC;YAChG,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;QAClC,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,IAAI,WAAW;QACd,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;IAC1B,CAAC;IAED,IAAI,YAAY;QACf,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;IAC1B,CAAC;IACD,IAAI,UAAU;QACb,OAAO,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED,IAAI,WAAW;QACd,OAAO,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED,IAAI,aAAa;QAChB,OAAO,IAAI,CAAC,mBAAmB,CAAC;IACjC,CAAC;IAED,IAAI,eAAe;QAClB,OAAO,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC;IAC5C,CAAC;IAED,IAAI,cAAc;QACjB,OAAO,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC;IAC3C,CAAC;IAED,IAAI,eAAe;QAClB,OAAO,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC;IAC5C,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACrB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;SACtC;IACF,CAAC;IAED,YAAY;QACX,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IACxB,CAAC;IAED,OAAO,CAAC,SAAiB,EAAE,SAAiB;QAC3C,IAAI,CAAC,mBAAmB,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,SAAS,CAAC;QAC3D,IAAI,CAAC,mBAAmB,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,SAAS,CAAC;QAC3D,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IACjE,CAAC;IAED,UAAU;QACT,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;QAClD,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAC1G,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAC5G,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAClE,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACvD,GAAG,CAAC,MAAM,GAAG,GAAG,EAAE;YACjB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC;QAC/D,CAAC,CAAC;QACF,GAAG,CAAC,GAAG,GAAG,SAAS,CAAC;QACpB,MAAM,OAAO,qBAAQ,IAAI,CAAC,mBAAmB,CAAE,CAAC;QAChD,MAAM,UAAU,GAAqB,GAAG,EAAE;YACzC,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QAC7C,CAAC,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IAC3C,CAAC;IAED,aAAa,CAAC,GAAqB,EAAE,SAAiB,EAAE,OAAa;QACpE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;QACzF,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;QAC3F,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACvD,GAAG,CAAC,MAAM,GAAG,GAAG,EAAE;YACjB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACnC,CAAC,CAAC;QACF,GAAG,CAAC,GAAG,GAAG,SAAS,CAAC;IACrB,CAAC;;gFAnHW,gBAAgB;gGAAhB,gBAAgB;;;;;;;;;;QCZ7B,4EACC;QAAA,yEACC;QAAA,yEACC;QAD6F,mJAAa,uBAAmB,IAAC;QAC9H,0EAAyC;QACzC,0EAAkD;QAClD,sEACC;QAAA,kHACC;QAyBF,4DAAM;QAEN,0EASO;QALN,wJAAkB,kBAAc,IAAC,kGACd,gBAAY,IADE,kGAIjB,iDAA6C,IAJ5B;QAKjC,4DAAM;QAEP,2EAUO;QALN,wJAAkB,kBAAc,IAAC,kGACd,gBAAY,IADE,kGAIjB,iDAA6C,IAJ5B;QAKjC,4DAAM;QAEP,2EAUO;QALN,wJAAkB,kBAAc,IAAC,kGACd,gBAAY,IADE,kGAIjB,iDAA6C,IAJ5B;QAKjC,4DAAM;QACP,+GAAkH;QAClH,oFAAsD;QACvD,4DAAM;QACP,4DAAM;QACP,4DAAM;;QAvEc,0DAAgE;QAAhE,2KAAgE;QACvD,0DAAkE;QAAlE,8KAAkE;QAIP,0DAAgD;QAAhD,8GAAgD;QAmCpI,0DAA2C;QAA3C,wGAA2C;QAY3C,0DAA0C;QAA1C,uGAA0C;QAY1C,0DAA2C;QAA3C,wGAA2C;QAGvC,0DAAkB;QAAlB,gFAAkB;;6FDxDb,gBAAgB;cAL5B,uDAAS;eAAC;gBACV,QAAQ,EAAE,aAAa;gBACvB,WAAW,EAAE,0BAA0B;gBACvC,SAAS,EAAE,CAAC,0BAA0B,CAAC;aACvC;4UAGA,UAAU;kBADT,uDAAS;mBAAC,YAAY,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;YAI1C,aAAa;kBADZ,uDAAS;mBAAC,eAAe,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;YAG7C,SAAS;kBADR,uDAAS;mBAAC,WAAW,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;;;;;;;;;;;;;;AElB1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwD;AACT;AACN;AACsC;AACmB;AAC3C;;AAOhD,MAAM,aAAa;;4FAAb,aAAa;oJAAb,aAAa,kBAHhB,CAAC,4DAAY,EAAE,4FAAuB,EAAE,qEAAc,EAAE,+GAAkB,CAAC;mIAGxE,aAAa,mBAJV,mEAAgB,aACrB,4DAAY,EAAE,4FAAuB,EAAE,qEAAc,EAAE,+GAAkB,aACzE,mEAAgB;6FAEd,aAAa;cALzB,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,mEAAgB,CAAC;gBAChC,OAAO,EAAE,CAAC,4DAAY,EAAE,4FAAuB,EAAE,qEAAc,EAAE,+GAAkB,CAAC;gBACpF,OAAO,EAAE,CAAC,mEAAgB,CAAC;aAC3B;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACsC;;;;;AAMjF,MAAM,eAAe;IAC3B,YAAoB,YAAiC;QAAjC,iBAAY,GAAZ,YAAY,CAAqB;IAAG,CAAC;IAEzD,QAAQ;QACP,oFAAoF;QACpF,gEAAgE;QAChE,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;QAC3E,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IACpE,CAAC;;8EARW,eAAe;+FAAf,eAAe;QCP5B,0EACC;QAAA,4EAA2C;QAC3C,4EAA2C;QAC5C,4DAAO;;6FDIM,eAAe;cAL3B,uDAAS;eAAC;gBACV,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,yBAAyB;gBACtC,SAAS,EAAE,CAAC,yBAAyB,CAAC;aACtC;;;;;;;;;;;;;;AEND;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACsC;AACL;AACA;AACrB;;AAQ9C,MAAM,YAAY;;2FAAZ,YAAY;kJAAZ,YAAY,mBAFb,EAAE,YAFJ,CAAC,4DAAY,EAAE,4FAAuB,EAAE,uFAAa,EAAE,uFAAa,CAAC;mIAIlE,YAAY,mBALT,iEAAe,aACpB,4DAAY,EAAE,4FAAuB,EAAE,uFAAa,EAAE,uFAAa,aACnE,iEAAe;6FAGb,YAAY;cANxB,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,iEAAe,CAAC;gBAC/B,OAAO,EAAE,CAAC,4DAAY,EAAE,4FAAuB,EAAE,uFAAa,EAAE,uFAAa,CAAC;gBAC9E,OAAO,EAAE,CAAC,iEAAe,CAAC;gBAC1B,SAAS,EAAE,EAAE;aACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZiD;AACQ;AACa;;;;;;;;;;;;;;ICqBrE,iFAAiG;IAAnD,2UAAiC;IAAkB,uDAAY;IAAA,4DAAa;;;IAA1C,4EAAgB;IAAC,0DAAY;IAAZ,0EAAY;;ADdxG,MAAM,eAAe;IAY3B,YAAoB,cAA8B,EAAU,QAAqB;QAA7D,mBAAc,GAAd,cAAc,CAAgB;QAAU,aAAQ,GAAR,QAAQ,CAAa;QAXjF,aAAQ,GAAW,EAAE,CAAC;QACtB,cAAS,GAAW,EAAE,CAAC;QACvB,SAAI,GAAW,EAAE,CAAC;QAClB,SAAI,GAAW,MAAM,CAAC;QACtB,aAAQ,GAAW,+BAA+B,CAAC;QACnD,aAAQ,GAAW,EAAE,CAAC;QACtB,aAAQ,GAAW,iBAAiB,CAAC;QACrC,eAAU,GAAa,CAAC,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;QAClF,WAAM,GAAW,MAAM,CAAC;IAG4D,CAAC;IAErF,QAAQ;QACP,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;QAC1E,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;IAC7E,CAAC;IAED,WAAW;QACV,MAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QACnD,IAAI,UAAU,EAAE;YACf,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACf,IAAI,CAAC,IAAI,GAAG,WAAW,CAAC;aACxB;YACD,UAAU,CAAC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;YAC3D,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;gBACzB,UAAU,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,EAAE,oBAAoB,CAAC,CAAC,CAAC;aAC1F;iBAAM,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;gBACjC,UAAU,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,EAAE,oBAAoB,CAAC,CAAC,CAAC;aAC5F;YACD,UAAU,CAAC,KAAK,EAAE,CAAC;SACnB;IACF,CAAC;IAEK,WAAW;;YAChB,QAAQ,IAAI,CAAC,IAAI,EAAE;gBAClB,KAAK,MAAM,CAAC,CAAC;oBACZ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5C,MAAM;iBACN;gBACD,KAAK,OAAO,CAAC,CAAC;oBACb,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC7C,MAAM;iBACN;aACD;YAED,MAAM,SAAS,GAAG,IAAI,OAAO,EAAE,CAAC;YAChC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,kBAAkB,CAAC,CAAC;YAC/C,SAAS,CAAC,MAAM,CAAC,eAAe,EAAE,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;YAEhE,MAAM,QAAQ,GAAG,IAAI,QAAQ,EAAE,CAAC;YAChC,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YAClC,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACxC,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAEnC,MAAM,cAAc,GAAgB;gBACnC,MAAM,EAAE,MAAM;gBACd,OAAO,EAAE,SAAS;gBAClB,IAAI,EAAE,QAAQ;gBACd,QAAQ,EAAE,QAAQ;aAClB,CAAC;YAEF,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,cAAc,CAAC;iBAClC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;iBACnC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;gBACd,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;gBAC/B,IAAI,CAAC,YAAY,EAAE,CAAC;YACrB,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;QACjD,CAAC;KAAA;IAED,YAAY;QACX,IAAI,CAAC,QAAQ;aACX,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;aAC3E,QAAQ,EAAE;YACX,wCAAwC;aACvC,SAAS,CAAC,GAAG,EAAE;YACf,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qBAAqB;QACpB,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,MAAM,CAAC,EAAE,GAAG,YAAY,CAAC;QACzB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACxD,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC;QAC1D,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAEpC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IACvB,CAAC;IAED,WAAW,CAAC,GAAoC;QAC/C,IAAI,GAAG,EAAE;YACR,QAAQ,IAAI,CAAC,MAAM,EAAE;gBACpB,KAAK,MAAM,CAAC,CAAC;oBACZ,GAAG,CAAC,MAAM,GAAG,WAAW,CAAC;oBACzB,MAAM;iBACN;gBACD,KAAK,WAAW,CAAC,CAAC;oBACjB,GAAG,CAAC,MAAM,GAAG,iBAAiB,CAAC;oBAC/B,MAAM;iBACN;gBACD,KAAK,OAAO,CAAC,CAAC;oBACb,GAAG,CAAC,MAAM,GAAG,aAAa,CAAC;oBAC3B,MAAM;iBACN;gBACD,KAAK,QAAQ,CAAC,CAAC;oBACd,GAAG,CAAC,MAAM,GAAG,cAAc,CAAC;oBAC5B,MAAM;iBACN;gBACD,KAAK,QAAQ,CAAC,CAAC;oBACd,GAAG,CAAC,MAAM,GAAG,iBAAiB,CAAC;oBAC/B,MAAM;iBACN;gBACD,KAAK,MAAM,CAAC,CAAC;oBACZ,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC;oBACpB,MAAM;iBACN;aACD;YACD,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAC7F,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;YAClD,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;SACpD;IACF,CAAC;;8EA5HW,eAAe;+FAAf,eAAe;QCT5B,wEAAmC;QAAA,mEAAQ;QAAA,4DAAK;QAEhD,qFACC;QAAA,oEACD;QAAA,4DAAqB;QAErB,iFACC;QAAA,4EAAW;QAAA,wEAAa;QAAA,4DAAY;QACpC,2EACD;QAD6B,iLAAkB;QAA9C,4DACD;QAAA,4DAAiB;QAEjB,oFACC;QAAA,4EAAW;QAAA,wEAAY;QAAA,4DAAY;QACnC,iFACC;QADW,mLAAgB;QAC3B,iFAAyB;QAAA,+DAAG;QAAA,4DAAa;QACzC,iFAA0B;QAAA,gEAAI;QAAA,4DAAa;QAC5C,4DAAa;QACd,4DAAiB;QACjB,mEAAiB;QAEjB,qFACC;QAAA,6EAAW;QAAA,kEAAM;QAAA,4DAAY;QAC7B,iFACC;QADW,qLAAkB;QAC7B,2HAAiG;QAClG,4DAAa;QACd,4DAAiB;QAEjB,6EAAkE;QAAxB,wIAAS,iBAAa,IAAC;QAAC,oEAAQ;QAAA,4DAAS;QAEnF,8EAAgE;QAAxB,wIAAS,iBAAa,IAAC;QAAC,8EAAkB;QAAA,4DAAS;QAE3F,8EAAyD;QAAA,kEAAM;QAAA,4DAAS;;QA5BvD,0DAAoB;QAApB,qJAAoB;QAKR,0DAAkB;QAAlB,6EAAkB;QAKlC,0DAAgB;QAAhB,2EAAgB;QAShB,0DAAkB;QAAlB,6EAAkB;QACjB,0DAAiC;QAAjC,mFAAiC;;6FDdlC,eAAe;cAL3B,uDAAS;eAAC;gBACV,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,yBAAyB;gBACtC,SAAS,EAAE,CAAC,yBAAyB,CAAC;aACtC;;;;;;;;;;;;;;AERD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACyB;AACK;AACZ;AACA;AACO;AACX;AACE;AACE;AACK;AACe;AAC1B;;AAoB9C,MAAM,YAAY;;2FAAZ,YAAY;kJAAZ,YAAY,kBAhBf;YACR,4DAAY;YACZ,wEAAe;YACf,6FAAuB;YACvB,wEAAe;YACf,oEAAa;YACb,wEAAe;YACf,+EAAkB;YAClB,oFAAqB;YACrB,0DAAW;YACX,kEAAmB;YACnB,sEAAc;YACd,8EAAiB;SACjB;mIAGW,YAAY,mBAjBT,kEAAe,aAE7B,4DAAY;QACZ,wEAAe;QACf,6FAAuB;QACvB,wEAAe;QACf,oEAAa;QACb,wEAAe;QACf,+EAAkB;QAClB,oFAAqB;QACrB,0DAAW;QACX,kEAAmB;QACnB,sEAAc;QACd,8EAAiB,aAER,kEAAe;6FAEb,YAAY;cAlBxB,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,kEAAe,CAAC;gBAC/B,OAAO,EAAE;oBACR,4DAAY;oBACZ,wEAAe;oBACf,6FAAuB;oBACvB,wEAAe;oBACf,oEAAa;oBACb,wEAAe;oBACf,+EAAkB;oBAClB,oFAAqB;oBACrB,0DAAW;oBACX,kEAAmB;oBACnB,sEAAc;oBACd,8EAAiB;iBACjB;gBACD,OAAO,EAAE,CAAC,kEAAe,CAAC;aAC1B;;;;;;;;;;;;;;AC/BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuE;;;;;;ICEtE,iFAA0D;;;;IAG1D,4EACC;IADO,qTAAgB;IACvB,yEACC;IAAA,oEACD;IAAA,4DAAM;IACP,4DAAS;;;IAFF,0DAAe;IAAf,4IAAe;;;IAKtB,sEACC;IAAA,oEAAG;IAAA,uDAAe;IAAA,4DAAI;IACvB,4DAAM;;;IADF,0DAAe;IAAf,6EAAe;;;;IAInB,6EAAuD;IAApC,uTAAkB;IAAkB,iEAAM;IAAA,4DAAS;;ADVhE,MAAM,cAAc;IAL3B;QAMU,WAAM,GAAW,EAAE,IAAI,EAAE,aAAa,EAAE,SAAS,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;QAClE,qBAAgB,GAAyB,IAAI,0DAAY,EAAU,CAAC;QACpE,mBAAc,GAAyB,IAAI,0DAAY,EAAU,CAAC;KAiB5E;IAfA,IAAI,IAAI;QACP,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;IACzB,CAAC;IAED,KAAK;QACJ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,aAAa;YACrC,OAAO,glBAAglB,CAAC;QACzlB,OAAO,IAAI,CAAC,MAAM,CAAC,KAAe,CAAC;IACpC,CAAC;IACD,MAAM;QACL,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACzC,CAAC;IACD,IAAI;QACH,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACvC,CAAC;;4EAnBW,cAAc;8FAAd,cAAc;QCP3B,wEAAc;QAAA,uDAAiB;QAAA,4DAAK;QACpC,0HACC;QAED,sMACC;QAMD,yEACC;QAAA,0GACC;QAEF,4DAAM;QACN,0HACC;;;QAjBa,0DAAiB;QAAjB,gFAAiB;QAClB,0DAAwC;QAAxC,gGAAwC;QAW/C,0DAA0C;QAA1C,yFAA0C;QAInC,0DAA2C;QAA3C,mGAA2C;;6FDT3C,cAAc;cAL1B,uDAAS;eAAC;gBACV,QAAQ,EAAE,WAAW;gBACrB,WAAW,EAAE,wBAAwB;gBACrC,SAAS,EAAE,CAAC,wBAAwB,CAAC;aACrC;gBAES,MAAM;kBAAd,mDAAK;YACI,gBAAgB;kBAAzB,oDAAM;YACG,cAAc;kBAAvB,oDAAM;;;;;;;;;;;;;;AEVR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACkB;AACW;AACnB;;AAM5C,MAAM,WAAW;;0FAAX,WAAW;gJAAX,WAAW,kBAHd,CAAC,4DAAY,EAAE,mFAAoB,EAAE,wEAAe,CAAC;mIAGlD,WAAW,mBAJR,+DAAc,aACnB,4DAAY,EAAE,mFAAoB,EAAE,wEAAe,aACnD,+DAAc;6FAEZ,WAAW;cALvB,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,+DAAc,CAAC;gBAC9B,OAAO,EAAE,CAAC,4DAAY,EAAE,mFAAoB,EAAE,wEAAe,CAAC;gBAC9D,OAAO,EAAE,CAAC,+DAAc,CAAC;aACzB;;;;;;;;;;;;;;ACTD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AACW;AACZ;AACoC;AACN;AACe;;;;;;;;;ICKpF,4EAA4F;IAA5B,+TAA2B;IAAC,8EAAmB;IAAA,4DAAS;;ADEnH,MAAM,iBAAiB;IAI7B,YAAmB,MAAiB,EAAU,MAAc,EAAU,cAA8B;QAAjF,WAAM,GAAN,MAAM,CAAW;QAAU,WAAM,GAAN,MAAM,CAAQ;QAAU,mBAAc,GAAd,cAAc,CAAgB;QAH3F,UAAK,GAAW,cAAc,CAAC;QACxC,mBAAc,GAAY,KAAK,CAAC;QAG/B,IAAI,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE;YAC1C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC3B;IACF,CAAC;IACD,UAAU;QACT,IAAI,IAAI,CAAC,cAAc,EAAE;YACxB,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,0FAAgB,EAAE,EAAE,UAAU,EAAE,0BAA0B,EAAE,CAAC,CAAC;YACjG,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;gBAC5C,IAAI,MAAM,EAAE;oBACX,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,EAAE,CAAC;oBACrC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;iBAClC;YACF,CAAC,CAAC,CAAC;SACH;aAAM;YACN,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,EAAE,CAAC;YACrC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;SAClC;IACF,CAAC;IACD,eAAe;QACd,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,CAAW,CAAC;QACzE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;IACnC,CAAC;IACD,SAAS;QACR,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,mGAAkB,EAAE,EAAE,UAAU,EAAE,4BAA4B,EAAE,CAAC,CAAC;QACrG,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YAC5C,IAAI,MAAM,EAAE;gBACX,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;aAClC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;;kFAlCW,iBAAiB;iGAAjB,iBAAiB;QCZ9B,yEACC;QAAA,4EACC;QAAA,wEAAwB;QAAA,uDAAW;QAAA,4DAAK;QACzC,4DAAS;QACT,yEACC;QAAA,yEACC;QAAA,oEAAG;QAAA,6FAAkC;QAAA,4DAAI;QAC1C,4DAAM;QACN,4EAAgE;QAAvB,yIAAS,gBAAY,IAAC;QAAC,uFAAuB;QAAA,4DAAS;QAChG,6EAA+D;QAAtB,0IAAS,eAAW,IAAC;QAAC,yFAA6B;QAAA,4DAAS;QACrG,qHAA4F;QAC7F,4DAAM;QAEN,0EACC;QAAA,0EACC;QAAA,sEAAI;QAAA,4EAAW;QAAA,4DAAK;QACpB,qEAAG;QAAA,sKAAgG;QAAA,4DAAI;QACxG,4DAAM;QACP,4DAAM;QACP,4DAAM;;QAjBoB,0DAAW;QAAX,0EAAW;QAQ3B,0DAAsB;QAAtB,oFAAsB;;6FDEnB,iBAAiB;cAL7B,uDAAS;eAAC;gBACV,QAAQ,EAAE,eAAe;gBACzB,WAAW,EAAE,4BAA4B;gBACzC,SAAS,EAAE,CAAC,4BAA4B,CAAC;aACzC;;;;;;;;;;;;;;AEXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACS;AACf;AACkB;AACA;AACoB;AAChC;AACiC;AACtB;;AAMnD,MAAM,cAAc;;6FAAd,cAAc;sJAAd,cAAc,kBAHjB,CAAC,qEAAgB,EAAE,4DAAY,EAAE,4FAAuB,EAAE,6FAAe,EAAE,4DAAY,EAAE,wEAAe,EAAE,wEAAe,CAAC;mIAGvH,cAAc,mBAJX,sEAAiB,aACtB,qEAAgB,EAAE,4DAAY,EAAE,4FAAuB,EAAE,6FAAe,EAAE,4DAAY,EAAE,wEAAe,EAAE,wEAAe,aACxH,sEAAiB;6FAEf,cAAc;cAL1B,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,sEAAiB,CAAC;gBACjC,OAAO,EAAE,CAAC,qEAAgB,EAAE,4DAAY,EAAE,4FAAuB,EAAE,6FAAe,EAAE,4DAAY,EAAE,wEAAe,EAAE,wEAAe,CAAC;gBACnI,OAAO,EAAE,CAAC,sEAAiB,CAAC;aAC5B;;;;;;;;;;;;;;ACbD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AAEI;AAEM;AACE;AACa;AAC3B;AACI;AACkB;;;;;;;;;;;;;;;ICA/D,+EACC;IADqF,mXAAsC;IAC3H,uDACA;IAAA,+EAAwB;IAAA,iEAAM;IAAA,4DAAW;IAC1C,4DAAW;;;IAHoC,4EAAmB;IACjE,0DACA;IADA,mGACA;;ADIG,MAAM,aAAa;IAMzB,YACS,YAAyB,EACzB,cAA8B,EAC9B,QAAqB,EACrB,MAAmC;QAHnC,iBAAY,GAAZ,YAAY,CAAa;QACzB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,aAAQ,GAAR,QAAQ,CAAa;QACrB,WAAM,GAAN,MAAM,CAA6B;QAT5C,SAAI,GAAW,EAAE,CAAC;QAClB,eAAU,GAAa,EAAE,CAAC;QAC1B,uBAAkB,GAAa,CAAC,2DAAK,CAAC,CAAC;QACvC,UAAK,GAAW,EAAE,CAAC;QACnB,aAAQ,GAAY,KAAK,CAAC;IAMvB,CAAC;IAEJ,QAAQ;QACP,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IAClE,CAAC;IAED,UAAU,CAAC,MAAyB;QACnC,OAAO,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;IACpC,CAAC;IAED,YAAY,CAAC,KAAwB;QACpC,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;QAC1B,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;QAE1B,gBAAgB;QAChB,IAAI,KAAK,CAAC,MAAM,GAAG,yDAAM,CAAC,mBAAmB,EAAE;YAC9C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,EAAE,EAAE;gBAC9C,QAAQ,EAAE,IAAI;aACd,CAAC,CAAC;SACH;aAAM;YACN,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,yDAAM,CAAC,GAAG,EAAE;gBACnD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC5B;iBAAM;gBACN,6BAA6B;gBAC7B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,4BAA4B,EAAE,EAAE,EAAE;oBACpD,QAAQ,EAAE,IAAI;iBACd,CAAC,CAAC;aACH;SACD;QACD,wBAAwB;QACxB,IAAI,KAAK,EAAE;YACV,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;SACjB;IACF,CAAC;IAED,eAAe,CAAC,SAAiB;QAChC,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACjD,IAAI,KAAK,IAAI,CAAC,EAAE;YACf,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;SACjC;IACF,CAAC;IAED,UAAU;QACT,IAAI,IAAI,CAAC,IAAI,KAAK,EAAE,EAAE;YACrB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,EAAE;gBACvC,QAAQ,EAAE,IAAI;aACd,CAAC,CAAC;YACH,OAAO;SACP;QACD,+BAA+B;QAC/B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,EAAE;YACvC,QAAQ,EAAE,IAAI;SACd,CAAC,CAAC;QAEH,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAU,EAAE,EAAE;YACxD,MAAM,IAAI,GAAG,IAAI,QAAQ,EAAE,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACvC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAErD,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,QAA4B,EAAE,EAAE;gBAC5E,IAAI,OAAO,GAAG,EAAE,CAAC;gBACjB,QAAQ,QAAQ,CAAC,MAAM,EAAE;oBACxB,KAAK,6DAAW,CAAC,OAAO;wBACvB,OAAO,GAAG,4BAA4B,CAAC;wBACvC,MAAM;oBACP,KAAK,6DAAW,CAAC,WAAW;wBAC3B,OAAO,GAAG,oCAAoC,CAAC;wBAC/C,MAAM;oBACP,KAAK,6DAAW,CAAC,qBAAqB;wBACrC,OAAO,GAAG,yBAAyB,CAAC;wBACpC,MAAM;iBACP;gBACD,4BAA4B;gBAC5B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,EAAE;oBAC/B,QAAQ,EAAE,IAAI;iBACd,CAAC,CAAC;gBACH,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;gBACf,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACtB,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,KAAK;QACJ,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;IACtB,CAAC;;0EAnGW,aAAa;6FAAb,aAAa;QCf1B,wEAAmC;QAAA,qEAAU;QAAA,4DAAK;QAClD,qFACC;QAAA,iFACC;QAAA,4EAAW;QAAA,wEAAa;QAAA,4DAAY;QACpC,2EACA;QAD4B,+KAAkB;QAA9C,4DACA;QAAA,2EAAU;QAAA,qFAAqB;QAAA,4DAAW;QAC3C,4DAAiB;QACjB,iFACC;QAAA,uFACC;QAAA,qHACC;QAGD,+EAQD;QAFE,yKAAwB,wBAAoB,IAAC;QAN9C,4DAQD;QAAA,4DAAgB;QAChB,4EACE;QAAA,kHAA+C;QAAA,iEAChD;QAAA,uFAAqB;QAAA,4DACrB;QACF,4DAAiB;QACjB,qEACD;QAAA,4DAAqB;QACrB,yFACC;QAAA,6EAAuE;QAAvB,sIAAS,gBAAY,IAAC;QAAC,uEAAW;QAAA,4DAAS;QAC3F,8EAAiH;QAAhC,sIAAS,WAAO,IAAC;QAAe,kEAAM;QAAA,4DAAS;QACjI,4DAAqB;;;QA5BS,0DAAkB;QAAlB,6EAAkB;QAKnC,0DAAoC;QAApC,mFAAoC;QAM7C,0DAA4B;QAA5B,gFAA4B;QAY1B,0DAAiB;QAAjB,kJAAiB;QAGI,0DAAqB;QAArB,kFAAqB;QACL,0DAAqB;QAArB,kFAAqB;;6FDhBnD,aAAa;cALzB,uDAAS;eAAC;gBACV,QAAQ,EAAE,UAAU;gBACpB,WAAW,EAAE,uBAAuB;gBACpC,SAAS,EAAE,CAAC,uBAAuB,CAAC;aACpC;;;;;;;;;;;;;;AEdD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACI;AACc;AACF;AACE;AACO;AACX;AACE;AACO;AACe;AAChB;AACd;;AAkB1C,MAAM,UAAU;;yFAAV,UAAU;8IAAV,UAAU,mBAHX,CAAC,6EAAW,CAAC,YAZf;YACR,4DAAY;YACZ,6FAAuB;YACvB,wEAAe;YACf,wEAAe;YACf,+EAAkB;YAClB,sEAAc;YACd,oEAAa;YACb,sEAAc;YACd,0DAAW;YACX,6EAAiB;SACjB;mIAIW,UAAU,mBAhBP,8DAAa,aAE3B,4DAAY;QACZ,6FAAuB;QACvB,wEAAe;QACf,wEAAe;QACf,+EAAkB;QAClB,sEAAc;QACd,oEAAa;QACb,sEAAc;QACd,0DAAW;QACX,6EAAiB,aAGR,8DAAa;6FAEX,UAAU;cAjBtB,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,8DAAa,CAAC;gBAC7B,OAAO,EAAE;oBACR,4DAAY;oBACZ,6FAAuB;oBACvB,wEAAe;oBACf,wEAAe;oBACf,+EAAkB;oBAClB,sEAAc;oBACd,oEAAa;oBACb,sEAAc;oBACd,0DAAW;oBACX,6EAAiB;iBACjB;gBACD,SAAS,EAAE,CAAC,6EAAW,CAAC;gBACxB,OAAO,EAAE,CAAC,8DAAa,CAAC;aACxB;;;;;;;;;;;;;;AC7BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AAEmC;AACN;AACmB;AAEF;AACzB;AACnB;;;;;;;;;;;;AAOrC,MAAM,qBAAqB;IAajC,YACS,cAA8B,EAC/B,WAAwB,EACvB,cAAqC,EACrC,sBAA8C,EAC9C,SAA2B;QAJ3B,mBAAc,GAAd,cAAc,CAAgB;QAC/B,gBAAW,GAAX,WAAW,CAAa;QACvB,mBAAc,GAAd,cAAc,CAAuB;QACrC,2BAAsB,GAAtB,sBAAsB,CAAwB;QAC9C,cAAS,GAAT,SAAS,CAAkB;QAf5B,aAAQ,GAAS,yDAAM,CAAC,cAAc,CAAC;QACvC,SAAI,GAAS,yDAAM,CAAC,WAAW,CAAC;QAChC,YAAO,GAAS,yDAAM,CAAC,WAAW,CAAC;QAEnC,UAAK,GAAS,yDAAM,CAAC,cAAc,CAAC;QACpC,gBAAW,GAAS,yDAAM,CAAC,cAAc,CAAC;QAC1C,SAAI,GAAS,yDAAM,CAAC,WAAW,CAAC;QAExC,eAAU,GAAY,KAAK,CAAC;QAS3B,IAAI,CAAC,WAAW,CAAC,2BAA2B,CAAC,SAAS,CAAC,CAAC,IAAsB,EAAE,EAAE;YACjF,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,QAAQ,CAAC,MAAY;QACpB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAgB,CAAC;QACxE,IAAI,OAAO,EAAE;YACZ,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;SAChC;QAED,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;QACvB,IAAI,MAAM,KAAK,yDAAM,CAAC,YAAY,EAAE;YACnC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC3B,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;YAC/B,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,GAAG,KAAK,CAAC;SACpD;QACD,MAAM,aAAa,GAAG,MAAM,KAAK,yDAAM,CAAC,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC;QAC5E,MAAM,OAAO,GAAG,QAAQ,CAAC,sBAAsB,CAAC,YAAY,CAAC,CAAC;QAC9D,0CAA0C;QAC1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACvC,OAAO,CAAC,CAAC,CAAiB,CAAC,KAAK,CAAC,UAAU,GAAG,aAAa,CAAC;SAC7D;QACD,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/C,CAAC;IAED,aAAa,CAAC,KAAW;QACxB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;QAC3D,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACpB,CAAC;IAED,0BAA0B,CAAC,IAAsB;QAChD,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACjC,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC;QACpC,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,KAAW,EAAE,EAAE;YAClE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,MAAY,EAAE,EAAE;YAC9D,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,IAAI,QAAQ;QACX,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACpB,CAAC;IAED,IAAI,SAAS;QACZ,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACpB,CAAC;IAED,IAAI,OAAO;QACV,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC5E,CAAC;IAED,IAAI,MAAM;QACT,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC5E,CAAC;IAED,IAAI,UAAU;QACb,OAAO,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC;IACvC,CAAC;IAED,IAAI,WAAW;QACd,OAAO,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC;IACxC,CAAC;IAED,IAAI,eAAe;QAClB,OAAO,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC;IAC5C,CAAC;IAED,IAAI,eAAe;QAClB,OAAO,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC;IAC5C,CAAC;IAED,IAAI,WAAW;QACd,OAAO,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC;IACxC,CAAC;IAED,IAAI,UAAU;QACb,OAAO,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC;IACvC,CAAC;IAED,IAAI,eAAe;QAClB,OAAO,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC;IAC5C,CAAC;IAED,IAAI,eAAe;QAClB,OAAO,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC;IAC5C,CAAC;IAED,YAAY;QACX,IAAI,CAAC,WAAW,GAAG,yDAAM,CAAC,cAAc,CAAC;QACzC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;QACxC,IAAI,CAAC,sBAAsB,CAAC,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC;QACjE,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,yDAAM,CAAC,yBAAyB,CAAC,CAAC;QAC9D,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,GAAG,IAAI,CAAC;QAC9C,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;IACzE,CAAC;IAED,OAAO,CAAC,SAAiB,EAAE,SAAiB,EAAE,GAAW;QACxD,MAAM,cAAc,GAAG,IAAI,CAAC,sBAAsB,CAAC,cAAc,CAAC;QAClE,MAAM,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,cAAc,CAAC,CAAC;QAErG,IAAI,CAAC,cAAc,EAAE;YACpB,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9G,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9G,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;SACrH;aAAM;YACN,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACrI,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACrI,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;SACrH;QACD,IAAI,CAAC,OAAO,GAAG;YACd,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;YAC/D,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;SAC/D,CAAC;QAEF,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC;QAClD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC3F,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAClC,CAAC;IAEO,kBAAkB,CAAC,SAAe,EAAE,GAAW,EAAE,OAAgB;QACxE,MAAM,SAAS,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QACjC,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YACtB,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;SAC/F;QACD,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YACtB,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;SAC/F;QACD,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YACtB,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/F;QACD,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YACtB,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/F;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,UAAU;QACT,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;QACzB,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACxE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,GAAG,KAAK,CAAC;IAChD,CAAC;;0FAvKW,qBAAqB;qGAArB,qBAAqB;QCflC,4EAKC;QAAA,yEASO;QAJN,4JAAkB,kBAAc,IAAC,sGACjB,kDAA8C,GAAG,CAAC,IADjC,sGAEd,gBAAY,IAFE;QAIjC,4DAAM;QAEP,yEASO;QAJN,4JAAkB,kBAAc,IAAC,sGACjB,kDAA8C,GAAG,CAAC,IADjC,sGAEd,gBAAY,IAFE;QAIjC,4DAAM;QAEP,yEAQO;QAJN,4JAAkB,kBAAc,IAAC,sGACjB,kDAA8C,IAAI,CAAC,IADlC,sGAEd,gBAAY,IAFE;QAIjC,4DAAM;QAEP,yEAQO;QAJN,4JAAkB,kBAAc,IAAC,sGACjB,kDAA8C,IAAI,CAAC,IADlC,sGAEd,gBAAY,IAFE;QAIjC,4DAAM;QAEP,yEASO;QAJN,4JAAkB,kBAAc,IAAC,sGACjB,kDAA8C,GAAG,CAAC,IADjC,sGAEd,gBAAY,IAFE;QAIjC,4DAAM;QAEP,yEAQO;QAJN,4JAAkB,kBAAc,IAAC,sGACjB,kDAA8C,IAAI,CAAC,IADlC,sGAEd,gBAAY,IAFE;QAIjC,4DAAM;QAEP,yEAQO;QAJN,4JAAkB,kBAAc,IAAC,sGACjB,kDAA8C,IAAI,CAAC,IADlC,sGAEd,gBAAY,IAFE;QAIjC,4DAAM;QAEP,yEASO;QAJN,4JAAkB,kBAAc,IAAC,sGACjB,kDAA8C,GAAG,CAAC,IADjC,sGAEd,gBAAY,IAFE;QAIjC,4DAAM;QAGJ,wFAAoL;QACxL,4DAAM;;QAxFL,iNAAwI;QAUvI,0DAAsC;QAAtC,mGAAsC;QAWtC,0DAAuC;QAAvC,oGAAuC;QAUvC,0DAA2C;QAA3C,wGAA2C;QAU3C,0DAA2C;QAA3C,wGAA2C;QAW3C,0DAAuC;QAAvC,oGAAuC;QAUvC,0DAA2C;QAA3C,wGAA2C;QAU3C,0DAA2C;QAA3C,wGAA2C;QAW3C,0DAAsC;QAAtC,mGAAsC;QAIU,0DAA6G;QAA7G,wKAA6G;;6FD3ElJ,qBAAqB;cALjC,uDAAS;eAAC;gBACV,QAAQ,EAAE,mBAAmB;gBAC7B,WAAW,EAAE,gCAAgC;gBAC7C,SAAS,EAAE,CAAC,gCAAgC,CAAC;aAC7C;;;;;;;;;;;;;;AEdD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwD;AACT;AACN;AACsC;AAC+B;AAC5C;;AAO3D,MAAM,kBAAkB;;iGAAlB,kBAAkB;8JAAlB,kBAAkB,kBAHrB,CAAC,4DAAY,EAAE,4FAAuB,EAAE,qEAAc,EAAE,2HAAsB,CAAC;mIAG5E,kBAAkB,mBAJf,8EAAqB,aAC1B,4DAAY,EAAE,4FAAuB,EAAE,qEAAc,EAAE,2HAAsB,aAC7E,8EAAqB;6FAEnB,kBAAkB;cAL9B,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,8EAAqB,CAAC;gBACrC,OAAO,EAAE,CAAC,4DAAY,EAAE,4FAAuB,EAAE,qEAAc,EAAE,2HAAsB,CAAC;gBACxF,OAAO,EAAE,CAAC,8EAAqB,CAAC;aAChC;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgE;AAEa;AACa;AAEF;AACzB;AACQ;;;;;;AAOhE,MAAM,yBAAyB;IAQrC,YACQ,WAAwB,EACvB,cAAqC,EACrC,eAAuC,EACvC,SAA2B;QAH5B,gBAAW,GAAX,WAAW,CAAa;QACvB,mBAAc,GAAd,cAAc,CAAuB;QACrC,oBAAe,GAAf,eAAe,CAAwB;QACvC,cAAS,GAAT,SAAS,CAAkB;QAEnC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE/C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,yDAAM,CAAC,WAAW,CAAC;QAC3C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,GAAG,yDAAM,CAAC,cAAc,CAAC;QACnD,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,yDAAM,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QACzC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,yDAAM,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QACzC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,yDAAM,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;QAC1C,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,yDAAM,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QACvC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACxB,CAAC;IAED,QAAQ;QACN,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAiB,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACrG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAiB,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IACnG,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE;YAChD,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,CAAC,CAAC;SAClC;QACD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,yDAAM,CAAC,wBAAwB,CAAC,CAAC;QAC7D,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,mBAAmB,CAAgB,CAAC;QAC5E,IAAI,CAAC,QAAQ,GAAG;YACf,CAAC,EAAE,UAAU,CAAE,OAAO,CAAC,aAA6B,CAAC,KAAK,CAAC,IAAI,CAAC;YAChE,CAAC,EAAE,UAAU,CAAE,OAAO,CAAC,aAA6B,CAAC,KAAK,CAAC,GAAG,CAAC;SAC/D,CAAC;QACF,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACxF,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;IACtE,CAAC;IAED,SAAS,CAAC,KAAiB;QAC1B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,GAAG,KAAK,CAAC;QAC/C,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,CAAC;IACjC,CAAC;IAGD,aAAa,CAAC,KAAoB;QACjC,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;YAC/B,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SACjC;aAAM,IAAI,KAAK,CAAC,OAAO,EAAE;YACzB,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SAC/B;aAAM,IAAI,KAAK,CAAC,GAAG,KAAK,0DAAO,CAAC,KAAK,EAAE;YACvC,IAAI,CAAC,eAAe,CAAC,cAAc,GAAG,IAAI,CAAC;SAC3C;aAAM,IAAI,KAAK,CAAC,GAAG,KAAK,0DAAO,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,EAAE;YACrF,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;SACvE;aAAM,IAAI,KAAK,CAAC,GAAG,KAAK,0DAAO,CAAC,MAAM,EAAE;YACxC,IAAI,CAAC,gBAAgB,EAAE,CAAC;SACxB;IACF,CAAC;IAEO,gBAAgB,CAAC,GAAW;QACnC,IAAI,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE;YAChD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,yDAAM,CAAC,wBAAwB,CAAC,CAAC;YAC7D,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,CAAC,CAAC;SAClC;QACD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAE3B,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,KAAK,gBAAgB,EAAE;YACpE,UAAU,CACT,GAAG,EAAE;gBACJ,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,mBAAmB,CAAgB,CAAC;gBAC5E,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;gBACvF,IAAI,CAAC,WAAW,CAAC,WAAqC,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBACjG,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,GAAG,KAAK,CAAC;gBAClD,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,IAAI,CAAC;YACtC,CAAC,EACD,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,yDAAM,CAAC,UAAU,CAAC,CAAC,CAAC,yDAAM,CAAC,WAAW,CACvD,CAAC;SACF;IACF,CAAC;IAEO,cAAc,CAAC,GAAW;QACjC,IAAI,GAAG,KAAK,GAAG,EAAE;YAChB,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,2DAAQ,CAAC,iBAAiB,CAAC,CAAC;YACxD,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;SAChG;aAAM,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,IAAI,GAAG,KAAK,GAAG,EAAE;YACpE,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,GAAG,EAAE,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;YAEjE,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,EAAE;gBAC7C,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;oBACvB,IAAI,CAAC,cAAc,EAAE,CAAC;iBACtB;YACF,CAAC,CAAC,CAAC;YAEH,IAAI,GAAG,KAAK,GAAG,EAAE;gBAChB,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,CAAC,CAAC;gBAClC,IAAI,CAAC,eAAe,CAAC,aAAa,GAAG,KAAK,CAAC;gBAC3C,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,yDAAM,CAAC,wBAAwB,CAAC,CAAC;gBAC7D,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;aAC3E;SACD;IACF,CAAC;IAEO,gBAAgB;QACvB,IAAI,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE;YAC/C,IAAI,CAAC,WAAW,CAAC,WAAgC,CAAC,sBAAsB,EAAE,CAAC;SAC5E;aAAM,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,KAAK,yDAAM,CAAC,wBAAwB,EAAE;YACzF,IAAI,CAAC,WAAW,CAAC,WAAqC,CAAC,QAAQ,CAAC,sBAAsB,EAAE,CAAC;SAC1F;aAAM,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,KAAK,yDAAM,CAAC,yBAAyB,EAAE;YAC1F,IAAI,CAAC,WAAW,CAAC,WAAsC,CAAC,QAAQ,CAAC,sBAAsB,EAAE,CAAC;SAC3F;IACF,CAAC;IAGD,WAAW,CAAC,KAAoB;QAC/B,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;YAC/B,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,KAAK,gBAAgB,EAAE;gBACpE,UAAU,CACT,GAAG,EAAE;oBACJ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;oBACjC,IAAI,CAAC,WAAW,CAAC,WAAqC,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjG,IAAI,OAAO,GAAG,CAAC,CAAC;oBAChB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAc,EAAE,GAAW,EAAE,EAAE;wBACnD,IACC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,yDAAM,CAAC,sBAAsB,CAAC,KAAK,yDAAM,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,yDAAM,CAAC,sBAAsB,CAAC;4BAChH,CAAC,KAAK,EACL;4BACD,OAAO,EAAE,CAAC;yBACV;oBACF,CAAC,CAAC,CAAC;oBACH,IAAI,CAAC,SAAS,GAAG,OAAO,KAAK,yDAAM,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;oBAChE,IAAI,IAAI,CAAC,SAAS,EAAE;wBACnB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC;wBACjD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;wBACxE,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,GAAG,KAAK,CAAC;qBAC/C;gBACF,CAAC,EACD,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,yDAAM,CAAC,UAAU,CAAC,CAAC,CAAC,yDAAM,CAAC,WAAW,CACvD,CAAC;aACF;SACD;aAAM,IAAI,KAAK,CAAC,GAAG,KAAK,0DAAO,CAAC,KAAK,EAAE;YACvC,IAAI,CAAC,eAAe,CAAC,cAAc,GAAG,KAAK,CAAC;SAC5C;IACF,CAAC;IAEO,UAAU,CAAC,KAAa;QAC/B,OAAO,KAAK,KAAK,yDAAM,CAAC,SAAS,IAAI,KAAK,KAAK,yDAAM,CAAC,SAAS,IAAI,KAAK,KAAK,yDAAM,CAAC,UAAU,IAAI,KAAK,KAAK,yDAAM,CAAC,OAAO,CAAC;IAC5H,CAAC;IAEO,cAAc;QACrB,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,mBAAmB,CAAgB,CAAC;QAC5E,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACxF,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;IACrC,CAAC;;kGAlKW,yBAAyB;yGAAzB,yBAAyB;2JAAzB,yBAAqB,+JAArB,uBAAmB;;6FAAnB,yBAAyB;cALrC,uDAAS;eAAC;gBACV,QAAQ,EAAE,uBAAuB;gBACjC,WAAW,EAAE,oCAAoC;gBACjD,SAAS,EAAE,CAAC,oCAAoC,CAAC;aACjD;scAuDA,aAAa;kBADZ,0DAAY;mBAAC,cAAc,EAAE,CAAC,QAAQ,CAAC;YAsExC,WAAW;kBADV,0DAAY;mBAAC,YAAY,EAAE,CAAC,QAAQ,CAAC;;;;;;;;;;;;;;ACxIvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwD;AACT;AACN;AACsC;AACL;;AAOnE,MAAM,sBAAsB;;qGAAtB,sBAAsB;sKAAtB,sBAAsB,kBAHzB,CAAC,4DAAY,EAAE,4FAAuB,EAAE,qEAAc,CAAC;mIAGpD,sBAAsB,mBAJnB,sFAAyB,aAC9B,4DAAY,EAAE,4FAAuB,EAAE,qEAAc,aACrD,sFAAyB;6FAEvB,sBAAsB;cALlC,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,sFAAyB,CAAC;gBACzC,OAAO,EAAE,CAAC,4DAAY,EAAE,4FAAuB,EAAE,qEAAc,CAAC;gBAChE,OAAO,EAAE,CAAC,sFAAyB,CAAC;aACpC;;;;;;;;;;;;;;ACVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgF;AAC3B;AACkB;AACiB;AAIzB;AACV;AACiC;AACf;AACS;;;;;;;;;;;;AAOzE,MAAM,gBAAgB;IAC5B,YACQ,WAAwB,EACxB,MAAiB,EACjB,cAA8B,EAC9B,KAA0B;QAH1B,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAW;QACjB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,UAAK,GAAL,KAAK,CAAqB;IAC/B,CAAC;IAKJ,eAAe;QACd,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,WAAW,CAAC;IAC/E,CAAC;IAED,SAAS;QACR,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;QAC9B,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,mGAAkB,EAAE,EAAE,UAAU,EAAE,4BAA4B,EAAE,CAAC,CAAC;QACrG,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAe,EAAE,EAAE;YACrD,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC;YAC7B,IAAI,MAAM,EAAE;gBACX,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE;oBACnC,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,6FAAgB,EAAE,EAAE,UAAU,EAAE,0BAA0B,EAAE,CAAC,CAAC;oBAC3F,GAAG,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,QAAiB,EAAE,EAAE;wBACjD,IAAI,QAAQ;4BAAE,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;oBAChD,CAAC,CAAC,CAAC;iBACH;qBAAM;oBACN,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;iBACjC;aACD;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,oBAAoB,CAAC,QAAgB;QACpC,IAAI,QAAQ,KAAK,GAAG,EAAE;YACrB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;SAChC;IACF,CAAC;IAED,UAAU;QACT,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC5B,CAAC;IAED,UAAU;QACT,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;QAC9B,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,oFAAa,EAAE,EAAE,UAAU,EAAE,yBAAyB,EAAE,CAAC,CAAC;QAC7F,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,CAAC;IACvE,CAAC;IACD,UAAU;QACT,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE;YACnC,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;YAC9B,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,6FAAgB,EAAE,EAAE,UAAU,EAAE,0BAA0B,EAAE,CAAC,CAAC;YACjG,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAe,EAAE,EAAE;gBACrD,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC;gBAC7B,IAAI,MAAM;oBAAE,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;YACvC,CAAC,CAAC,CAAC;SACH;IACF,CAAC;IAED,IAAI;QACH,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;IAC5B,CAAC;IACD,IAAI;QACH,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;IAC5B,CAAC;IAED,WAAW,CAAC,KAAa;QACxB,MAAM,OAAO,GAAG,EAAE,GAAG,EAAE,0DAAO,CAAC,MAAM,EAAmB,CAAC;QACzD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACnC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,aAAa,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAC3D,CAAC;IAED,WAAW,CAAC,KAAa;QACxB,MAAM,OAAO,GAAG,EAAE,GAAG,EAAE,KAAK,EAAmB,CAAC;QAChD,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YAC3F,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;SAC9D;QACD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACnC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,aAAa,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAC3D,CAAC;IAED,eAAe,CAAC,GAAW;QAC1B,MAAM,SAAS,GAAG,YAAY,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvE,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,aAAa,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;IACjE,CAAC;IAED,iBAAiB;QAChB,IAAI,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE;YAChD,OAAQ,IAAI,CAAC,WAAW,CAAC,WAAgC,CAAC,iBAAiB,CAAC;SAC5E;aAAM,IAAI,yDAAM,CAAC,wBAAwB,KAAK,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE;YAC1F,OAAQ,IAAI,CAAC,WAAW,CAAC,WAAqC,CAAC,QAAQ,CAAC,iBAAiB,CAAC;SAC1F;aAAM,IAAI,yDAAM,CAAC,yBAAyB,KAAK,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE;YAC3F,OAAQ,IAAI,CAAC,WAAW,CAAC,WAAsC,CAAC,QAAQ,CAAC,iBAAiB,CAAC;SAC3F;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IAED,iBAAiB;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,QAAQ,CAAC;IACnD,CAAC;IAED,SAAS;QACR,OAAO,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;IAC3C,CAAC;IAED,WAAW,CAAC,KAAa;QACxB,IAAI,KAAK,KAAK,GAAG,EAAE;YAClB,OAAO,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;SACzC;QACD,OAAO,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC;IAC7D,CAAC;;gFA9GW,gBAAgB;gGAAhB,gBAAgB;;;;;;;QClB7B,4EACI;QAAA,yEACI;QAAA,+EACL;QAAA,kEAA2B;QAC5B,4DAAS;QACH,iFACI;QAAA,+EACR;QAD2B,wIAAS,gBAAY,IAAC;QACjD,mEAA2B;QAC5B,4DAAS;QACA,iFACR;QAD2B,yIAAS,gBAAY,IAAC;QACjD,oEAA2B;QAC5B,4DAAS;QACA,iFACR;QAD2B,yIAAS,eAAW,IAAC;QAChD,oEAAkC;QACnC,4DAAS;QACA,iFACR;QAD2B,yIAAS,gBAAY,IAAC;QACjD,oEAAkC;QACnC,4DAAS;QACJ,4DAAW;QAEX,+FACI;QADkE,kKAAU,6BAAyB,IAAC;QACtG,2EACI;QAAA,6FACI;QAAA,oEAAiC;QACrC,4DAAoB;QACpB,6FAA6O;QAAA,oEACxP;QAAA,4DAAoB;QACtB,4DAAM;QACN,2EACC;QAAA,4FAUE;QAAA,oEACD;QAAA,4DAAoB;QACrB,sFACC;QAAA,mGACC;QADyF,kKAAU,6BAAyB,IAAC;QAC7H,6FAUE;QAAA,oEAA6B;QACrB,4DAAoB;QACpB,6FAAiP;QAAA,oEAC1P;QAAA,4DAAoB;QACrB,6FASE;QAAA,oEACD;QAAA,4DAAoB;QACtB,4DAA0B;QAC3B,4DAAW;QAEX,6FAWE;QAAA,oEACD;QAAA,4DAAoB;QACtB,4DAAM;QACN,2EACC;QAAA,6FAUE;QAAA,oEACD;QAAA,4DAAoB;QACrB,6FAUE;QAAA,oEACD;QAAA,4DAAoB;QACtB,4DAAM;QACN,2EACC;QAAA,6FAWE;QAAA,oEACD;QAAA,4DAAoB;QACrB,6FAUE;QAAA,oEACD;QAAA,4DAAoB;QACtB,4DAAM;QACN,2EACC;QAAA,6FAUE;QAAA,oEACD;QAAA,4DAAoB;QAErB,4FASE;QAAA,oEACD;QAAA,4DAAoB;QAErB,sFACC;QAAA,mGAMC;QAFA,kKAAU,6BAAyB,IAAC;QAEpC,6FASE;QAAA,oEAAoC;QAC5B,4DAAoB;QACpB,6FAAgP;QAAA,oEACzP;QAAA,4DAAoB;QACrB,6FASE;QAAA,sEAAgD;QAAA,4DACjD;QACD,6FAUE;QAND,mSAAS,2BAAmC,IAAC;QAM5C,oEACD;QAAA,4DAAoB;QACtB,4DAA0B;QAC3B,4DAAW;QACZ,4DAAM;QACN,gGACC;QAD+C,mKAAU,6BAAyB,IAAC;QACnF,8FAUE;QALD,qJAAS,oBAAgB,GAAG,CAAC,IAAC;QAK7B,qEACD;QAAA,4DAAoB;QACrB,8FAUE;QALD,qJAAS,oBAAgB,GAAG,CAAC,IAAC;QAK7B,qEACD;QAAA,4DAAoB;QACtB,4DAA0B;QAC1B,4EACC;QAAA,8FAUE;QALD,qJAAS,oBAAgB,GAAG,CAAC,IAAC;QAK7B,qEACD;QAAA,4DAAoB;QACrB,8FAWE;QAND,6JAAU,6BAAyB,IAAC,6FAC3B,oBAAgB,QAAQ,CAAC,IADE;QAMnC,qEACD;QAAA,4DAAoB;QACtB,4DAAM;QACN,wEACC;QAAA,+EAKC;QAFA,0IAAS,yBAA0B,IAAC;QAEpC,4EACC;QAAA,qEAA2B;QACrB,4DAAM;QACN,4DAAS;QACT,+EACP;QADqJ,0IAAS,yBAA0B,IAAC;QACzL,4EACC;QAAA,qEAA2B;QAC5B,4DAAM;QACP,4DAAS;QACT,4DAAM;QAEL,gGACI;QAAA,8FAM0I;QADhJ,qSAAS,wCAAoC,GAAG,oCAAgC,GAAG,sCAAkC,IAAC;QAC0B,qEAC/I;QAAA,4DAAoB;QACrB,8FAYE;QAND,qJAAS,8CAA0C,IAAC;QAMnD,qEACD;QAAA,4DAAoB;QACrB,4DAA0B;QAC3B,4DAA0B;QAC3B,4DAAM;QAEN,wFAA0G;QAC3G,4DAAM;;;;;;;;;;;;;;;;;;;;;;;;QAlT4B,0DAA6B;QAA7B,kFAA6B;QAoBW,2DAAqC;QAArC,+FAAqC;QAG5E,0DAAwB;QAAxB,qFAAwB;QAKtD,0DAAwB;QAAxB,qFAAwB;QAiBtB,0DAAwC;QAAxC,gGAAwC;QAQ4B,0DAAsC;QAAtC,gGAAsC;QAK1G,0DAAuC;QAAvC,gGAAuC;QAezC,0DAAmC;QAAnC,gGAAmC;QAYnC,0DAAwB;QAAxB,qFAAwB;QAYzB,0DAAwB;QAAxB,qFAAwB;QAiBvB,0DAAqC;QAArC,gGAAqC;QAUrC,0DAAwB;QAAxB,qFAAwB;QAcxB,0DAAwB;QAAxB,qFAAwB;QAaxB,0DAAwB;QAAxB,qFAAwB;QAqBtB,0DAAiD;QAAjD,gGAAiD;QAQO,0DAA+C;QAA/C,gGAA+C;QAKvG,0DAA6C;QAA7C,gGAA6C;QAW7C,0DAA+C;QAA/C,gGAA+C;QAcjD,0DAAiC;QAAjC,8FAAiC;QAYlB,0DAAyD;QAAzD,0HAAyD;QAcxE,0DAAiC;QAAjC,8FAAiC;QAYjC,0DAAiC;QAAjC,8FAAiC;QAgBjC,0DAAyH;QAAzH,yLAAyH;QAO9F,0DAAyH;QAAzH,yLAAyH;QAStJ,0DAAwB;QAAxB,qFAAwB;QAQvB,0DAAwB;QAAxB,qFAAwB;QAiBL,0DAAsC;QAAtC,mGAAsC;;6FDjShD,gBAAgB;cAL5B,uDAAS;eAAC;gBACV,QAAQ,EAAE,aAAa;gBACvB,WAAW,EAAE,0BAA0B;gBACvC,SAAS,EAAE,CAAC,0BAA0B,CAAC;aACvC;2ZAUA,cAAc;kBADb,uDAAS;mBAAC,gBAAgB;;;;;;;;;;;;;;AE1B5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACI;AACc;AACa;AACjB;AACI;AACE;AACkB;AACqB;AACpB;AACf;AACS;AACnB;;AAoBhD,MAAM,aAAa;;4FAAb,aAAa;oJAAb,aAAa,kBAhBhB;YACR,0DAAW;YACX,4DAAY;YACZ,4FAAuB;YACvB,wEAAe;YACf,qFAAqB;YACrB,oEAAa;YACb,wEAAe;YACf,0EAAgB;YAChB,8FAAe;YACf,wFAAa;YACb,iHAAqB;YACrB,+EAAU;SACV;mIAGW,aAAa,mBAjBV,oEAAgB,aAE9B,0DAAW;QACX,4DAAY;QACZ,4FAAuB;QACvB,wEAAe;QACf,qFAAqB;QACrB,oEAAa;QACb,wEAAe;QACf,0EAAgB;QAChB,8FAAe;QACf,wFAAa;QACb,iHAAqB;QACrB,+EAAU,aAED,oEAAgB;6FAEd,aAAa;cAlBzB,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,oEAAgB,CAAC;gBAChC,OAAO,EAAE;oBACR,0DAAW;oBACX,4DAAY;oBACZ,4FAAuB;oBACvB,wEAAe;oBACf,qFAAqB;oBACrB,oEAAa;oBACb,wEAAe;oBACf,0EAAgB;oBAChB,8FAAe;oBACf,wFAAa;oBACb,iHAAqB;oBACrB,+EAAU;iBACV;gBACD,OAAO,EAAE,CAAC,oEAAgB,CAAC;aAC3B;;;;;;;;;;;;;;AChCD;AAAA;AAAA;AAAA;AAAA;AAA0C;;;;AAMnC,MAAM,gBAAgB;;gFAAhB,gBAAgB;gGAAhB,gBAAgB;QCN7B,wEAAmC;QAAA,oEAAS;QAAA,4DAAK;QACjD,qFAAqB;QAAA,oHAAmD;QAAA,4DAAqB;QAC7F,wFACC;QAAA,4EAAoD;QAAA,oEAAS;QAAA,4DAAS;QACtE,4EAA2D;QAAA,iEAAM;QAAA,4DAAS;QAC3E,4DAAqB;;QAFM,0DAAyB;QAAzB,kFAAyB;;6FDGvC,gBAAgB;cAL5B,uDAAS;eAAC;gBACV,QAAQ,EAAE,aAAa;gBACvB,WAAW,EAAE,0BAA0B;gBACvC,SAAS,EAAE,CAAC,0BAA0B,CAAC;aACvC;;;;;;;;;;;;;;AELD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACkB;AACA;AACoB;AACxB;;AAOhD,MAAM,aAAa;;4FAAb,aAAa;oJAAb,aAAa,kBAHhB,CAAC,4DAAY,EAAE,wEAAe,EAAE,4FAAuB,EAAE,wEAAe,CAAC;mIAGtE,aAAa,mBAJV,mEAAgB,aACrB,4DAAY,EAAE,wEAAe,EAAE,4FAAuB,EAAE,wEAAe,aACvE,mEAAgB;6FAEd,aAAa;cALzB,sDAAQ;eAAC;gBACT,YAAY,EAAE,CAAC,mEAAgB,CAAC;gBAChC,OAAO,EAAE,CAAC,4DAAY,EAAE,wEAAe,EAAE,4FAAuB,EAAE,wEAAe,CAAC;gBAClF,OAAO,EAAE,CAAC,mEAAgB,CAAC;aAC3B;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AAG4B;AAElB;AACO;;;AAKrD,MAAM,gBAAgB;IAS5B,YAAoB,cAA8B;QAA9B,mBAAc,GAAd,cAAc,CAAgB;QAH1C,6BAAwB,GAAoB,IAAI,oDAAe,CAAS,EAAE,CAAC,CAAC;QACpF,oBAAe,GAAuB,IAAI,CAAC,wBAAwB,CAAC,YAAY,EAAE,CAAC;QAGlF,IAAI,CAAC,IAAI,GAAG,EAAE,SAAS,EAAE,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC;QACtF,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,yDAAM,CAAC,cAAc,CAAC;IACvC,CAAC;IAED,aAAa,CAAC,GAAW,EAAE,SAAiB;QAC3C,QAAQ,GAAG,EAAE;YACZ,KAAK,yDAAM,CAAC,aAAa;gBACxB,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,MAAM;YACP,KAAK,yDAAM,CAAC,YAAY;gBACvB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;gBAC7B,MAAM;YACP,KAAK,yDAAM,CAAC,cAAc;gBACzB,IAAI,CAAC,cAAc,EAAE,CAAC;gBACtB,MAAM;YACP,KAAK,0DAAO,CAAC,MAAM;gBAClB,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBAChC,MAAM;SACP;IACF,CAAC;IAEO,aAAa;QACpB,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE;YACpC,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;YAC9C,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACjD,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAElD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAC1B;IACF,CAAC;IAEO,YAAY,CAAC,SAAiB;QACrC,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE;YACpC,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,MAAM,QAAQ,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YAC1D,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;YAC9D,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YACjE,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,QAAQ,EAAE,SAAS,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACnI,IAAI,CAAC,QAAQ,CAAC,sBAAsB,EAAE,CAAC;YACvC,MAAM,eAAe,qBAAc,QAAQ,CAAE,CAAC;YAC9C,MAAM,WAAW,iBAAc,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAE,CAAC;YAC7E,MAAM,eAAe,GAAqB,IAAI,CAAC,QAAQ,CAAC;YACxD,MAAM,SAAS,GAAc,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;YACjD,MAAM,IAAI,GAAqB,GAAG,EAAE;gBACnC,eAAe,CAAC,eAAe,CAAC,eAAe,EAAE,SAAS,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;gBAClG,IAAI,CAAC,QAAQ,CAAC,sBAAsB,EAAE,CAAC;YACxC,CAAC,CAAC;YACF,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;SACpC;IACF,CAAC;IAEO,cAAc;QACrB,IAAI,IAAI,CAAC,QAAQ,EAAE;YAClB,MAAM,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC5E,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC7E,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;YACvC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YACxC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC/E,MAAM,eAAe,qBAAc,QAAQ,CAAE,CAAC;YAC9C,MAAM,WAAW,qBAAc,IAAI,CAAC,QAAQ,CAAE,CAAC;YAC/C,MAAM,eAAe,GAAqB,IAAI,CAAC,QAAQ,CAAC;YACxD,MAAM,SAAS,GAAc,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;YACjD,MAAM,IAAI,GAAqB,GAAG,EAAE;gBACnC,eAAe,CAAC,eAAe,CAAC,eAAe,EAAE,CAAC,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;gBAC5E,IAAI,CAAC,QAAQ,CAAC,sBAAsB,EAAE,CAAC;YACxC,CAAC,CAAC;YACF,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACpC,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;YAC9C,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YACpC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,QAAQ,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC;SACvC;IACF,CAAC;IAEO,eAAe,CAAC,SAAiB;QACxC,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;QAC3B,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAC7B,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;IACjD,CAAC;IAEO,kBAAkB;QACzB,IAAI,CAAC,wBAAwB,CAAC,IAAI,EAAE,CAAC;IACtC,CAAC;;gFAnGW,gBAAgB;mGAAhB,gBAAgB,WAAhB,gBAAgB,mBAFhB,MAAM;6FAEN,gBAAgB;cAH5B,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;;;;;;ACV0C;;AAC3C,6DAA6D;AAKtD,MAAM,qBAAqB;IAIjC;QAHQ,gBAAW,GAAuB,EAAwB,CAAC;QAC3D,iBAAY,GAAuB,EAAwB,CAAC;QAGnE,IAAI,CAAC,WAAW,GAAG,EAAwB,CAAC;QAC5C,IAAI,CAAC,YAAY,GAAG,EAAwB,CAAC;IAC9C,CAAC;IAEK,IAAI;;YACT,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE;gBACxB,OAAO;aACP;YACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAsB,CAAC,CAAC;YACnE,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;QACrB,CAAC;KAAA;IAEK,IAAI;;YACT,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE;gBACxB,OAAO;aACP;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,EAAsB,CAAC,CAAC;YACnE,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;QACrB,CAAC;KAAA;IAED,KAAK;QACJ,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;IACxB,CAAC;IAED,WAAW;QACV,OAAO,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACxC,CAAC;IACD,WAAW;QACV,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACvC,CAAC;IAEa,MAAM;;YACnB,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,WAAW,EAAE;gBACtC,MAAM,MAAM,EAAE,CAAC;aACf;QACF,CAAC;KAAA;IACD,aAAa,CAAC,MAAwB;QACrC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC/B,CAAC;IAED,SAAS,CAAC,MAAwB;QACjC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;IACxB,CAAC;;0FAlDW,qBAAqB;wGAArB,qBAAqB,WAArB,qBAAqB,mBAFrB,MAAM;6FAEN,qBAAqB;cAHjC,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACLD;AAAA;AAAA;AAAA;AAAA;AAA2C;AAG4C;AAC3C;;;AAKrC,MAAM,cAAc;IA0B1B,YAAY,mBAA0C;QAvBtD,iBAAY,GAAW,WAAW,CAAC;QACnC,mBAAc,GAAW,WAAW,CAAC;QACrC,iBAAY,GAAa,IAAI,KAAK,CAAC,yDAAM,CAAC,mBAAmB,CAAC,CAAC;QAE/D,kBAAa,GAAS,EAAE,CAAC,EAAE,yDAAM,CAAC,aAAa,EAAE,CAAC,EAAE,yDAAM,CAAC,cAAc,EAAE,CAAC;QAC5E,eAAU,GAAS,EAAE,CAAC,EAAE,yDAAM,CAAC,aAAa,EAAE,CAAC,EAAE,yDAAM,CAAC,cAAc,EAAE,CAAC;QACzE,gBAAW,GAAW,EAAE,CAAC;QAczB,qCAAqC;QACrC,eAAU,GAAqB,GAAG,EAAE,GAAE,CAAC,CAAC;QAGvC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;QACzC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;QAC3C,IAAI,CAAC,cAAc,GAAG,mBAAmB,CAAC;QAC1C,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC,CAAE,YAAY,CAAC,OAAO,CAAC,MAAM,CAAY,CAAC,CAAC,CAAC,EAAE,CAAC;IAC1G,CAAC;IAED,WAAW,CAAC,OAAiC;QAC5C,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAC9D,IAAI,OAAO,KAAK,IAAI,CAAC,OAAO,EAAE;YAC7B,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC;YAC5B,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;SAC7D;IACF,CAAC;IAED,SAAS,CAAC,MAAwB;QACjC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QACtC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC;IAC/D,CAAC;IAED,WAAW;QACV,OAAO,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;IAC1C,CAAC;IAED,WAAW;QACV,OAAO,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;IAC1C,CAAC;IAED,IAAI;QACH,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;YACvB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC/B,IAAI,IAAI,CAAC,WAAW,KAAK,EAAE,EAAE;gBAC5B,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;gBAC1B,KAAK,CAAC,MAAM,GAAG,GAAG,EAAE;oBACnB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBACrC,CAAC,CAAC;gBACF,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC;aAC7B;SACD;QACD,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YACpC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,IAAI;QACH,IAAI,IAAI,CAAC,WAAW,KAAK,EAAE,EAAE;YAC5B,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;YAC1B,KAAK,CAAC,MAAM,GAAG,GAAG,EAAE;gBACnB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACrC,CAAC,CAAC;YACF,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC;SAC7B;QACD,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YACpC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,WAAW,CAAC,KAAa,EAAE,kBAA2B,EAAE,QAAiB;QACxE,MAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,OAAe,EAAE,EAAE;YAC7D,OAAO,OAAO,IAAI,SAAS,CAAC;QAC7B,CAAC,CAAC,CAAC,MAAM,CAAC;QAEV,IAAI,UAAU,GAAW,yDAAM,CAAC,eAAe,CAAC;QAChD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,IAAI,UAAU,KAAK,yDAAM,CAAC,eAAe,EAAE,CAAC,EAAE,EAAE;YAC3E,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;gBAAE,UAAU,GAAG,CAAC,CAAC;SACpE;QAED,IAAI,CAAC,QAAQ,IAAI,UAAU,KAAK,yDAAM,CAAC,eAAe;YAAE,OAAO;QAE/D,IAAI,kBAAkB,EAAE;YACvB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;SAC1B;aAAM;YACN,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;SAC5B;QAED,IAAI,UAAU,KAAK,yDAAM,CAAC,eAAe,EAAE;YAC1C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,UAAU,GAAG,CAAC,EAAE,yDAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACvI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACjC;aAAM;YACN,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACjC;IACF,CAAC;IAED,aAAa,CAAC,UAAkB,EAAE,WAAmB;QACpD,OAAO,UAAU,CAAC,SAAS,CAAC,CAAC,EAAE,yDAAM,CAAC,eAAe,CAAC,KAAK,WAAW,CAAC,SAAS,CAAC,CAAC,EAAE,yDAAM,CAAC,eAAe,CAAC,CAAC;IAC7G,CAAC;IAED,4FAA4F;IAC5F,QAAQ,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,CAAU;QACnD,IAAI,IAAI,GAAW,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAClC,IAAI,IAAI,GAAW,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAClC,IAAI,IAAI,GAAW,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAClC,IAAI,IAAI,CAAC;QACT,IAAI,CAAC,KAAK,SAAS;YAAE,IAAI,GAAG,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC;QAElD,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC;YAAE,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC;QACzC,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC;YAAE,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC;QACzC,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC;YAAE,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC;QACzC,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC;YAAE,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC;QAEjD,IAAI,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAC/E,IAAI,CAAC,KAAK,SAAS,IAAI,IAAI;YAAE,KAAK,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;QACzD,OAAO,KAAK,CAAC;IACd,CAAC;IAED,WAAW,CAAC,WAAiB;QAC5B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAClC,QAAQ,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE;YAC9B,KAAK,QAAQ,CAAC;YACd,KAAK,aAAa,CAAC;YACnB,KAAK,OAAO;gBACX,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;gBAC7C,MAAM;YACP;gBACC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,WAAW,CAAC;gBAClD,MAAM;SACP;IACF,CAAC;IAED,OAAO;QACN,MAAM,WAAW,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACvH,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;IAClD,CAAC;IAED,aAAa;QACZ,MAAM,WAAW,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAChH,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,KAAK,yDAAM,CAAC,aAAa,CAAC,CAAC;IACrE,CAAC;IAED,GAAG;QACF,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACnE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;QAC5B,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,UAAU,EAAE,CAAC;IACnB,CAAC;IAED,iBAAiB,CAAC,SAAe;QAChC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,yDAAM,CAAC,YAAY,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,CAAC;QACpF,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,yDAAM,CAAC,YAAY,EAAE,CAAC;QACnF,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,CAAC;QAC1D,IAAI,SAAS,CAAC,CAAC,IAAI,yDAAM,CAAC,QAAQ,EAAE;YACnC,SAAS,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,CAAC;YAC9B,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,GAAG,CAAC,GAAG,yDAAM,CAAC,YAAY,CAAC;YACnE,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,CAAC;YACxC,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,CAAC;SACzC;QACD,IAAI,SAAS,CAAC,CAAC,IAAI,yDAAM,CAAC,QAAQ,EAAE;YACnC,SAAS,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,CAAC;YAC9B,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,CAAC;YACzC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,GAAG,CAAC,GAAG,yDAAM,CAAC,YAAY,CAAC;YAClE,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,CAAC;SACzC;IACF,CAAC;IAED,mBAAmB;QAClB,OAAO,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;IAC/E,CAAC;IAED,cAAc,CAAC,SAAe;QAC7B,MAAM,QAAQ,GAAG,CAAC,yDAAM,CAAC,YAAY,GAAG,yDAAM,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QAChE,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,yDAAM,CAAC,WAAW,EAAE,CAAC;QACzF,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,yDAAM,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC;QACjF,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC;QACvE,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;QACtD,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,yDAAM,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,QAAQ,EAAE,CAAC;QAClG,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,QAAQ,EAAE,CAAC;QAChF,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,QAAQ,EAAE,CAAC;QACvE,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,yDAAM,CAAC,WAAW,EAAE,CAAC;IACjF,CAAC;IAED,UAAU;QACT,IAAI,IAAI,CAAC,WAAW,KAAK,EAAE,EAAE;YAC5B,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;YAE1B,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACnE,KAAK,CAAC,MAAM,GAAG,GAAG,EAAE;gBACnB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;gBAC3F,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;gBAC9F,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBACpC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACxC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACzB,CAAC,CAAC;YACF,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC;SAC7B;aAAM;YACN,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,yDAAM,CAAC,kBAAkB,EAAE;gBACrD,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,CAAC;aACpC;iBAAM;gBACN,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC;aAC7C;YACD,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,yDAAM,CAAC,kBAAkB,EAAE;gBACrD,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,yDAAM,CAAC,QAAQ,CAAC;aACpC;iBAAM;gBACN,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC;aAC7C;YACD,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAC7E,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAC/E,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACxC,IAAI,CAAC,gBAAgB,EAAE,CAAC;SACxB;QACD,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAClE,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;IAChD,CAAC;IAED,gBAAgB;QACf,MAAM,OAAO,qBAAQ,IAAI,CAAC,UAAU,CAAE,CAAC;QACvC,MAAM,UAAU,GAAqB,GAAG,EAAE;YACzC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;YACzF,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;YAC3F,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACzC,CAAC,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IAC3C,CAAC;;4EAhPW,cAAc;iGAAd,cAAc,WAAd,cAAc,mBAFd,MAAM;6FAEN,cAAc;cAH1B,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACRD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACU;AAC8B;AACT;AACN;AACS;AAIjC;AAC8B;AACR;;;;;AAK3D,MAAM,mBAAmB;IAM/B,YAAoB,WAAwB,EAAU,cAA8B,EAAS,MAAiB;QAA1F,gBAAW,GAAX,WAAW,CAAa;QAAU,mBAAc,GAAd,cAAc,CAAgB;QAAS,WAAM,GAAN,MAAM,CAAW;QAL9G,oGAAoG;QACpG,mCAAmC;QACnC,yBAAyB;QACjB,cAAS,GAAY,KAAK,CAAC;QAC3B,eAAU,GAA4B,IAAI,GAAG,EAAsB,CAAC;QAE3E,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,yDAAM,CAAC,UAAU,CAAC,EAAE,GAAG,EAAE;YACjE,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,yDAAM,CAAC,UAAU,CAAC,EAAE,GAAG,EAAE;YACjE,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,yDAAM,CAAC,YAAY,CAAC,EAAE,GAAG,EAAE;YACnE,IAAI,CAAC,aAAa,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,yDAAM,CAAC,eAAe,CAAC,EAAE,GAAG,EAAE;YACtE,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,yDAAM,CAAC,UAAU,CAAC,EAAE,GAAG,EAAE;YACjE,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,yDAAM,CAAC,UAAU,CAAC,EAAE,GAAG,EAAE;YACjE,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,eAAe;QACd,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IAC/D,CAAC;IAED,gBAAgB;QACf,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IAClE,CAAC;IACD,UAAU,CAAC,QAAgB;QAC1B,IAAI,QAAQ,CAAC,WAAW,EAAE,KAAK,GAAG,EAAE;YAClC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAiB,CAAC,UAAU,EAAE,CAAC;SACpE;IACF,CAAC;IACD,YAAY;QACX,MAAM,WAAW,GAAgB,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAgB,CAAC;QACjF,IAAI,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;YACvC,OAAO,KAAK,CAAC;SACb;QACD,OAAO,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC;IACjD,CAAC;IAEO,eAAe,CAAC,KAAoB;QAC3C,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;QAC7C,MAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC;QAChD,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;QACpC,OAAO,OAAO,GAAG,QAAQ,GAAG,GAAG,CAAC;IACjC,CAAC;IAEO,WAAW;QAClB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;YAClE,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;SAC3B;IACF,CAAC;IAEO,WAAW;QAClB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;YAClE,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;SAC3B;IACF,CAAC;IACD,aAAa;QACZ,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE;YACnC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,MAAM,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,uFAAe,EAAE,EAAE,UAAU,EAAE,yBAAyB,EAAE,CAAC,CAAC;YACrG,eAAe,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAe,EAAE,EAAE;gBAC3D,IAAI,CAAC,eAAe,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;SACH;IACF,CAAC;IAEO,WAAW;QAClB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,MAAM,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,iFAAa,EAAE,EAAE,UAAU,EAAE,yBAAyB,EAAE,CAAC,CAAC;QACnG,eAAe,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAe,EAAE,EAAE;YAC3D,IAAI,CAAC,eAAe,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,gBAAgB;QACvB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,MAAM,kBAAkB,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,gGAAkB,EAAE,EAAE,UAAU,EAAE,4BAA4B,EAAE,CAAC,CAAC;QAC9G,kBAAkB,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAe,EAAE,EAAE;YAC9D,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,MAAM,EAAE;gBACX,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE;oBACnC,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,0FAAgB,EAAE,EAAE,UAAU,EAAE,0BAA0B,EAAE,CAAC,CAAC;oBAC3F,GAAG,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,QAAiB,EAAE,EAAE;wBACjD,IAAI,QAAQ;4BAAE,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;oBAChD,CAAC,CAAC,CAAC;iBACH;qBAAM;oBACN,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;iBACjC;aACD;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,WAAW;QAClB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE;YACnC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,0FAAgB,EAAE,EAAE,UAAU,EAAE,0BAA0B,EAAE,CAAC,CAAC;YACpG,YAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAe,EAAE,EAAE;gBACxD,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,IAAI,MAAM;oBAAE,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;YACvC,CAAC,CAAC,CAAC;SACH;IACF,CAAC;IAEO,cAAc,CAAC,KAAoB;QAC1C,IAAI,UAAU,GAAG,IAAI,CAAC;QACtB,MAAM,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QACxC,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YAC5B,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAgB,EAAE,CAAC;SAC3C;aAAM;YACN,UAAU,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;SACtD;QACD,OAAO,UAAU,CAAC;IACnB,CAAC;IAEO,aAAa,CAAC,KAAoB;QACzC,IAAI,KAAK,CAAC,GAAG,KAAK,KAAK,EAAE;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;SACvB;QAED,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE;YACvE,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC;YACvD,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;gBACvI,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;aAC9D;YACD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;SACjC;IACF,CAAC;IAED,YAAY,CAAC,KAAiB;QAC7B,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,iBAAiB,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,cAAc,EAAE;YAChH,IAAI,CAAC,WAAW,CAAC,UAAU,CAAE,IAAI,CAAC,WAAW,CAAC,WAAqC,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC5G,OAAO;SACP;aAAM,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,kBAAkB,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,cAAc,EAAE;YACxH,IAAI,CAAC,WAAW,CAAC,UAAU,CAAE,IAAI,CAAC,WAAW,CAAC,WAAsC,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7G,OAAO;SACP;QACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAC1D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAE1D,IACC,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE;YACnC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,MAAM;YACjD,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,EACjD;YACD,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SAChD;IACF,CAAC;IAEO,SAAS,CAAC,KAAiB;QAClC,OAAO,KAAK,CAAC,MAAiB,CAAC;IAChC,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IACjD,CAAC;IAED,OAAO,CAAC,KAAiB;QACxB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC7C,CAAC;IAEO,SAAS,CAAC,KAAiB;QAClC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC9C,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAC7D,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;YAC5G,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;SAC7D;aAAM;YACN,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;gBACtD,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;aAC/D;SACD;IACF,CAAC;IAEO,aAAa,CAAC,KAAiB;QACtC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAClD,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAC7D,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IACnE,CAAC;IAEO,OAAO,CAAC,KAAoB;QACnC,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YAC7C,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;SACjC;QAED,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IAC1D,CAAC;IACO,SAAS,CAAC,KAAoB;QACrC,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACpB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAC5C,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;SACjC;QACD,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACvD,CAAC;;sFAtNW,mBAAmB;sGAAnB,mBAAmB,WAAnB,mBAAmB,mBAFnB,MAAM;6FAEN,mBAAmB;cAH/B,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACfD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AACiB;AAC3B;;;AAKrC,MAAM,WAAY,SAAQ,sDAAI;IAOpC,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAPvB,cAAS,GAAW,mBAAmB,CAAC;QACxC,eAAU,GAA4B,IAAI,GAAG,EAAsB,CAAC;QACpE,SAAI,GAAa,IAAI,+DAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;QACvD,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/E,UAAK,GAAW,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC;QAC9F,UAAK,GAAW,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC;QAG7F,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE;YAC7B,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1B,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE;YAC7B,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1B,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE;YAC7B,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1B,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,UAAU;QACT,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC;IACxE,CAAC;IAED,aAAa,CAAC,OAAsB,EAAE,MAAe;QACpD,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;QACxB,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YAC5B,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAgB,EAAE,CAAC;SAC3C;IACF,CAAC;IAED,UAAU,CAAC,IAAY;QACtB,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC;QAC3F,IAAI,CAAC,KAAK,GAAG,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC;IAC5F,CAAC;IAED,iBAAiB;QAChB,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,yDAAM,CAAC,eAAe,EAAE;YAC3D,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,IAAI,yDAAM,CAAC,eAAe,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,yDAAM,CAAC,eAAe,CAAC,CAAC;SACnH;QACD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAChD,CAAC;IACD,iBAAiB;QAChB,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,yDAAM,CAAC,eAAe,EAAE;YAC3D,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI;gBAC5B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,yDAAM,CAAC,eAAe,KAAK,CAAC;oBAC3D,CAAC,CAAC,yDAAM,CAAC,eAAe;oBACxB,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,yDAAM,CAAC,eAAe,CAAC;SAC3D;aAAM;YACN,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,GAAG,yDAAM,CAAC,eAAe,CAAC;SACvD;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAChD,CAAC;;sEAtDW,WAAW;8FAAX,WAAW,WAAX,WAAW,mBAFX,MAAM;6FAEN,WAAW;cAHvB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACTD;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACO;AAEQ;AACb;;;AAKtC,MAAM,aAAa;IAIzB,YAAoB,IAAiB;QAAjB,SAAI,GAAJ,IAAI,CAAa;QAHrC,SAAI,GAAa,IAAI,+DAAQ,CAAC,YAAY,EAAE,YAAY,EAAE,GAAG,CAAC,CAAC;QAC/D,aAAQ,GAAY,KAAK,CAAC;QAC1B,iBAAY,GAAiB,+DAAY,CAAC,MAAM,CAAC;IACT,CAAC;IACzC,cAAc;QACb,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;IAChC,CAAC;IACD,kBAAkB,CAAC,YAAoB;QACtC,IAAI,CAAC,YAAY,GAAG,CAAC,YAAY,CAAC;IACnC,CAAC;IACD,iBAAiB,CAAC,QAAc,EAAE,OAAa,EAAE,SAAkB,EAAE,SAAe;QACnF,IAAI,IAAI,CAAC,QAAQ,EAAE;YAClB,WAAW;YACX,MAAM,eAAe,GAAG,IAAI,GAAG,EAAE,CAAC;YAClC,eAAe,CAAC,GAAG,CAAC,+DAAY,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACjF,eAAe,CAAC,GAAG,CAAC,+DAAY,CAAC,UAAU,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;YACjF,eAAe,CAAC,GAAG,CAAC,+DAAY,CAAC,UAAU,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACzE,eAAe,CAAC,GAAG,CAAC,+DAAY,CAAC,WAAW,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAClF,eAAe,CAAC,GAAG,CAAC,+DAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YACvE,eAAe,CAAC,GAAG,CAAC,+DAAY,CAAC,cAAc,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;YACzE,eAAe,CAAC,GAAG,CAAC,+DAAY,CAAC,eAAe,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;YAClF,eAAe,CAAC,GAAG,CAAC,+DAAY,CAAC,YAAY,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YAC/D,eAAe,CAAC,GAAG,CAAC,+DAAY,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YAExE,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC;YACpD,MAAM,QAAQ,GAAG,QAAQ,GAAG,CAAC,CAAC;YAE9B,MAAM,OAAO,GAAG,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YACzD,MAAM,OAAO,GAAG,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAEzD,MAAM,UAAU,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,QAAQ,CAAC;YACrD,MAAM,UAAU,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,QAAQ,CAAC;YACrD,kBAAkB;YAClB,QAAQ,CAAC,CAAC,GAAG,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC;YAClG,QAAQ,CAAC,CAAC,GAAG,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC;YAClG,IAAI,CAAC,SAAS,EAAE;gBACf,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,yDAAM,CAAC,YAAY,CAAC,GAAG,QAAQ,CAAC;gBACzE,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,yDAAM,CAAC,YAAY,CAAC,GAAG,QAAQ,CAAC;aACzE;SACD;IACF,CAAC;;0EAzCW,aAAa;gGAAb,aAAa,WAAb,aAAa,mBAFb,MAAM;6FAEN,aAAa;cAHzB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;;;;;;;;ACR+D;AACrB;AACC;;;AAMrC,MAAM,WAAW;IACvB,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;IAAG,CAAC;IAElC,QAAQ;;YACb,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAW,yDAAM,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC,SAAS,EAAE,CAAC;QACrE,CAAC;KAAA;IAED,SAAS,CAAC,MAAgB;QACzB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAO,yDAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC,CAAC;IAC/E,CAAC;IAED,UAAU,CAAC,MAAgB;QAC1B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAO,yDAAM,CAAC,QAAQ,GAAG,QAAQ,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC,CAAC;IAC1F,CAAC;IAED,UAAU,CAAC,EAAU;QACpB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,yDAAM,CAAC,QAAQ,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,YAAY,EAAE,MAAM,EAAE,CAAC,CAAC;IAC3E,CAAC;;sEAjBW,WAAW;8FAAX,WAAW,WAAX,WAAW,mBAFX,MAAM;6FAEN,WAAW;cAHvB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACPD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AACL;AACN;;;AAMrD,MAAM,uBAAwB,SAAQ,sDAAI;IAmBhD,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAnBvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,mBAAmB,EAAE,sBAAsB,EAAE,GAAG,CAAC,CAAC;QAChF,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,yDAAM,CAAC,cAAc,CAAC,CAAC;QAQ7E,cAAS,GAAY,KAAK,CAAC;QAInC,uBAAkB,GAAkB,IAAI,oDAAe,CAAO,yDAAM,CAAC,cAAc,CAAC,CAAC;QACrF,cAAS,GAAqB,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,CAAC;QACrE,4BAAuB,GAAkB,IAAI,oDAAe,CAAO,yDAAM,CAAC,cAAc,CAAC,CAAC;QAC1F,mBAAc,GAAqB,IAAI,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC;QAI9E,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,aAAa,CAAC,OAAsB;QACnC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACpB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,OAAO;SACP;QAED,IAAI,OAAO,CAAC,GAAG,KAAK,0DAAO,CAAC,KAAK,EAAE;YAClC,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;aAAM,IAAI,OAAO,CAAC,GAAG,KAAK,0DAAO,CAAC,MAAM,EAAE;YAC1C,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAC9B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACvB;IACF,CAAC;IAEO,aAAa;QACpB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,yDAAM,CAAC,mBAAmB,CAAC,CAAC;QAE/D,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC1E;aAAM;YACN,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC3E;IACF,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC3B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;YACvC,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,OAAO;SACP;QACD,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,CAAC;QAEnD,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;SACvC;IACF,CAAC;IAED,SAAS,CAAC,KAAiB;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YAEnD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;YAE5G,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACpB,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;aACtF;iBAAM;gBACN,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;aACnF;YACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAClC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;SACvG;QACD,yDAAM,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QACnC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACxB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAChE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;IACF,CAAC;IAEO,WAAW,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QAC5E,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,MAAM,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC;QAClE,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QAEzC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACzC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACzC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;IACnG,CAAC;IAEO,UAAU,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QAC3E,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAExG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QAClD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QAClD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IAC5I,CAAC;IAEO,cAAc,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QAC/E,GAAG,CAAC,SAAS,EAAE,CAAC;QAEhB,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;SACjI;QAED,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACpB,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACtC,GAAG,CAAC,MAAM,EAAE,CAAC;QACb,GAAG,CAAC,SAAS,EAAE,CAAC;QAEhB,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;SACjI;QAED,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACpB,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,yDAAM,CAAC,mBAAmB,CAAC,CAAC;QAC/D,GAAG,CAAC,MAAM,EAAE,CAAC;IACd,CAAC;IAED,eAAe,CAAC,MAAY;QAC3B,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAC3D,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAC1B,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACtC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAC/B,CAAC;IAEO,sBAAsB,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QACvF,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACrE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACvE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACvC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;IACnC,CAAC;IAEO,mBAAmB,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QACpF,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC/E,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE;YAC9C,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC;SAC1C;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE;YAC/C,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC;SAC3C;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/B,IAAI,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;SACxB;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/B,IAAI,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;SACxB;IACF,CAAC;IAEO,oBAAoB,CAAC,KAAa,EAAE,UAAkB;QAC7D,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,GAAG,KAAK,CAAC;QACnD,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;QAC7C,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;IAC1D,CAAC;IAED,sBAAsB;QACrB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;QACvC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,eAAe,CAAC,QAAc,EAAE,MAAc,EAAE,MAAY,EAAE,SAAoB;QACjF,MAAM,SAAS,GAAG;YACjB,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;YAC5D,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;SAC5D,CAAC;QAEF,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,KAAK,SAAS,EAAE;YACjD,IAAI,MAAM,KAAK,CAAC,EAAE;gBACjB,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;gBAC5C,OAAO,CAAC,IAAI,EAAE,CAAC;gBACf,OAAO,CAAC,SAAS,EAAE,CAAC;gBACpB,IAAI,IAAI,CAAC,QAAQ,EAAE;oBAClB,OAAO,CAAC,OAAO,CACd,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EACxB,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EACxB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EACrB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EACrB,CAAC,EACD,CAAC,EACD,CAAC,GAAG,IAAI,CAAC,EAAE,CACX,CAAC;iBACF;qBAAM;oBACN,OAAO,CAAC,OAAO,CACd,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EACxB,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EACxB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EACrB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EACrB,CAAC,EACD,CAAC,EACD,CAAC,GAAG,IAAI,CAAC,EAAE,CACX,CAAC;iBACF;gBACD,OAAO,CAAC,SAAS,EAAE,CAAC;gBACpB,OAAO,CAAC,IAAI,EAAE,CAAC;gBACf,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC;gBAChD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACrH,OAAO,CAAC,OAAO,EAAE,CAAC;aAClB;YAED,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAEhE,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;YACxF,MAAM,cAAc,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC;YACpG,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACpD,UAAU,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,GAAG,cAAc,CAAC,CAAC,CAAC;YACxD,UAAU,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC;YAC1D,MAAM,OAAO,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;YAExE,OAAO,CAAC,YAAY,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YAC9F,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACzF,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBAClB,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;aACjI;iBAAM;gBACN,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;aACjI;YACD,GAAG,CAAC,SAAS,EAAE,CAAC;YAEhB,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;YACxB,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAC9E,GAAG,CAAC,SAAS,CACZ,UAAU,EACV,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACpF,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACpF,CAAC;YACF,GAAG,CAAC,OAAO,EAAE,CAAC;YAEd,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACzE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;SACvB;IACF,CAAC;IAED,YAAY,CAAC,MAAY;QACxB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACtC,CAAC;IAED,iBAAiB,CAAC,KAAW;QAC5B,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC;;8FAjRW,uBAAuB;0GAAvB,uBAAuB,WAAvB,uBAAuB,mBAFvB,MAAM;6FAEN,uBAAuB;cAHnC,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACZD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACO;AACI;AAEiB;AACR;AACnB;AACgB;;;AAMrD,MAAM,qBAAsB,SAAQ,4EAAW;IAqBrD,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QArBvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,OAAO,EAAE,qBAAqB,EAAE,GAAG,CAAC,CAAC;QACnE,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,yDAAM,CAAC,cAAc,CAAC,CAAC;QACrF,cAAS,GAAY,KAAK,CAAC;QAa3B,uBAAkB,GAAkB,IAAI,oDAAe,CAAO,yDAAM,CAAC,cAAc,CAAC,CAAC;QACrF,cAAS,GAAqB,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,CAAC;QACrE,4BAAuB,GAAkB,IAAI,oDAAe,CAAO,yDAAM,CAAC,cAAc,CAAC,CAAC;QAC1F,mBAAc,GAAqB,IAAI,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC;QAI9E,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,eAAe,CAAC,QAAc,EAAE,MAAc,EAAE,MAAY,EAAE,SAAoB;QACjF,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,KAAK,SAAS,EAAE;YACjD,IAAI,IAAI,CAAC,iBAAiB,IAAI,QAAQ,KAAK,IAAI,CAAC,MAAM,EAAE;gBACvD,yDAAM,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;aACnC;YAED,IAAI,MAAM,KAAK,CAAC,EAAE;gBACjB,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;gBAC5C,OAAO,CAAC,IAAI,EAAE,CAAC;gBACf,OAAO,CAAC,SAAS,EAAE,CAAC;gBACpB,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,YAAY,EAAE;oBACtC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;iBACjC;gBACD,OAAO,CAAC,SAAS,EAAE,CAAC;gBACpB,OAAO,CAAC,IAAI,EAAE,CAAC;gBACf,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC9E,OAAO,CAAC,OAAO,EAAE,CAAC;aAClB;YAED,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAEhE,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;YACxF,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACpD,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACnD,UAAU,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC;YACtD,UAAU,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC;YACzD,MAAM,OAAO,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;YACxE,MAAM,MAAM,GAAG,SAAS,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;YACtE,MAAM,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAErC,GAAG,CAAC,IAAI,EAAE,CAAC;YAEX,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,YAAY,EAAE;gBACtC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;aACzD;YACD,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,OAAO,CAAC,IAAI,EAAE,CAAC;YACf,OAAO,CAAC,SAAS,GAAG,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;YAC5C,OAAO,CAAC,IAAI,EAAE,CAAC;YACf,OAAO,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEnC,GAAG,CAAC,IAAI,EAAE,CAAC;YAEX,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAC9E,MAAM,cAAc,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC;YAEpG,GAAG,CAAC,SAAS,CACZ,UAAU,EACV,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,EACvG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CACvG,CAAC;YACF,GAAG,CAAC,OAAO,EAAE,CAAC;YAEd,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACzE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;YACvB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,yDAAM,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;SACvE;IACF,CAAC;IAES,KAAK,CAAC,KAAiB;QAChC,IAAI,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;QACvC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QAEvB,yDAAM,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QAEnC,IAAI,IAAI,CAAC,MAAM,EAAE;YAChB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,OAAO;SACP;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAS,CAAC;QACzD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE;YACvD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,EAAE;gBAC7B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;aACxB;SACD;aAAM;YACN,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAChC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;IACF,CAAC;IAED,0BAA0B;IAC1B,aAAa,CAAC,KAAiB,IAAS,CAAC;IAEjC,eAAe,CAAC,IAAY,EAAE,QAAc;QACnD,OAAO,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,yDAAM,CAAC,SAAS,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,yDAAM,CAAC,SAAS,CAAC;IACxI,CAAC;IAES,QAAQ,CAAC,GAA6B,EAAE,IAAY,EAAE,WAAiB;QAChF,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;YACtB,OAAO;SACP;QAED,GAAG,CAAC,WAAW,CAAC,yDAAM,CAAC,kBAAkB,CAAC,CAAC;QAC3C,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;QAClB,GAAG,CAAC,OAAO,GAAG,OAAO,CAAC;QACtB,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;QACvB,GAAG,CAAC,WAAW,GAAG,MAAM,CAAC;QAEzB,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,EAAE;YAC5C,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;YAClB,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC;SAC1B;QAED,GAAG,CAAC,SAAS,EAAE,CAAC;QAEhB,KAAK,MAAM,KAAK,IAAI,IAAI,EAAE;YACzB,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;SAC7B;QACD,IAAI,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACzE,WAAW,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;SACtB;QACD,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;QACzC,GAAG,CAAC,MAAM,EAAE,CAAC;QACb,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAEO,gBAAgB;QACvB,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7B,MAAM,cAAc,GAAc,EAAE,CAAC;YACrC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;gBAClD,MAAM,QAAQ,GAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBAClE,MAAM,QAAQ,GAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC5G,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC;aACnE;YAED,IAAI,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBAClC,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,OAAO,IAAI,CAAC;aACZ;YAED,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,yDAAM,CAAC,WAAW,EAAE;gBAChD,IAAI,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE;oBAC1D,IAAI,CAAC,iBAAiB,EAAE,CAAC;oBACzB,OAAO,IAAI,CAAC;iBACZ;aACD;SACD;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IAEO,oBAAoB,CAAC,QAAgB,EAAE,QAAgB;QAC9D,MAAM,YAAY,GAAa,EAAE,CAAC;QAElC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YAC5B,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAExC,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAC7C,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAC/B;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YAC5B,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAExC,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAC7C,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAC/B;QACD,kCAAkC;QAClC,MAAM,MAAM,GAAY,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QAEzH,OAAO,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;IAChG,CAAC;IAEO,aAAa;QACpB,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAC1B,IAAI,EACJ,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;YAC3B,OAAO,KAAK,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CACF,CAAC;QACF,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAC1B,IAAI,EACJ,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;YAC3B,OAAO,KAAK,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CACF,CAAC;QACF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CACzB,IAAI,EACJ,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;YAC3B,OAAO,KAAK,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CACF,CAAC;QACF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CACzB,IAAI,EACJ,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;YAC3B,OAAO,KAAK,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CACF,CAAC;QAEF,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;QAE7C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IACnH,CAAC;IAED,eAAe,CAAC,MAAY;QAC3B,IAAI,CAAC,oBAAoB,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACxC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACxF,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAC3D,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAC1B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED,oBAAoB,CAAC,KAAa,EAAE,UAAkB;QACrD,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,GAAG,KAAK,CAAC;QACnD,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;QAC7C,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;IAC1D,CAAC;IAES,WAAW,CAAC,KAAiB;QACtC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC;QAClC,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACnC,CAAC;IAED,sBAAsB;QACrB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;QACvC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,YAAY,CAAC,MAAY;QACxB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACtC,CAAC;IAED,iBAAiB,CAAC,KAAW;QAC5B,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC;;0FAvRW,qBAAqB;wGAArB,qBAAqB,WAArB,qBAAqB,mBAFrB,MAAM;6FAEN,qBAAqB;cAHjC,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACZD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AAEL;AACN;AACM;;;;AAK3D,MAAM,yBAA0B,SAAQ,sDAAI;IAiBlD,YAAY,cAA8B,EAAS,cAAqC;QACvF,KAAK,CAAC,cAAc,CAAC,CAAC;QAD4B,mBAAc,GAAd,cAAc,CAAuB;QAhBxF,SAAI,GAAa,IAAI,+DAAQ,CAAC,qBAAqB,EAAE,wBAAwB,EAAE,GAAG,CAAC,CAAC;QACpF,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,yDAAM,CAAC,cAAc,CAAC,CAAC;QAQ7E,cAAS,GAAY,KAAK,CAAC;QAEnC,uBAAkB,GAAkB,IAAI,oDAAe,CAAO,yDAAM,CAAC,cAAc,CAAC,CAAC;QACrF,cAAS,GAAqB,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,CAAC;QACrE,4BAAuB,GAAkB,IAAI,oDAAe,CAAO,yDAAM,CAAC,cAAc,CAAC,CAAC;QAC1F,mBAAc,GAAqB,IAAI,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC;QAI9E,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,aAAa,CAAC,OAAsB;QACnC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACpB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,OAAO;SACP;QAED,IAAI,OAAO,CAAC,GAAG,KAAK,0DAAO,CAAC,KAAK,EAAE;YAClC,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;aAAM,IAAI,OAAO,CAAC,GAAG,KAAK,0DAAO,CAAC,MAAM,EAAE;YAC1C,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAC9B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACvB;IACF,CAAC;IAEO,aAAa;QACpB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAEhE,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC1E;aAAM;YACN,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC7E;IACF,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC3B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;YACvC,OAAO;SACP;QACD,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,CAAC;QACnD,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;SACvC;IACF,CAAC;IAED,SAAS,CAAC,KAAiB;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAEhE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACpB,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;aACtF;iBAAM;gBACN,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;aACnF;YACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAClC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;SACvG;QAED,yDAAM,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QACnC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACxB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;IACF,CAAC;IAEO,aAAa,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QAC9E,MAAM,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC;QAClE,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QAEzC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACzC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACzC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;IACnG,CAAC;IAEO,UAAU,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QAC3E,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAExG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QAClD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QAClD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IAC5I,CAAC;IAEO,cAAc,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QAC/E,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACtC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;QACvD,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,yDAAM,CAAC,mBAAmB,CAAC,CAAC;QAC/D,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;IACxD,CAAC;IAED,eAAe,CAAC,MAAY;QAC3B,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAC3D,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAC1B,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACtC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAC/B,CAAC;IAEO,sBAAsB,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QACvF,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACrE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACvE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACvC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;IACnC,CAAC;IAEO,mBAAmB,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY;QACpF,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC/E,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE;YAC9C,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC;SAC1C;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE;YAC/C,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC;SAC3C;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/B,IAAI,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;SACxB;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/B,IAAI,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;SACxB;IACF,CAAC;IAEO,oBAAoB,CAAC,KAAa,EAAE,UAAkB;QAC7D,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,GAAG,KAAK,CAAC;QACnD,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;QAC7C,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;IAC1D,CAAC;IAED,sBAAsB;QACrB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;QACvC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,eAAe,CAAC,QAAc,EAAE,MAAc,EAAE,MAAY,EAAE,SAAoB;QACjF,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,KAAK,SAAS,EAAE;YACjD,IAAI,MAAM,KAAK,CAAC,EAAE;gBACjB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC;gBAChD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACrH;YAED,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAEhE,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;YACxF,MAAM,cAAc,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC;YACpG,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACpD,UAAU,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,GAAG,cAAc,CAAC,CAAC,CAAC;YACxD,UAAU,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC;YAC1D,MAAM,OAAO,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;YAExE,OAAO,CAAC,YAAY,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YAC9F,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACzF,GAAG,CAAC,SAAS,EAAE,CAAC;YAEhB,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;YACxB,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAC9E,GAAG,CAAC,SAAS,CACZ,UAAU,EACV,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACpF,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACpF,CAAC;YACF,GAAG,CAAC,OAAO,EAAE,CAAC;YAEd,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACzE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;SACvB;IACF,CAAC;IAED,YAAY,CAAC,MAAY;QACxB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACtC,CAAC;IAED,iBAAiB,CAAC,KAAW;QAC5B,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC;;kGAhNW,yBAAyB;4GAAzB,yBAAyB,WAAzB,yBAAyB,mBAFzB,MAAM;6FAEN,yBAAyB;cAHrC,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACbD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AAC3B;;;AAMrC,MAAM,sBAAuB,SAAQ,sDAAI;IAY/C,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAZvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,kBAAkB,EAAE,gCAAgC,EAAE,iBAAiB,CAAC,CAAC;QACvG,YAAO,GAAe,IAAI,mEAAU,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;QAOzD,qCAAqC;QACrC,eAAU,GAAqB,GAAG,EAAE,GAAE,CAAC,CAAC;QAIvC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;IAC7B,CAAC;IAED,MAAM,CAAC,OAAa,EAAE,OAAa,EAAE,IAAU,EAAE,GAAW;QAC3D,IAAI,IAAI,GAAG,CAAC,CAAC;QACb,IAAI,IAAI,CAAC,aAAa,EAAE;YACvB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC5C,IAAI,GAAG,CAAC,CAAC;SACT;QAED,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QAE9C,OAAO,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC;QACjF,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;QAC1C,yDAAM,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;QACnE,OAAO,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;IACnF,CAAC;IAEO,cAAc,CAAC,QAAc,EAAE,OAAa;QACnD,IAAI,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE;YACnB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;YACf,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;SACxB;QAED,IAAI,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE;YACnB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;YACf,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;SACxB;QAED,OAAO,QAAQ,CAAC;IACjB,CAAC;IAED,YAAY;QACX,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;IACjD,CAAC;IAEO,YAAY,CAAC,IAAY,EAAE,OAAa,EAAE,OAAa;QAC9D,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;QAC1C,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QAC1E,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QAChF,MAAM,SAAS,GAAc,IAAI,SAAS,CAAC,IAAI,iBAAiB,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;QACrH,MAAM,YAAY,qBAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAE,CAAC;QACjD,MAAM,KAAK,qBAAc,IAAI,CAAC,IAAI,CAAE,CAAC;QACrC,MAAM,mBAAmB,qBAAQ,IAAI,CAAC,eAAe,CAAE,CAAC;QACxD,MAAM,aAAa,qBAAgC,IAAI,CAAE,CAAC;QAC1D,MAAM,IAAI,GAAqB,GAAG,EAAE;YACnC,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;YAC5D,aAAa,CAAC,QAAQ,CAAC,eAAe,CAAC,YAAY,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;YAC7E,aAAa,CAAC,QAAQ,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;YAC1E,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAC/D,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAiB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QAClF,CAAC,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,UAAU,GAAG,IAAI,CAAC;IACvC,CAAC;IAEO,WAAW,CAAC,aAAqC,EAAE,QAAc,EAAE,MAAY;QACtF,IAAI,YAAY,IAAI,aAAa,CAAC,QAAQ,EAAE;YAC3C,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;YAC5C,OAAO,CAAC,IAAI,EAAE,CAAC;YACf,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;YACrH,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,OAAO,CAAC,IAAI,EAAE,CAAC;YACf,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACtH,OAAO,CAAC,OAAO,EAAE,CAAC;SAClB;aAAM;YACN,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SACtH;IACF,CAAC;;4FA1FW,sBAAsB;yGAAtB,sBAAsB,WAAtB,sBAAsB,mBAFtB,MAAM;6FAEN,sBAAsB;cAHlC,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AACL;AACD;;;;AAM1D,MAAM,qBAAsB,SAAQ,sDAAI;IAe9C,YAAY,cAA8B,EAAU,aAA4B;QAC/E,KAAK,CAAC,cAAc,CAAC,CAAC;QAD6B,kBAAa,GAAb,aAAa,CAAe;QAdhF,SAAI,GAAa,IAAI,+DAAQ,CAAC,iBAAiB,EAAE,0BAA0B,EAAE,gBAAgB,CAAC,CAAC;QAC/F,YAAO,GAAe,IAAI,mEAAU,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;QAUzD,qCAAqC;QACrC,eAAU,GAAqB,GAAG,EAAE,GAAE,CAAC,CAAC;QAIvC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QAC9B,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;IAC5B,CAAC;IAED,gBAAgB,CAAC,MAA4B,EAAE,IAAU;QACxD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACxC,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC,EAAE;gBACzB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC5C;YACD,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC3B,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YACtE,IAAI,CAAC,QAAQ,GAAG;gBACf,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC1C,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;aAC1C,CAAC;YACF,IAAI,CAAC,aAAa,EAAE,CAAC;YAErB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;YACjD,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;SACnB;IACF,CAAC;IAED,eAAe,CAAC,KAAiB,EAAE,QAAc,EAAE,IAAU;QAC5D,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;QAChC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IACzB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,CAAC;QACnD,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,QAAQ,CAAC,iBAAiB,GAAG,KAAK,CAAC;YACxC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC;YACjD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC;YACrC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YAChG,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;SACnB;IACF,CAAC;IAED,SAAS;QACR,IAAI,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC;YACvC,MAAM,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YACtE,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;SAChD;IACF,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,IAAI,CAAC,UAAU,EAAE;YACpB,MAAM,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YACtE,MAAM,QAAQ,GAAG,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC;YAC5C,IAAI,CAAC,QAAQ,GAAG;gBACf,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC;gBAC9D,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC;aAC9D,CAAC;YACF,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;SAChD;IACF,CAAC;IAEO,aAAa;QACpB,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,yDAAM,CAAC,sBAAsB,EAAE;YAC7E,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,yDAAM,CAAC,sBAAsB,CAAC;SACzE;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE;YACxB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;SACpB;IACF,CAAC;IAEO,aAAa,CACpB,YAAmC,EACnC,mBAAyB,EACzB,KAAW,EACX,aAAmB,EACnB,MAAY,EACZ,SAAoB;QAEpB,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;QAC3D,YAAY,CAAC,QAAQ,CAAC,eAAe,CAAC,aAAa,EAAE,CAAC,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;QAC3E,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,MAAM,WAAW,GAAgB,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAgB,CAAC;QACzF,IAAI,WAAW;YAAE,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;IACrD,CAAC;IACO,cAAc,CACrB,YAAmC,EACnC,oBAA0B,EAC1B,SAAe,EACf,YAAkB,EAClB,IAAY,EACZ,MAAY,EACZ,aAAwB;QAExB,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAChE,YAAY,CAAC,QAAQ,CAAC,eAAe,CAAC,YAAY,EAAE,IAAI,EAAE,MAAM,EAAE,aAAa,CAAC,CAAC;QACjF,YAAY,CAAC,QAAQ,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC,EAAE,MAAM,EAAE,aAAa,CAAC,CAAC;QAC9E,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,MAAM,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAgB,CAAC;QAC5E,IAAI,WAAW;YAAE,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;IACrD,CAAC;IAEO,YAAY,CAAC,IAAY,EAAE,MAAY,EAAE,OAAgB;QAChE,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,yDAAM,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,yDAAM,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;QAClF,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QACtF,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;QAC1C,IAAI,CAAC,OAAO,IAAI,IAAI,KAAK,CAAC,EAAE;YAC3B,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;YAC7E,MAAM,SAAS,GAAc,IAAI,SAAS,CAAC,IAAI,iBAAiB,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;YACrH,MAAM,aAAa,qBAAQ,IAAI,CAAC,QAAQ,CAAE,CAAC;YAC3C,MAAM,KAAK,qBAAc,MAAM,CAAE,CAAC;YAClC,MAAM,mBAAmB,qBAAQ,IAAI,CAAC,eAAe,CAAE,CAAC;YACxD,MAAM,aAAa,qBAA+B,IAAI,CAAE,CAAC;YACzD,IAAI,CAAC,cAAc,CAAC,UAAU,GAAG,GAAG,EAAE;gBACrC,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,mBAAmB,EAAE,KAAK,EAAE,aAAa,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;YAChG,CAAC,CAAC;SACF;QAED,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;QACtE,MAAM,YAAY,qBAA+B,IAAI,CAAE,CAAC;QACxD,MAAM,oBAAoB,qBAAQ,IAAI,CAAC,eAAe,CAAE,CAAC;QACzD,MAAM,aAAa,GAAc,IAAI,SAAS,CAAC,IAAI,iBAAiB,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;QACzH,MAAM,YAAY,qBAAQ,IAAI,CAAC,QAAQ,CAAE,CAAC;QAC1C,MAAM,SAAS,qBAAc,MAAM,CAAE,CAAC;QACtC,IAAI,CAAC,cAAc,CAAC,UAAU,GAAG,GAAG,EAAE;YACrC,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,oBAAoB,EAAE,SAAS,EAAE,YAAY,EAAE,IAAI,EAAE,SAAS,EAAE,aAAa,CAAC,CAAC;QAClH,CAAC,CAAC;IACH,CAAC;IAEO,WAAW,CAAC,YAAmC,EAAE,QAAc,EAAE,MAAY;QACpF,IAAI,YAAY,IAAI,YAAY,CAAC,QAAQ,EAAE;YAC1C,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;YAC5C,OAAO,CAAC,IAAI,EAAE,CAAC;YACf,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;YACrH,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,OAAO,CAAC,IAAI,EAAE,CAAC;YACf,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YAC9E,OAAO,CAAC,OAAO,EAAE,CAAC;SAClB;aAAM;YACN,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;SAClG;IACF,CAAC;IAEO,aAAa,CAAC,MAA4B;QACjD,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,yDAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;QACzE,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,yDAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;QACtF,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,yDAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;QACvE,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,yDAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;IACtF,CAAC;IAED,YAAY;QACX,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;YAC7D,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;YACnB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YAChG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;SAChD;IACF,CAAC;;0FArLW,qBAAqB;wGAArB,qBAAqB,WAArB,qBAAqB,mBAFrB,MAAM;6FAEN,qBAAqB;cAHjC,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACZD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AACR;AACH;;;AAMrD,MAAM,uBAAwB,SAAQ,sDAAI;IAchD,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAdvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,mBAAmB,EAAE,yBAAyB,EAAE,QAAQ,CAAC,CAAC;QACxF,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,yDAAM,CAAC,cAAc,CAAC,CAAC;QAOrF,uBAAkB,GAAkB,IAAI,oDAAe,CAAO,yDAAM,CAAC,cAAc,CAAC,CAAC;QACrF,cAAS,GAAqB,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,CAAC;QACrE,4BAAuB,GAAkB,IAAI,oDAAe,CAAO,yDAAM,CAAC,cAAc,CAAC,CAAC;QAC1F,mBAAc,GAAqB,IAAI,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC;QAI9E,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,aAAa,CAAC,KAAoB;QACjC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACvD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC;QACxD,IAAI,KAAK,CAAC,GAAG,KAAK,2DAAQ,CAAC,iBAAiB,CAAC,MAAM,CAAC,2DAAQ,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,KAAK,2DAAQ,CAAC,iBAAiB,EAAE;YACvI,IAAI,CAAC,eAAe,EAAE,CAAC;SACvB;QACD,IAAI,KAAK,CAAC,GAAG,KAAK,0DAAO,CAAC,MAAM,EAAE;YACjC,IAAI,CAAC,sBAAsB,EAAE,CAAC;SAC9B;IACF,CAAC;IAED,eAAe;QACd,MAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;QACxC,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC7E,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAC3D,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC/B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED,sBAAsB;QACrB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,YAAY,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;QACvC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,eAAe,CAAC,QAAc,EAAE,MAAc,EAAE,MAAY,EAAE,SAAoB;QACjF,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,KAAK,SAAS,EAAE;YACjD,IAAI,MAAM,KAAK,CAAC,EAAE;gBACjB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC;gBAChD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACrH;YAED,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAEhE,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;YACxF,MAAM,cAAc,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC;YACpG,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACpD,UAAU,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,GAAG,cAAc,CAAC,CAAC,CAAC;YACxD,UAAU,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC;YAC1D,MAAM,OAAO,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;YAExE,OAAO,CAAC,YAAY,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YAC9F,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACzF,GAAG,CAAC,SAAS,EAAE,CAAC;YAEhB,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;YACxB,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAC9E,GAAG,CAAC,SAAS,CACZ,UAAU,EACV,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACpF,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACpF,CAAC;YACF,GAAG,CAAC,OAAO,EAAE,CAAC;YAEd,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACzE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;SACvB;IACF,CAAC;IAED,YAAY,CAAC,MAAY;QACxB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACtC,CAAC;IAED,iBAAiB,CAAC,KAAW;QAC5B,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC;;8FA7FW,uBAAuB;0GAAvB,uBAAuB,WAAvB,uBAAuB,mBAFvB,MAAM;6FAEN,uBAAuB;cAHnC,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACZD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AACL;;;AAK3D,MAAM,cAAe,SAAQ,sDAAI;IACvC,kBAAkB;IAClB,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAEvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,SAAS,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;QACzD,YAAO,GAAe,IAAI,mEAAU,CAAC,CAAC,CAAC,CAAC;QACxC,cAAS,GAAY,KAAK,CAAC;QAG3B,SAAI,GAAS,EAAU,CAAC;IANxB,CAAC;IAQD,8DAA8D;IAC9D,aAAa,CAAC,OAAsB;QACnC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACpB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,OAAO;SACP;QAED,IAAI,OAAO,CAAC,GAAG,KAAK,0DAAO,CAAC,KAAK,EAAE;YAClC,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;aAAM,IAAI,OAAO,CAAC,GAAG,KAAK,0DAAO,CAAC,MAAM,EAAE;YAC1C,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;SAChE;IACF,CAAC;IAED,6DAA6D;IAC7D,aAAa;QACZ,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,UAAU,CACd,IAAI,CAAC,cAAc,CAAC,UAAU,EAC9B,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,cAAc,CAAC,YAAY,EAChC,IAAI,CAAC,cAAc,CAAC,cAAc,EAClC,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,CACT,CAAC;SACF;aAAM;YACN,IAAI,CAAC,WAAW,CACf,IAAI,CAAC,cAAc,CAAC,UAAU,EAC9B,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,cAAc,CAAC,YAAY,EAChC,IAAI,CAAC,cAAc,CAAC,cAAc,EAClC,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,CACT,CAAC;SACF;IACF,CAAC;IAED,0DAA0D;IAC1D,UAAU;QACT,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAEhE,MAAM,OAAO,qBAAQ,IAAI,CAAC,OAAO,CAAE,CAAC;QACpC,OAAO,CAAC,YAAY,qBAAQ,IAAI,CAAC,OAAO,CAAC,YAAY,CAAE,CAAC;QACxD,MAAM,MAAM,qBAAQ,IAAI,CAAC,MAAM,CAAE,CAAC;QAClC,MAAM,MAAM,qBAAQ,IAAI,CAAC,MAAM,CAAE,CAAC;QAClC,MAAM,IAAI,qBAAQ,IAAI,CAAC,IAAI,CAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC;QAClD,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAEjC,MAAM,WAAW,GAAqB,GAAG,EAAE;YAC1C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;QACzG,CAAC,CAAC;QAEF,MAAM,UAAU,GAAqB,GAAG,EAAE;YACzC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;QACxG,CAAC,CAAC;QAEF,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,UAAU,EAAE,CAAC;YACb,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;SAC1C;aAAM;YACN,WAAW,EAAE,CAAC;YACd,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;SAC3C;IACF,CAAC;IAED,+GAA+G;IAC/G,kEAAkE;IAClE,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,CAAC;QAEnD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE;YAC1E,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC;SACzC;QAED,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;SACnD;IACF,CAAC;IAED,0GAA0G;IAC1G,SAAS,CAAC,KAAiB;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACvB;IACF,CAAC;IAED,2GAA2G;IAC3G,iCAAiC;IACjC,WAAW,CAAC,KAAiB;QAC5B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAChE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACvD,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACvD,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;IACF,CAAC;IAED,sBAAsB;IACtB,WAAW,CACV,GAA6B,EAC7B,MAAY,EACZ,OAAmB,EACnB,SAAkB,EAClB,YAAoB,EACpB,cAAsB,EACtB,MAAY,EACZ,IAAU;QAEV,GAAG,CAAC,SAAS,EAAE,CAAC;QAEhB,IAAI,CAAC,SAAS,EAAE;YACf,OAAO;SACP;QACD,yCAAyC;QACzC,GAAG,CAAC,WAAW,GAAG,MAAM,CAAC;QACzB,GAAG,CAAC,SAAS,GAAG,yDAAM,CAAC,uBAAuB,CAAC;QAC/C,GAAG,CAAC,WAAW,CAAC,CAAC,yDAAM,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAEjD,MAAM,cAAc,GAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QAE5C,IAAI,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE;YACjC,cAAc,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC;YACzC,cAAc,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC;SACzC;QAED,0CAA0C;QAC1C,IAAI,GAAG,KAAK,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE;YAC3C,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;SACnH;QAED,UAAU;QACV,GAAG,CAAC,OAAO,CACV,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,EAC3D,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,EAC3D,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EACjC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EACjC,CAAC,EACD,CAAC,EACD,CAAC,GAAG,IAAI,CAAC,EAAE,CACX,CAAC;QAEF,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACpB,GAAG,CAAC,WAAW,GAAG,cAAc,CAAC;QACjC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;QAC7B,GAAG,CAAC,SAAS,GAAG,YAAY,CAAC;QAE7B,IAAI,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE;YAC9B,GAAG,CAAC,IAAI,EAAE,CAAC;SACX;QAED,IAAI,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE;YACjC,GAAG,CAAC,MAAM,EAAE,CAAC;SACb;IACF,CAAC;IAED,mBAAmB;IACnB,UAAU,CACT,GAA6B,EAC7B,MAAY,EACZ,OAAmB,EACnB,SAAkB,EAClB,YAAoB,EACpB,cAAsB,EACtB,MAAY,EACZ,IAAU;QAEV,GAAG,CAAC,SAAS,EAAE,CAAC;QAEhB,IAAI,CAAC,SAAS,EAAE;YACf,OAAO;SACP;QAED,sCAAsC;QACtC,GAAG,CAAC,WAAW,GAAG,MAAM,CAAC;QACzB,GAAG,CAAC,SAAS,GAAG,yDAAM,CAAC,uBAAuB,CAAC;QAC/C,GAAG,CAAC,WAAW,CAAC,CAAC,yDAAM,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAEjD,MAAM,cAAc,GAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QAE5C,IAAI,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE;YACjC,cAAc,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC;YACzC,cAAc,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC;SACzC;QAED,6BAA6B;QAC7B,IAAI,GAAG,KAAK,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE;YAC3C,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;SACtI;QAED,SAAS;QACT,GAAG,CAAC,OAAO,CACV,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,EAC3D,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,GAAG,CAAC,EAC9E,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EACjC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EACjC,CAAC,EACD,CAAC,EACD,CAAC,GAAG,IAAI,CAAC,EAAE,CACX,CAAC;QAEF,0CAA0C;QAC1C,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACpB,GAAG,CAAC,WAAW,GAAG,cAAc,CAAC;QACjC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;QAC7B,GAAG,CAAC,SAAS,GAAG,YAAY,CAAC;QAC7B,IAAI,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE;YAC9B,GAAG,CAAC,IAAI,EAAE,CAAC;SACX;QAED,IAAI,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE;YACjC,GAAG,CAAC,MAAM,EAAE,CAAC;SACb;IACF,CAAC;;4EA7OW,cAAc;iGAAd,cAAc,WAAd,cAAc,mBAFd,MAAM;6FAEN,cAAc;cAH1B,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AACd;;;AAKlD,MAAM,aAAc,SAAQ,sDAAI;IAQtC,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QANvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;QACvD,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,yDAAM,CAAC,qBAAqB,CAAC,CAAC;QAM3F,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,CAAC;QACnD,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAEhC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAChE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YACxE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC7D;IACF,CAAC;IAED,SAAS,CAAC,KAAiB;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,MAAM,aAAa,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YAC3D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAClC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAChE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YACrE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,MAAM,IAAI,GAAW,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;YACxC,MAAM,OAAO,qBAAQ,IAAI,CAAC,OAAO,CAAE,CAAC;YACpC,MAAM,SAAS,GAAqB,GAAG,EAAE;gBACxC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;YACxD,CAAC,CAAC;YACF,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;SACzC;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;QACnD,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAChC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAChE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SACxE;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IAC9D,CAAC;IAEO,KAAK,CAAC,GAA6B,EAAE,IAAY,EAAE,OAAmB;QAC7E,MAAM,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC;QACpC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;QACxB,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;QAC7B,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;QAErG,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACzC,IAAI,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAC5C,IAAI,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YACpD,IAAI,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC;YAChE,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAExD,IAAI,OAAO,EAAE;gBACZ,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBACxC,MAAM,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAChD,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC;aAC5D;YACD,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE;gBACxB,IAAI,GAAG,GAAG,EAAU,CAAC;gBACrB,GAAG,GAAG,MAAM,CAAC;gBACb,MAAM,GAAG,MAAM,CAAC;gBAChB,MAAM,GAAG,GAAG,CAAC;aACb;YACD,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;SAC7D;QACD,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC;IAC/B,CAAC;IAEO,QAAQ,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY,EAAE,MAAY,EAAE,OAAgB,EAAE,OAAmB;QAC9H,MAAM,KAAK,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAClC,MAAM,QAAQ,GAAG,MAAM,CAAC,CAAC,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC;QAE7C,KAAK,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;YAC5C,MAAM,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,QAAQ,CAAC;YAE/B,IAAI,OAAO,EAAE;gBACZ,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;aACrF;iBAAM;gBACN,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;aACrF;SACD;IACF,CAAC;IAEO,SAAS;QAChB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACpB,CAAC;IAEO,UAAU,CAAC,GAA6B,EAAE,MAAY;QAC7D,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC;QAC1B,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;QAClB,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACzH,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;QACxB,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACxH,CAAC;;0EA7GW,aAAa;gGAAb,aAAa,WAAb,aAAa,mBAFb,MAAM;6FAEN,aAAa;cAHzB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AACd;;;AAKlD,MAAM,iBAAkB,SAAQ,sDAAI;IAQ1C,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QARN,gBAAW,GAAW,EAAE,CAAC;QACzB,gBAAW,GAAW,EAAE,CAAC;QAClC,WAAM,GAAqB,IAAI,KAAK,EAAE,CAAC;QAE/C,SAAI,GAAa,IAAI,+DAAQ,CAAC,aAAa,EAAE,YAAY,EAAE,GAAG,CAAC,CAAC;QAChE,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,yDAAM,CAAC,cAAc,CAAC,CAAC;QAIpF,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,8BAA8B,CAAC;IAClD,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,MAAM,QAAQ,GAAS,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;QAC5D,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QAE1F,IAAI,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,EAAE;YACtC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,yDAAM,CAAC,eAAe,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;SACvI;aAAM;YACN,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,yDAAM,CAAC,eAAe,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;SACxI;IACF,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,MAAM,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,oBAAoB,CAAsB,CAAC;QAClF,MAAM,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;QAEpE,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACzC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAEhE,MAAM,MAAM,GAAS,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;QAC1D,IAAI,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,EAAE;YACnI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;SACxD;IACF,CAAC;IAEO,QAAQ,CAAC,GAA6B,EAAE,QAAc;QAC7D,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;QACzD,MAAM,UAAU,GAA6B,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC;QAC5E,MAAM,OAAO,GAA6B,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;QAEtE,GAAG,CAAC,qBAAqB,GAAG,KAAK,CAAC;QAClC,GAAG,CAAC,qBAAqB,GAAG,KAAK,CAAC;QAElC,UAAU,CAAC,IAAI,EAAE,CAAC;QAElB,UAAU,CAAC,SAAS,EAAE,CAAC;QACvB,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;QAC9E,UAAU,CAAC,SAAS,EAAE,CAAC;QACvB,UAAU,CAAC,IAAI,EAAE,CAAC;QAClB,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3C,UAAU,CAAC,OAAO,EAAE,CAAC;QAErB,GAAG,CAAC,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,GAAG,MAAM,EAAE,QAAQ,CAAC,CAAC,GAAG,MAAM,EAAE,MAAM,GAAG,CAAC,EAAE,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC9I,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;QAE5C,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;QAClB,GAAG,CAAC,wBAAwB,GAAG,YAAY,CAAC;QAC5C,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC;QAC1B,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;IACrG,CAAC;IAEO,UAAU,CAAC,GAA6B,EAAE,QAAc;QAC/D,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;IAC3G,CAAC;;kFAlEW,iBAAiB;oGAAjB,iBAAiB,WAAjB,iBAAiB,mBAFjB,MAAM;6FAEN,iBAAiB;cAH7B,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;;;;;;;;;;;;ACV0C;AACgB;AAClB;AACS;AACI;AAEiB;AACT;;;AAKvD,MAAM,WAAY,SAAQ,sDAAI;IAapC,YAAsB,cAA8B;QACnD,KAAK,CAAC,cAAc,CAAC,CAAC;QADD,mBAAc,GAAd,cAAc,CAAgB;QAX5C,eAAU,GAAW,IAAI,KAAK,EAAQ,CAAC;QAC/C,SAAI,GAAa,IAAI,+DAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC;QACnD,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;QAG1F,QAAG,GAAa,CAAC,yDAAM,CAAC,sBAAsB,EAAE,yDAAM,CAAC,sBAAsB,EAAE,yDAAM,CAAC,sBAAsB,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7H,QAAG,GAAa,CAAC,yDAAM,CAAC,sBAAsB,EAAE,CAAC,EAAE,CAAC,EAAE,yDAAM,CAAC,sBAAsB,EAAE,CAAC,EAAE,yDAAM,CAAC,sBAAsB,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE7H,cAAS,GAA4B,IAAI,GAAG,EAAE,CAAC;QAKtD,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,8DAAW,CAAC,IAAI,EAAE,GAAG,EAAE;YACzC,IAAI,CAAC,aAAa,CACjB,IAAI,CAAC,cAAc,CAAC,OAAO,EAC3B,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,gBAAgB,CACrB,CAAC;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,8DAAW,CAAC,KAAK,EAAE,GAAG,EAAE;YAC1C,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5E,CAAC,CAAC,CAAC;IACJ,CAAC;IACO,aAAa,CAAC,GAA6B,EAAE,GAAc;QAClE,MAAM,KAAK,GAAG,GAAG,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;QACzD,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACzB,OAAO,KAAK,CAAC;IACd,CAAC;IACO,SAAS,CAAC,KAAwB;QACzC,MAAM,GAAG,GAAG,IAAI,iBAAiB,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;QACvD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,yDAAM,CAAC,YAAY,EAAE,CAAC,EAAE,EAAE;YAC7C,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;SAClB;QACD,OAAO,GAAG,CAAC;IACZ,CAAC;IACO,gBAAgB,CACvB,GAA6B;QAU7B,OAAO;YACN,GAAG;YACH,aAAa,oBAAO,IAAI,CAAC,aAAa,CAAE;YACxC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC;YACzC,UAAU,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;YAChC,aAAa,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;YACtC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC;YAClD,gBAAgB,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC;SACvD,CAAC;IACH,CAAC;IACD,aAAa;QACZ,MAAM,UAAU,GAAS,IAAI,CAAC,cAAc,CAAC,mBAAmB,EAAE,CAAC;QACnE,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE;YAC9D,OAAO,EAAE,CAAC,EAAE,yDAAM,CAAC,mBAAmB,EAAE,CAAC,EAAE,yDAAM,CAAC,mBAAmB,EAAE,CAAC;SACxE;QAED,OAAO,UAAU,CAAC;IACnB,CAAC;IAEO,kBAAkB,CAAC,aAA0B;QACpD,MAAM,KAAK,GAAW,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,mBAAmB,CAAC;QACnG,MAAM,MAAM,GAAW,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,yDAAM,CAAC,mBAAmB,CAAC;QACpG,IAAI,CAAC,aAAa,IAAI,aAAa,CAAC,MAAM,KAAK,KAAK,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,MAAM,EAAE;YAC3F,aAAa,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;SACtF;aAAM;YACN,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;gBAC/B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;oBAChC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;iBAC5B;aACD;SACD;QAED,OAAO,aAAa,CAAC;IACtB,CAAC;IAEO,WAAW,CAAC,KAAiB;QACpC,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;YACpC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAgB,EAAE,CAAC;YACnD,MAAM,IAAI,GAQN,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACvD,IAAI,MAAwB,CAAC;YAC7B,IAAI,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,EAAE;gBACtC,MAAM,GAAG,GAAG,EAAE;oBACb,IAAI,CAAC,aAAa,CACjB,IAAI,CAAC,GAAG,EACR,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,gBAAgB,CACrB,CAAC;gBACH,CAAC,CAAC;aACF;iBAAM;gBACN,MAAM,GAAG,GAAG,EAAE;oBACb,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC5E,CAAC,CAAC;aACF;YACD,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;SACtC;IACF,CAAC;IAEO,cAAc,CAAC,SAAoB,EAAE,gBAAmC,EAAE,SAA4B;QAC7G,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,gBAAgB,EAAE,SAAS,CAAC,CAAC;IAC9D,CAAC;IAEO,aAAa,CACpB,GAA6B,EAC7B,aAAmB,EACnB,SAA4B,EAC5B,UAAkB,EAClB,aAA0B,EAC1B,SAAoB,EACpB,gBAAmC;QAEnC,aAAa,GAAG,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC;QACvD,UAAU,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,SAAS,EAAE,UAAU,EAAE,aAAa,EAAE,GAAG,EAAE,SAAS,CAAC,CAAC;QAC1F,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,SAAS,EAAE,gBAAgB,EAAE,UAAU,CAAC,CAAC;IACpE,CAAC;IACO,YAAY,CAAC,GAA6B,EAAE,KAAW;QAC9D,OAAO,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAChF,CAAC;IACa,YAAY,CAAC,GAA6B,EAAE,SAAoB;;YAC7E,MAAM,GAAG,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACzC,CAAC;KAAA;IAED,SAAS,CAAC,KAAiB;QAC1B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjE,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;QAC1D,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACzC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAClE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QACxE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IACzB,CAAC;IAEO,QAAQ,CAAC,KAAW;QAC3B,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,yDAAM,CAAC,YAAY,CAAC;IAC3E,CAAC;IACO,OAAO,CAAC,KAAW,EAAE,SAAoB;QAChD,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACjC,MAAM,IAAI,GAAsB,IAAI,iBAAiB,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;QAC3E,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACpC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QACtC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QACtC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;QACtC,OAAO,IAAI,CAAC;IACb,CAAC;IAEO,QAAQ,CAAC,GAAW;QAC3B,MAAM,IAAI,GAAsB,IAAI,iBAAiB,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;QAC3E,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,yDAAM,CAAC,QAAQ,CAAC,CAAC;QAC7D,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,yDAAM,CAAC,QAAQ,CAAC,CAAC;QAC7D,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,yDAAM,CAAC,QAAQ,CAAC,CAAC;QAC7D,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,yDAAM,CAAC,QAAQ,CAAC,CAAC;QAE7D,OAAO,IAAI,CAAC;IACb,CAAC;IAEO,YAAY,CAAC,KAAa,EAAE,KAAwB;QAC3D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,sDAAG,CAAC,CAAC,CAAC,CAAC;QAC1C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,sDAAG,CAAC,CAAC,CAAC,CAAC;QAC5C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,sDAAG,CAAC,CAAC,CAAC,CAAC;QAC5C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,sDAAG,CAAC,CAAC,CAAC,CAAC;IAC7C,CAAC;IAEO,OAAO,CAAC,KAAW,EAAE,SAAoB,EAAE,SAA4B;QAC9E,OAAO,CACN,KAAK,CAAC,CAAC,IAAI,CAAC;YACZ,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;YAChC,KAAK,CAAC,CAAC,IAAI,CAAC;YACZ,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;YAChC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,SAAS,CAAC,EAAE,SAAS,CAAC,CAC7D,CAAC;IACH,CAAC;IAEO,eAAe,CAAC,SAAoB,EAAE,gBAAmC,EAAE,SAA4B;QAC9G,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,yDAAM,CAAC,YAAY,EAAE;YACpE,MAAM,IAAI,GAAsB,IAAI,iBAAiB,CAAC,yDAAM,CAAC,YAAY,CAAC,CAAC;YAC3E,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,GAAG,sDAAG,CAAC,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,GAAG,sDAAG,CAAC,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,GAAG,sDAAG,CAAC,CAAC,CAAC,CAAC;YAExC,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE;gBACxC,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,gBAAgB,CAAC,CAAC;aACvC;SACD;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;IAC3D,CAAC;IAEO,eAAe,CACtB,QAAc,EACd,SAA4B,EAC5B,UAAkB,EAClB,aAA0B,EAC1B,GAA6B,EAC7B,SAAoB;QAEpB,MAAM,KAAK,GAAgB,IAAI,wEAAK,EAAE,CAAC;QACvC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrB,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1B,UAAU,GAAG,EAAE,CAAC;SAChB;QAED,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACxB,MAAM,OAAO,GAAS,KAAK,CAAC,GAAG,EAAU,CAAC;YAC1C,IAAI,OAAO,CAAC,CAAC,GAAG,aAAa,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE;gBAC5E,MAAM;aACN;YACD,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,SAAS,CAAC,EAAE;gBACpE,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACzB;YAED,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAC3C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACzC,IAAI,QAAQ,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACzE,IAAI,QAAQ,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACzE,QAAQ,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC;gBACxF,QAAQ,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;gBAC1F,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,EAAE,SAAS,EAAE,SAAS,CAAC,EAAE;oBAC3G,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC;oBACzC,aAAa,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;iBACzC;qBAAM;oBACN,aAAa,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;iBACzC;aACD;SACD;IACF,CAAC;IAEO,aAAa,CAAC,KAAwB,EAAE,MAAyB;QACxE,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC;IACjF,CAAC;IAEO,YAAY,CAAC,IAAuB,EAAE,MAAyB;QACtE,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,sDAAG,CAAC,CAAC,CAAC,CAAC,GAAG,yDAAM,CAAC,aAAa,CAAC,CAAC;QAC1E,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,sDAAG,CAAC,CAAC,CAAC,CAAC,GAAG,yDAAM,CAAC,aAAa,CAAC,CAAC;QAC1E,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,sDAAG,CAAC,CAAC,CAAC,CAAC,GAAG,yDAAM,CAAC,aAAa,CAAC,CAAC;QAC1E,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,sDAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,sDAAG,CAAC,CAAC,CAAC,CAAC,GAAG,yDAAM,CAAC,aAAa,CAAC,CAAC;QAC1E,OAAO,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,yDAAM,CAAC,YAAY,CAAC,GAAG,yDAAM,CAAC,gBAAgB,CAAC;IAC9E,CAAC;IAEO,eAAe,CAAC,GAA6B,EAAE,SAAoB,EAAE,gBAAmC,EAAE,UAAkB;QACnI,KAAK,MAAM,KAAK,IAAI,UAAU,EAAE;YAC/B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,gBAAgB,CAAC,CAAC;SAC1D;QACD,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;QAClC,UAAU,GAAG,EAAE,CAAC;IACjB,CAAC;;sEA/QW,WAAW;8FAAX,WAAW,WAAX,WAAW,mBAFX,MAAM;6FAEN,WAAW;cAHvB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACa;AACf;AACS;AACI;AAEiB;AACF;;;AAErE,uFAAuF;AACvF,gFAAgF;AAChF,yDAAyD;AACzD,qEAAqE;AAI9D,MAAM,WAAY,SAAQ,sDAAI;IAUpC,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAVvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,MAAM,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;QACpD,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAG5C,aAAQ,GAAY,KAAK,CAAC;QAOnC,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAED,aAAa,CAAC,OAAsB,EAAE,MAAe;QACpD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACpB,OAAO;SACP;QAED,QAAQ,OAAO,CAAC,GAAG,EAAE;YACpB,KAAK,0DAAO,CAAC,SAAS,CAAC,CAAC;gBACvB,IAAI,MAAM,EAAE;oBACX,IAAI,CAAC,iBAAiB,EAAE,CAAC;iBACzB;gBACD,MAAM;aACN;YACD,KAAK,0DAAO,CAAC,KAAK,CAAC,CAAC;gBACnB,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,MAAM,EAAE;oBAC7B,IAAI,CAAC,IAAI,EAAE,CAAC;iBACZ;qBAAM;oBACN,IAAI,CAAC,MAAM,EAAE,CAAC;iBACd;gBACD,MAAM;aACN;YACD,KAAK,0DAAO,CAAC,MAAM,CAAC,CAAC;gBACpB,IAAI,MAAM,EAAE;oBACX,IAAI,CAAC,UAAU,EAAE,CAAC;oBAClB,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAChD;gBACD,MAAM;aACN;SACD;IACF,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IACnB,CAAC;IACS,iBAAiB;QAC1B,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7B,OAAO;SACP;QACD,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,aAAa,EAAE,CAAC;IACtB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,WAAW,CAAC;QACjE,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACrD,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;IACF,CAAC;IACS,WAAW,CAAC,KAAiB;QACtC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,MAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACtC,MAAM,QAAQ,GAAG,IAAI,CAAC,qBAAqB,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACvE,IAAI,QAAQ,GAAG,yDAAM,CAAC,SAAS,EAAE;YAChC,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,CAAC;YAE1B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SACjC;aAAM;YACN,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,CAAC;SAC1B;QAED,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAEtD,MAAM,IAAI,GAAW,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QACxC,MAAM,OAAO,qBAAQ,IAAI,CAAC,OAAO,CAAE,CAAC;QACpC,OAAO,CAAC,WAAW,GAAG,IAAI,qEAAW,EAAE,CAAC;QACxC,OAAO,CAAC,WAAW,CAAC,iBAAiB,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC;QACnF,OAAO,CAAC,WAAW,CAAC,iBAAiB,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC;QACnF,MAAM,IAAI,GAAG;YACZ,GAAG,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO;YAChC,UAAU,EAAE,IAAI;YAChB,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY;YACvC,OAAO;YACP,UAAU,oBAAO,OAAO,CAAC,WAAW,CAAE;SACtC,CAAC;QAEF,MAAM,IAAI,GAAqB,GAAG,EAAE;YACnC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,EAAU,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QACnG,CAAC,CAAC;QACF,IAAI,EAAE,CAAC;QACP,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,MAAM,EAAE,CAAC;IACf,CAAC;IAES,aAAa;QACtB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IAC3H,CAAC;IAEO,eAAe,CAAC,GAA6B,EAAE,IAAY,EAAE,WAAwB;QAC5F,KAAK,MAAM,KAAK,IAAI,IAAI,EAAE;YACzB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,EAAE,WAAW,CAAC,CAAC;SACpD;IACF,CAAC;IACO,UAAU,CAAC,CAAS,EAAE,CAAS,EAAE,GAA6B,EAAE,WAAwB;QAC/F,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,iBAAiB,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;QACnE,GAAG,CAAC,IAAI,EAAE,CAAC;IACZ,CAAC;IAES,IAAI;QACb,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACxF,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC7B,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;IACF,CAAC;IACS,MAAM;QACf,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAC9B,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7B,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;IACF,CAAC;IAES,uBAAuB,CAAC,QAAc,EAAE,IAAc,EAAE,QAAc;QAC/E,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB;QACrC,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QAClB,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QAElB,IAAI,QAAQ,CAAC;QACb,IAAI,OAAO,CAAC;QACZ,IAAI,CAAC,KAAK,CAAC,EAAE;YACZ,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC;YACtB,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC;SACrB;aAAM,IAAI,CAAC,KAAK,CAAC,EAAE;YACnB,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC;YACtB,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC;SACrB;aAAM;YACN,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC;YACtB,OAAO,GAAG,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;SACpC;QACD,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAU,CAAC;IAC5C,CAAC;IAES,QAAQ,CAAC,GAA6B,EAAE,IAAY,EAAE,WAAiB,EAAE,KAAa,EAAE,mBAAmB,CAAC,OAAmB;QACxI,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;YACtB,OAAO;SACP;QAED,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;QAC7B,GAAG,CAAC,OAAO,GAAG,OAAO,CAAC;QACtB,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;QACvB,GAAG,CAAC,WAAW,GAAG,KAAK,CAAC;QACxB,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,KAAK,MAAM,KAAK,IAAI,IAAI,EAAE;YACzB,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;SAC7B;QACD,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;QACzC,GAAG,CAAC,MAAM,EAAE,CAAC;QACb,IAAI,OAAO,CAAC,WAAW,CAAC,iBAAiB,EAAE;YAC1C,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,IAAI,EAAE,OAAO,CAAC,WAAW,CAAC,CAAC;SACrD;IACF,CAAC;IACS,iBAAiB,CAAC,OAAgB;QAC3C,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;IACzB,CAAC;IACS,UAAU;QACnB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACxB,CAAC;IAEO,qBAAqB,CAAC,MAAY,EAAE,MAAY;QACvD,MAAM,CAAC,GAAW,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACnD,MAAM,CAAC,GAAW,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACnD,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IACzB,CAAC;IAES,SAAS;QAClB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACpB,CAAC;IAES,SAAS;QAClB,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC9C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACjH,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC;SAC7B;aAAM;YACN,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;SAC5B;IACF,CAAC;IACD,aAAa,CAAC,KAAiB;QAC9B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IACzB,CAAC;IACS,KAAK,CAAC,KAAiB;QAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAS,CAAC;QACzD,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAChC,IAAI,CAAC,aAAa,EAAE,CAAC;IACtB,CAAC;IACO,0BAA0B,CAAC,KAAW,EAAE,IAAc;QAC7D,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACtE,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACjE,OAAO,GAAG,GAAG,OAAO,CAAC;IACtB,CAAC;IAES,cAAc,CAAC,YAAkB,EAAE,SAAe;QAC3D,MAAM,QAAQ,GAAG,CAAC,GAAG,yDAAM,CAAC,SAAS,CAAC,CAAC;QACvC,QAAQ,CAAC,iEAAc,CAAC,cAAc,CAAC,CAAC,GAAG,EAAE,CAAC;QAC9C,QAAQ,CAAC,iEAAc,CAAC,YAAY,CAAC,CAAC,GAAG,EAAE,CAAC;QAC5C,QAAQ,CAAC,iEAAc,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC;QACxC,QAAQ,CAAC,iEAAc,CAAC,UAAU,CAAC,CAAC,GAAG,EAAE,CAAC;QAC1C,QAAQ,CAAC,iEAAc,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3E,QAAQ,CAAC,iEAAc,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QACzE,QAAQ,CAAC,iEAAc,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QACrD,QAAQ,CAAC,iEAAc,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QAEvD,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC,CAAC;QAC7F,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC;QAC1C,MAAM,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAC/C,OAAO,QAAQ,CAAC,QAAQ,CAAC,CAAC;IAC3B,CAAC;;sEA1OW,WAAW;8FAAX,WAAW,WAAX,WAAW,mBAFX,MAAM;6FAEN,WAAW;cAHvB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACfD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AACtB;;;AAEjD,uFAAuF;AACvF,gFAAgF;AAChF,yDAAyD;AACzD,qEAAqE;AAI9D,MAAM,aAAc,SAAQ,sDAAI;IAKtC,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAJvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;QACvD,YAAO,GAAe,IAAI,mEAAU,EAAE,CAAC;QAItC,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,CAAC;QACnD,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACzB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YAC3D,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SACpF;IACF,CAAC;IACO,UAAU,CAAC,SAAe,EAAE,GAA6B,EAAE,IAAY;QAC9E,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACrB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;IACxH,CAAC;IAED,SAAS,CAAC,KAAiB;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,MAAM,aAAa,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YAC3D,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC3E,MAAM,IAAI,GAAW,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;YACxC,MAAM,IAAI,GAAG,EAAE,OAAO,oBAAO,IAAI,CAAC,OAAO,CAAE,EAAE,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,CAAC;YACvF,MAAM,IAAI,GAAqB,GAAG,EAAE;gBACnC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YAC5E,CAAC,CAAC;YACF,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;SACpC;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACzB,MAAM,aAAa,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YAC3D,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC9E;IACF,CAAC;IAEO,aAAa;QACpB,OAAO,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAEO,QAAQ,CAAC,GAA6B,EAAE,IAAY,EAAE,OAAmB,EAAE,KAAa,CAAC,mBAAmB;QACnH,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;QAC7B,GAAG,CAAC,OAAO,GAAG,OAAO,CAAC;QACtB,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;QACvB,GAAG,CAAC,WAAW,GAAG,KAAK,CAAC;QACxB,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,KAAK,MAAM,KAAK,IAAI,IAAI,EAAE;YACzB,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;SAC7B;QACD,GAAG,CAAC,MAAM,EAAE,CAAC;IACd,CAAC;IAEO,SAAS;QAChB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACpB,CAAC;;0EAhEW,aAAa;gGAAb,aAAa,WAAb,aAAa,mBAFb,MAAM;6FAEN,aAAa;cAHzB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACdD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACG;AACL;AACS;AACI;AAEiB;AACL;;;AAK3D,MAAM,eAAgB,SAAQ,sDAAI;IAWxC,kBAAkB;IAClB,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAZvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,UAAU,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC;QAC3D,YAAO,GAAe,IAAI,mEAAU,CAAC,yDAAM,CAAC,uBAAuB,CAAC,CAAC;QAGrE,WAAM,GAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QAC9B,mBAAc,GAAW,IAAI,KAAK,CAAO,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;QAGnF,qBAAgB,GAAW,CAAC,CAAC,CAAC;IAK9B,CAAC;IAED,aAAa,CAAC,OAAsB;QACnC,IAAI,OAAO,CAAC,GAAG,KAAK,0DAAO,CAAC,MAAM,EAAE;YACnC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;SAChE;IACF,CAAC;IAED,wBAAwB;IACxB,aAAa;QACZ,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAEhE,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,YAAY,CAChB,IAAI,CAAC,cAAc,CAAC,UAAU,EAC9B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,EACpC,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAC9B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EACjC,IAAI,CAAC,OAAO,CAAC,IAAI,EACjB,IAAI,CAAC,cAAc,CAAC,YAAY,EAChC,IAAI,CAAC,cAAc,CAAC,cAAc,CAClC,CAAC;IACH,CAAC;IAED,qBAAqB;IACrB,UAAU;QACT,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,MAAM,MAAM,GAAG;YACd,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU;YAChD,aAAa,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;YACvC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI;YACpC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO;YAC1C,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI;YACvB,YAAY,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY;YAC9C,cAAc,EAAE,IAAI,CAAC,cAAc,CAAC,cAAc;SAClD,CAAC;QACF,MAAM,IAAI,GAAqB,GAAG,EAAE;YACnC,IAAI,CAAC,YAAY,CAChB,IAAI,CAAC,cAAc,CAAC,OAAO,EAC3B,MAAM,CAAC,UAAU,EACjB,MAAM,CAAC,aAAa,EACpB,MAAM,CAAC,IAAI,EACX,MAAM,CAAC,OAAO,EACd,MAAM,CAAC,IAAI,EACX,MAAM,CAAC,YAAY,EACnB,MAAM,CAAC,cAAc,CACrB,CAAC;QACH,CAAC,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,YAAY,CAChB,IAAI,CAAC,cAAc,CAAC,OAAO,EAC3B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,EACpC,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAC9B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EACjC,IAAI,CAAC,OAAO,CAAC,IAAI,EACjB,IAAI,CAAC,cAAc,CAAC,YAAY,EAChC,IAAI,CAAC,cAAc,CAAC,cAAc,CAClC,CAAC;IACH,CAAC;IAED,8GAA8G;IAC9G,kEAAkE;IAClE,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,CAAC;QAEnD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE;YAC1E,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC;SACzC;QAED,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;SACnD;IACF,CAAC;IAED,yFAAyF;IACzF,SAAS,CAAC,KAAiB;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAChE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,UAAU,EAAE,CAAC;SAClB;IACF,CAAC;IAED,gGAAgG;IAChG,WAAW,CAAC,KAAiB;QAC5B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YAEnD,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YACpE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;YAEvF,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;YACzB,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;IACF,CAAC;IAED,4BAA4B;IAC5B,eAAe;QACd,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAE5D,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE;YACtC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;SACxD;aAAM;YACN,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;SAChC;IACF,CAAC;IAED,0DAA0D;IAC1D,iBAAiB;QAChB,MAAM,SAAS,GAAW,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC;QAC/E,IAAI,cAAsB,CAAC;QAC3B,IAAI,cAAsB,CAAC;QAE3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YAClE,IAAI,YAAoB,CAAC;YAEzB,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE;gBACtC,YAAY,GAAG,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;aAC3C;iBAAM;gBACN,YAAY,GAAG,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;aAC3C;YAED,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YACtE,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAEtE,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,cAAc,EAAE,CAAC,EAAE,cAAc,EAAE,CAAC;SAClE;IACF,CAAC;IAED,YAAY,CACX,GAA6B,EAC7B,UAAkB,EAClB,cAAsB,EACtB,IAAa,EACb,OAAgB,EAChB,IAAY,EACZ,YAAoB,EACpB,cAAsB;QAEtB,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;QACvB,GAAG,CAAC,SAAS,GAAG,YAAY,CAAC;QAC7B,GAAG,CAAC,WAAW,GAAG,cAAc,CAAC;QACjC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QAEpB,IAAI,UAAU,IAAI,yDAAM,CAAC,uBAAuB,IAAI,UAAU,IAAI,yDAAM,CAAC,mBAAmB,EAAE;YAC7F,MAAM,KAAK,GAAG,IAAI,MAAM,EAAE,CAAC;YAC3B,MAAM,SAAS,GAAG,IAAI,MAAM,EAAE,CAAC;YAC/B,MAAM,QAAQ,GAAW,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC;YAEtG,GAAG,CAAC,SAAS,EAAE,CAAC;YAEhB,IAAI,IAAI,EAAE;gBACT,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;oBACxB,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE;wBAC7B,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;qBACnC;iBACD;gBACD,SAAS,CAAC,SAAS,EAAE,CAAC;gBACtB,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;gBAC/B,IAAI,CAAC,OAAO,EAAE;oBACb,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;iBAC3B;aACD;YACD,IAAI,OAAO,EAAE;gBACZ,KAAK,MAAM,KAAK,IAAI,cAAc,EAAE;oBACnC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;iBAC/B;gBACD,KAAK,CAAC,SAAS,EAAE,CAAC;gBAClB,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;aAClB;SACD;IACF,CAAC;IAED,iCAAiC;IACjC,qBAAqB;QACpB,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;QAE3C,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,GAAG,MAAM,CAAC;YACpD,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,SAAS,GAAG,yDAAM,CAAC,eAAe,CAAC;YAClE,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,yDAAM,CAAC,cAAc,CAAC,CAAC,CAAC;YAEpE,SAAS;YACT,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;YAC9H,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;SACxC;QACD,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;IAC5C,CAAC;IAEO,qBAAqB,CAAC,MAAY,EAAE,MAAY;QACvD,MAAM,CAAC,GAAW,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACnD,MAAM,CAAC,GAAW,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACnD,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IACzB,CAAC;IAED,UAAU,CAAC,SAAiB;QAC3B,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QACvE,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YAC9B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC;SAC1C;QACD,OAAO,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,YAAY,CAAC;IACnD,CAAC;IAED,sBAAsB,CAAC,QAAgB,EAAE,IAAY;QACpD,MAAM,SAAS,GAAW,EAAY,CAAC;QACvC,IAAI,cAAc,GAAW,EAAE,CAAC;QAEhC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YAC7C,SAAS,CAAC,IAAI,CAAC,IAAI,2DAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;SACjE;QACD,IAAI,MAAM,CAAC;QACX,IAAI,MAAM,CAAC;QACX,IAAI,MAAM,CAAC;QACX,IAAI,MAAM,CAAC;QAEX,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;YAC1D,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;YAE3D,IAAI,cAAc,GAAS,EAAU,CAAC;YACtC,IAAI,CAAC,KAAK,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC/B,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBAC1D,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;gBAC3D,MAAM,UAAU,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;gBAE7E,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aAChC;iBAAM;gBACN,MAAM,GAAG,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBAClE,MAAM,GAAG,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;aACnE;YACD,cAAc,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;YAC3E,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SACpC;QAED,IAAI,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,EAAE;YACpC,cAAc,GAAG,EAAE,CAAC;SACpB;aAAM;YACN,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;SACvC;QAED,OAAO,cAAc,CAAC;IACvB,CAAC;;8EAxQW,eAAe;kGAAf,eAAe,WAAf,eAAe,mBAFf,MAAM;6FAEN,eAAe;cAH3B,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AACb;;;AAKnD,MAAM,gBAAiB,SAAQ,sDAAI;IAOzC,kBAAkB;IAClB,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QARvB,SAAI,GAAa,IAAI,+DAAQ,CAAC,WAAW,EAAE,WAAW,EAAE,GAAG,CAAC,CAAC;QAC7D,YAAO,GAAe,IAAI,mEAAU,CAAC,CAAC,CAAC,CAAC;QACxC,cAAS,GAAY,KAAK,CAAC;IAO3B,CAAC;IAED,8DAA8D;IAC9D,aAAa,CAAC,OAAsB;QACnC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACpB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,OAAO;SACP;QAED,IAAI,OAAO,CAAC,GAAG,KAAK,0DAAO,CAAC,KAAK,EAAE;YAClC,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;aAAM,IAAI,OAAO,CAAC,GAAG,KAAK,0DAAO,CAAC,MAAM,EAAE;YAC1C,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;SAChE;IACF,CAAC;IAED,4DAA4D;IAC5D,aAAa;QACZ,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAEhE,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,UAAU,CACd,IAAI,CAAC,cAAc,CAAC,UAAU,EAC9B,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,cAAc,CAAC,YAAY,EAChC,IAAI,CAAC,cAAc,CAAC,cAAc,CAClC,CAAC;SACF;aAAM;YACN,IAAI,CAAC,aAAa,CACjB,IAAI,CAAC,cAAc,CAAC,UAAU,EAC9B,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,cAAc,CAAC,YAAY,EAChC,IAAI,CAAC,cAAc,CAAC,cAAc,CAClC,CAAC;SACF;IACF,CAAC;IAED,yDAAyD;IACzD,UAAU;QACT,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,MAAM,OAAO,qBAAQ,IAAI,CAAC,OAAO,CAAE,CAAC;QACpC,OAAO,CAAC,YAAY,qBAAQ,IAAI,CAAC,OAAO,CAAC,YAAY,CAAE,CAAC;QACxD,MAAM,MAAM,qBAAQ,IAAI,CAAC,MAAM,CAAE,CAAC;QAClC,MAAM,MAAM,qBAAQ,IAAI,CAAC,MAAM,CAAE,CAAC;QAClC,MAAM,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC;QAClD,MAAM,UAAU,GAAqB,GAAG,EAAE;YACzC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QACvF,CAAC,CAAC;QAEF,MAAM,QAAQ,GAAqB,GAAG,EAAE;YACvC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QAC1F,CAAC,CAAC;QACF,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,UAAU,EAAE,CAAC;YACb,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;SAC1C;aAAM;YACN,QAAQ,EAAE,CAAC;YACX,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;SACxC;IACF,CAAC;IAED,+GAA+G;IAC/G,kEAAkE;IAClE,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,CAAC;QAEnD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE;YAC1E,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC;SACzC;QAED,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;SACnD;IACF,CAAC;IAED,yFAAyF;IACzF,SAAS,CAAC,KAAiB;QAC1B,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,UAAU,EAAE,CAAC;SAClB;QAED,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACxB,CAAC;IAED,gGAAgG;IAChG,WAAW,CAAC,KAAiB;QAC5B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;IACF,CAAC;IAED,uBAAuB,CAAC,MAAY,EAAE,MAAY;QACjD,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE;YACxB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;SACzC;aAAM;YACN,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;SACzC;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE;YACxB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;SACzC;aAAM;YACN,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;SACzC;QACD,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;IACjB,CAAC;IAED,aAAa,CAAC,MAAY,EAAE,MAAY,EAAE,OAAmB;QAC5D,MAAM,MAAM,GAAG,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QAC5D,MAAM,SAAS,GAAG,EAAU,CAAC;QAC7B,MAAM,SAAS,GAAG,EAAU,CAAC;QAC7B,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,IAAI,EAAE;YACnG,OAAO,EAAY,CAAC;SACpB;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE;YACxB,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;YAC1C,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;SAC1C;aAAM;YACN,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;YAC1C,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;SAC1C;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE;YACxB,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;YAC1C,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;SAC1C;aAAM;YACN,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;YAC1C,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;SAC1C;QACD,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;IAC/B,CAAC;IAED,6DAA6D;IAC7D,aAAa,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY,EAAE,OAAmB,EAAE,KAAa,EAAE,QAAgB;QAC5H,gDAAgD;QAChD,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC3B,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;QAC7B,GAAG,CAAC,OAAO,GAAG,QAAQ,CAAC;QACvB,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;QAEvB,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE;YACjC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;SAC7E;QAED,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE;YAC9B,IAAI,SAAS,GAAG,EAAU,CAAC;YAC3B,IAAI,SAAS,GAAG,EAAU,CAAC;YAC3B,MAAM,SAAS,GAAW,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;YACtE,SAAS,GAAG,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,EAAW,CAAC;YACjE,SAAS,GAAG,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,EAAW,CAAC;YACjE,GAAG,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;SAC7F;IACF,CAAC;IAED,yDAAyD;IACzD,UAAU,CAAC,GAA6B,EAAE,MAAY,EAAE,MAAY,EAAE,OAAmB,EAAE,KAAa,EAAE,QAAgB;QACzH,4CAA4C;QAC5C,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,GAAG,CAAC,OAAO,GAAG,QAAQ,CAAC;QACvB,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;QACvB,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC3B,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;QAC7B,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC3B,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;QAC7B,IAAI,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE;YACjC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SACxH;QACD,IAAI,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE;YAC9B,IAAI,SAAS,GAAG,EAAU,CAAC;YAC3B,IAAI,SAAS,GAAG,EAAU,CAAC;YAC3B,MAAM,SAAS,GAAW,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;YACtE,SAAS,GAAG,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,EAAW,CAAC;YACjE,SAAS,GAAG,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,EAAW,CAAC;YACjE,GAAG,CAAC,QAAQ,CACX,SAAS,CAAC,CAAC,EACX,SAAS,CAAC,CAAC,EACX,SAAS,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EACzB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAC1E,CAAC;SACF;IACF,CAAC;;gFA1MW,gBAAgB;mGAAhB,gBAAgB,WAAhB,gBAAgB,mBAFhB,MAAM;6FAEN,gBAAgB;cAH5B,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEiB;AACd;;;AAKlD,MAAM,YAAa,SAAQ,sDAAI;IAOrC,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QANf,cAAS,GAAW,EAAE,CAAC;QAE/B,SAAI,GAAa,IAAI,+DAAQ,CAAC,OAAO,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;QACvD,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QAI5D,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI,CAAC;QACnD,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACzB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YAC3D,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,GAAG,EAAE;gBAC7B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACrF,CAAC,EAAE,yDAAM,CAAC,UAAU,CAAC,CAAC;SACtB;IACF,CAAC;IAEO,UAAU,CAAC,SAAe,EAAE,GAA6B,EAAE,IAAY;QAC9E,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACrB,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QAE9B,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,MAAM,OAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QACnE,OAAO,CAAC,YAAY,qBAAQ,IAAI,CAAC,OAAO,CAAC,YAAY,CAAE,CAAC;QACxD,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;QACjC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;IAC/E,CAAC;IAEO,aAAa,CAAC,KAAW;QAChC,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC;QACnD,MAAM,WAAW,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,GAAG,yDAAM,CAAC,UAAU,CAAC,GAAG,yDAAM,CAAC,SAAS,CAAC;QACjG,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE;YACrC,MAAM,MAAM,GAAS,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YACrD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC5B;IACF,CAAC;IAEO,WAAW,CAAC,MAAc,EAAE,MAAY;QAC/C,SAAS;YACR,MAAM,CAAC,GAAW,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,GAAW,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;YACxC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;gBACvB,OAAO,EAAE,CAAC,EAAE,MAAM,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,EAAU,CAAC;aACtE;SACD;IACF,CAAC;IAED,SAAS,CAAC,KAAiB;QAC1B,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,MAAM,aAAa,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YAC3D,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC3E,MAAM,IAAI,GAAW,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;YACzC,MAAM,IAAI,GAAG,EAAE,OAAO,oBAAO,IAAI,CAAC,OAAO,CAAE,EAAE,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,CAAC;YACvF,IAAI,CAAC,OAAO,CAAC,YAAY,qBAAQ,IAAI,CAAC,OAAO,CAAC,YAAY,CAAE,CAAC;YAC7D,MAAM,IAAI,GAAqB,GAAG,EAAE;gBACnC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YAC5E,CAAC,CAAC;YACF,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;SACpC;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,WAAW,CAAC;QACjE,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACzB,MAAM,aAAa,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YAC3D,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;SACpC;IACF,CAAC;IAEO,aAAa;QACpB,OAAO,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAEO,QAAQ,CAAC,GAA6B,EAAE,IAAY,EAAE,OAAmB,EAAE,KAAa;QAC/F,GAAG,CAAC,OAAO,GAAG,OAAO,CAAC;QACtB,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;QACvB,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;YACvB,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,YAAY,CAAC,WAAW,EAAE,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;SAC/F;IACF,CAAC;IAEO,SAAS;QAChB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACrB,CAAC;;wEA/FW,YAAY;+FAAZ,YAAY,WAAZ,YAAY,mBAFZ,MAAM;6FAEN,YAAY;cAHxB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACF;AACS;AACI;AAEG;AACiB;;;AAKnE,MAAM,YAAa,SAAQ,sDAAI;IAOrC,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAPN,kCAA6B,GAAW,EAAE,CAAC;QAC3C,oBAAe,GAAW,GAAG,CAAC;QAE/C,SAAI,GAAa,IAAI,+DAAQ,CAAC,OAAO,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;QACrD,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,yDAAM,CAAC,cAAc,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;IAIhH,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAEhE,MAAM,GAAG,GAAS,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;QACvD,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAAE,OAAO;QAE7H,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAC1C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;IACzG,CAAC;IAED,WAAW,CAAC,KAAiB;QAC5B,IAAI,KAAK,CAAC,MAAM,KAAK,8DAAW,CAAC,IAAI;YAAE,OAAO;QAE9C,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAChE,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAC1C,MAAM,GAAG,GAAS,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;QACvD,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC;QAC1D,MAAM,iBAAiB,GAAqB,GAAG,EAAE;YAChD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;QAC5E,CAAC,CAAC;QACF,iBAAiB,EAAE,CAAC;QACpB,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC;IAClD,CAAC;IAED,OAAO,CAAC,KAAiB;QACxB,IAAI,eAAe,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC;QAC5E,4CAA4C;QAC5C,eAAe,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE7C,MAAM,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC;QAC7D,MAAM,cAAc,GAAG,cAAc,GAAG,eAAe,CAAC;QACxD,IAAI,cAAc,GAAG,CAAC,EAAE;YACvB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,GAAG,CAAC,CAAC;SAC1C;aAAM,IAAI,cAAc,GAAG,IAAI,CAAC,eAAe,EAAE;YACjD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC;SAC7D;aAAM;YACN,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,GAAG,cAAc,CAAC;SACvD;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,KAAK,cAAc;YAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IACvF,CAAC;IAEO,YAAY;QACnB,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QAC1B,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC;QAC/C,MAAM,IAAI,GAAS;YAClB,CAAC,EAAE,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,aAAa;YACxD,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,aAAa;SACzD,CAAC;QAEF,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IACtB,CAAC;IAEO,SAAS,CAAC,GAA6B,EAAE,KAAuB,EAAE,GAAS,EAAE,IAAU,EAAE,WAAmB;QACnH,GAAG,CAAC,IAAI,EAAE,CAAC;QACX,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QAC5B,wDAAwD;QACxD,4CAA4C;QAC5C,GAAG,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAC/D,GAAG,CAAC,OAAO,EAAE,CAAC;IACf,CAAC;;wEAxEW,YAAY;+FAAZ,YAAY,WAAZ,YAAY,mBAFZ,MAAM;6FAEN,YAAY;cAHxB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AAEO;AACI;AAEV;AACA;AAC8B;;;AAKnE,MAAM,WAAY,SAAQ,yDAAI;IAepC,YAAY,cAA8B;QACzC,KAAK,CAAC,cAAc,CAAC,CAAC;QAfN,2BAAsB,GAAW,CAAC,CAAC;QACpD,4CAA4C;QAC3B,yBAAoB,GAAW,CAAC,GAAG,CAAC,CAAC;QAEtD,SAAI,GAAa,IAAI,+DAAQ,CAAC,MAAM,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;QACpD,YAAO,GAAe,IAAI,mEAAU,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,yDAAM,CAAC,cAAc,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QACzG,cAAS,GAAY,KAAK,CAAC;QAEnB,eAAU,GAAW,CAAC,CAAC;QAEvB,SAAI,GAAW,EAAE,CAAC;QAElB,eAAU,GAA4B,IAAI,GAAG,EAAsB,CAAC;QAI3E,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE/C,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,EAAE;YACrC,IAAI,CAAC,cAAc,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,EAAE;YAClC,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,YAAY,EAAE,GAAG,EAAE;YACtC,IAAI,CAAC,eAAe,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,EAAE;YACrC,IAAI,CAAC,cAAc,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,EAAE;YACnC,IAAI,CAAC,YAAY,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,EAAE;YACrC,IAAI,CAAC,cAAc,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,EAAE;YAClC,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,WAAW,CAAC,KAAiB,EAAE,cAAwB;QACtD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACpB,KAAK,CAAC,eAAe,EAAE,CAAC;YAExB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACrD,IAAI,CAAC,WAAW,EAAE,CAAC;YAEnB,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC9D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SAC9D;aAAM,IAAI,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,EAAE;YACxC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC5C,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;gBACvB,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;gBAC7B,MAAM,WAAW,qBAAQ,IAAI,CAAC,OAAO,CAAC,WAAW,CAAE,CAAC;gBACpD,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC;gBAC/C,MAAM,gBAAgB,GAAqB,GAAG,EAAE;oBAC/C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;gBAC/E,CAAC,CAAC;gBACF,gBAAgB,EAAE,CAAC;gBACnB,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;aAChD;YAED,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAChE,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;YACf,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YAEpB,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YACjE,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SACjE;aAAM;YACN,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SAC5D;IACF,CAAC;IAEO,WAAW;QAClB,UAAU,CAAC,GAAG,EAAE;YACf,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;QACH,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;IAChE,CAAC;IAEO,gBAAgB,CAAC,KAAiB;QACzC,IAAI,SAAS,GAAG,IAAI,CAAC;QAErB,MAAM,eAAe,GAAG,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAmB,CAAC;QACtF,MAAM,WAAW,GAAG,QAAQ,CAAC,sBAAsB,CAAC,cAAc,CAAC,CAAC,CAAC,CAAmB,CAAC;QACzF,SAAS;YACR,CAAC,CACA,KAAK,CAAC,CAAC,IAAI,eAAe,CAAC,UAAU;gBACrC,KAAK,CAAC,CAAC,IAAI,eAAe,CAAC,UAAU,GAAG,eAAe,CAAC,WAAW;gBACnE,KAAK,CAAC,CAAC,IAAI,eAAe,CAAC,SAAS;gBACpC,KAAK,CAAC,CAAC,IAAI,eAAe,CAAC,SAAS,GAAG,eAAe,CAAC,YAAY,CACnE,IAAI,WAAW,KAAK,SAAS,CAAC;QAEhC,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,aAAa,CAAC,KAAoB;QACjC,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;YAClC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAgB,EAAE,CAAC;SACjD;aAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE;YACvC,MAAM,IAAI,GAAW,KAAK,CAAC,GAAG,KAAK,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC;YAC9D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC5G,IAAI,CAAC,UAAU,EAAE,CAAC;SAClB;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;IACpB,CAAC;IAEO,cAAc,CAAC,KAAoB;QAC1C,MAAM,aAAa,GAAa;YAC/B,UAAU;YACV,OAAO;YACP,MAAM;YACN,KAAK;YACL,SAAS;YACT,KAAK;YACL,UAAU;YACV,aAAa;YACb,MAAM;YACN,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,KAAK;YACL,KAAK;YACL,KAAK;SACL,CAAC;QACF,OAAO,aAAa,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC1C,CAAC;IAEO,cAAc;QACrB,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC7G,IAAI,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACtC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;YACpB,IAAI,CAAC,UAAU,EAAE,CAAC;SAClB;IACF,CAAC;IAEO,WAAW;QAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC1G,CAAC;IAEO,eAAe;QACtB,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,IAAI,CAAC,UAAU,EAAE,CAAC;IAChE,CAAC;IAEO,cAAc;QACrB,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC;YAAE,IAAI,CAAC,UAAU,EAAE,CAAC;IACjD,CAAC;IAEO,YAAY;QACnB,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACpC,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAC9B,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YACnB,QAAQ,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,EAAE;gBAC3C,KAAK,MAAM;oBACV,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;oBACpG,MAAM;gBACP,KAAK,QAAQ;oBACZ,MAAM,MAAM,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBAC3D,IAAI,CAAC,UAAU;wBACd,IAAI,CAAC,UAAU;4BACf,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,MAAM;gCAC9D,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM;gCAC5F,CAAC,CAAC,CAAC;oBACL,MAAM;gBACP,KAAK,OAAO;oBACX,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;oBACtH,MAAM;aACP;SACD;IACF,CAAC;IAEO,cAAc;QACrB,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACpC,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAC9B,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM;YAC3B,QAAQ,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,EAAE;gBAC3C,KAAK,MAAM;oBACV,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBAClI,MAAM;gBACP,KAAK,QAAQ;oBACZ,MAAM,MAAM,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBAC3D,IAAI,CAAC,UAAU;wBACd,IAAI,CAAC,UAAU;4BACf,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,MAAM;4BAC3D,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM;4BAC/F,CAAC,CAAC;oBACH,MAAM;gBACP,KAAK,OAAO;oBACX,IAAI,CAAC,UAAU;wBACd,IAAI,CAAC,UAAU;4BACf,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM;4BAChC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;4BACvE,CAAC,CAAC;oBACH,MAAM;aACP;IACH,CAAC;IAEO,WAAW;QAClB,IAAI,CAAC,WAAW,CAAC,IAAI,UAAU,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAC;IACrD,CAAC;IAEO,UAAU;QACjB,MAAM,KAAK,GAAa,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAE9C,IAAI,YAAY,GAAG,EAAE,CAAC,EAAE,yDAAM,CAAC,cAAc,EAAE,CAAC,EAAE,yDAAM,CAAC,cAAc,EAAE,CAAC;QAC1E,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YAC7B,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC;YAC/B,IAAI,IAAI,CAAC,UAAU,IAAI,OAAO,IAAI,IAAI,CAAC,UAAU,IAAI,OAAO,GAAG,UAAU,EAAE;gBAC1E,YAAY,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,GAAG,OAAO,EAAE,CAAC;aAC1D;YAED,OAAO,IAAI,UAAU,GAAG,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;QACH,OAAO,YAAY,CAAC;IACrB,CAAC;IAEO,WAAW;QAClB,MAAM,GAAG,GAA6B,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC;QACrE,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QAErC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;QACxB,GAAG,CAAC,QAAQ,CACX,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,sBAAsB,GAAG,CAAC,EAChD,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,sBAAsB,GAAG,CAAC,EAChD,IAAI,CAAC,sBAAsB,EAC3B,IAAI,CAAC,sBAAsB,CAC3B,CAAC;QAEF,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QACpC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;IACpH,CAAC;IAEO,QAAQ,CAAC,GAA6B,EAAE,IAAY,EAAE,GAAS,EAAE,WAAwB,EAAE,KAAa,EAAE,SAAgB;QACjI,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,GAAG,CAAC,SAAS,GAAG,WAAW,CAAC,SAA4B,CAAC;QAEzD,IAAI,UAAU,GAAG,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;QACvD,UAAU,IAAI,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;QAChD,GAAG,CAAC,IAAI,GAAG,UAAU,GAAG,GAAG,GAAG,WAAW,CAAC,QAAQ,GAAG,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC;QAE9E,MAAM,KAAK,GAAa,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAEzC,IAAI,WAAW,GAAG,CAAC,CAAC;QACpB,IAAI,UAAU,GAAG,CAAC,CAAC;QAEnB,IAAI,WAAW,CAAC,SAAS,KAAK,MAAM,EAAE;YACrC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;gBACtB,MAAM,SAAS,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC;gBAC9C,IAAI,SAAS,GAAG,UAAU;oBAAE,UAAU,GAAG,SAAS,CAAC;YACpD,CAAC,CAAC,CAAC;YAEH,IAAI,WAAW,CAAC,SAAS,KAAK,QAAQ;gBAAE,UAAU,GAAG,UAAU,GAAG,CAAC,CAAC;SACpE;QAED,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YAC7B,MAAM,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAC1C,MAAM,UAAU,GAAG,WAAW,CAAC,qBAAqB,GAAG,WAAW,CAAC,sBAAsB,CAAC;YAE1F,IAAI,KAAK,GAAG,CAAC,EAAE;gBACd,WAAW,IAAI,UAAU,CAAC;aAC1B;YAED,IAAI,SAAS,KAAK,SAAS,IAAI,SAAS,CAAC,CAAC,KAAK,KAAK,EAAE;gBACrD,MAAM,MAAM,GAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,WAAW,EAAE,CAAC;gBACtD,QAAQ,WAAW,CAAC,SAAS,EAAE;oBAC9B,KAAK,MAAM;wBACV,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,UAAU,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;wBAClF,MAAM;oBACP,KAAK,QAAQ;wBACZ,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,UAAU,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;wBACpH,MAAM;oBACP,KAAK,OAAO;wBACX,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,UAAU,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;wBAC/E,MAAM;iBACP;gBAED,GAAG,CAAC,IAAI,EAAE,CAAC;gBACX,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;gBACxB,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC,CAAC;gBAC7E,GAAG,CAAC,OAAO,EAAE,CAAC;aACd;YAED,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,UAAU,EAAE,GAAG,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC;QAC7D,CAAC,CAAC,CAAC;IACJ,CAAC;;sEA1SW,WAAW;8FAAX,WAAW,WAAX,WAAW,mBAFX,MAAM;6FAEN,WAAW;cAHvB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AAEkD;AAChB;AACU;AAChB;AACT;AACI;AAC0B;AACJ;AACQ;AACN;AAEF;AAC5C;AACgB;AACT;AACF;AACS;AACN;AACP;AACI;AACI;AACE;AACR;AACA;AACF;;;;;;;;;;;;;;;;;;;;;;AAKtC,MAAM,WAAW;IAiBvB,YACS,aAA4B,EAC5B,WAAwB,EACxB,aAA4B,EAC5B,gBAAkC,EAClC,cAA8B,EAC9B,eAAgC,EAChC,yBAAoD,EACpD,uBAAgD,EAChD,uBAAgD,EAChD,qBAA4C,EAC5C,sBAA8C,EAC9C,YAA0B,EAC1B,iBAAoC,EACpC,WAAwB,EACxB,WAAwB,EACxB,qBAA4C,EAC5C,WAAwB,EACzB,gBAAkC,EACjC,YAA0B,EAC3B,aAA4B;QAnB3B,kBAAa,GAAb,aAAa,CAAe;QAC5B,gBAAW,GAAX,WAAW,CAAa;QACxB,kBAAa,GAAb,aAAa,CAAe;QAC5B,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,mBAAc,GAAd,cAAc,CAAgB;QAC9B,oBAAe,GAAf,eAAe,CAAiB;QAChC,8BAAyB,GAAzB,yBAAyB,CAA2B;QACpD,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChD,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChD,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,2BAAsB,GAAtB,sBAAsB,CAAwB;QAC9C,iBAAY,GAAZ,YAAY,CAAc;QAC1B,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,gBAAW,GAAX,WAAW,CAAa;QACxB,gBAAW,GAAX,WAAW,CAAa;QACxB,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,gBAAW,GAAX,WAAW,CAAa;QACzB,qBAAgB,GAAhB,gBAAgB,CAAkB;QACjC,iBAAY,GAAZ,YAAY,CAAc;QAC3B,kBAAa,GAAb,aAAa,CAAe;QAnC5B,YAAO,GAAsB,IAAI,GAAG,EAAE,CAAC;QAE/C,8BAAyB,GAA4B,IAAI,qDAAe,CAAS,CAAC,CAAC,CAAC;QACpF,qBAAgB,GAAuB,IAAI,CAAC,yBAAyB,CAAC,YAAY,EAAE,CAAC;QACrF,yCAAoC,GAA8B,IAAI,qDAAe,CACpF,IAAI,6GAAyB,CAC5B,IAAI,oFAAc,CAAC,IAAI,oGAAqB,EAAE,CAAC,EAC/C,IAAI,sGAAqB,CACxB,IAAI,oFAAc,CAAC,IAAI,oGAAqB,EAAE,CAAC,EAC/C,IAAI,+EAAa,CAAC,IAAI,2EAAW,CAAC,IAAI,oFAAc,CAAC,IAAI,oGAAqB,EAAE,CAAC,CAAC,CAAC,CACnF,CACD,CACD,CAAC;QACF,gCAA2B,GAAiC,IAAI,CAAC,oCAAoC,CAAC,YAAY,EAAE,CAAC;QAwBpH,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACvE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACnE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACvE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC7E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;QACzE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAC3E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAC/F,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC3F,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC3F,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,0DAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;QAC9E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,0DAAM,CAAC,yBAAyB,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;QAChF,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACrE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC/E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACnE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACnE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACvF,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACnE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAErE,IAAI,CAAC,WAAW,GAAG,aAAa,CAAC;IAClC,CAAC;IAED,UAAU,CAAC,OAAe;QACzB,IAAI,OAAO,KAAK,GAAG,EAAE;YACpB,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE;gBAC/B,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;gBAC9B,OAAO;aACP;YACD,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;SAC9B;aAAM,IAAI,OAAO,KAAK,GAAG,EAAE;YAC3B,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE,CAAC;YACpC,OAAO;SACP;QAED,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,KAAK,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;YAAE,OAAO;QAErF,IAAI,OAAO,KAAK,0DAAM,CAAC,wBAAwB,IAAI,OAAO,KAAK,0DAAM,CAAC,yBAAyB,EAAE;YAChG,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,iBAAiB,EAAE;gBACpD,IAAI,CAAC,WAAqC,CAAC,YAAY,EAAE,CAAC;aAC3D;iBAAM,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,kBAAkB,EAAE;gBAC5D,IAAI,CAAC,WAAsC,CAAC,YAAY,EAAE,CAAC;aAC5D;iBAAM,IAAI,WAAW,IAAI,IAAI,CAAC,WAAW,EAAE;gBAC1C,IAAI,CAAC,WAAgC,CAAC,YAAY,CAAC,0DAAM,CAAC,YAAY,CAAC,CAAC;aACzE;SACD;QACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAS,CAAC;QACrD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ;YACtC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,0DAAM,CAAC,qBAAqB,CAAC;YACxD,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,0DAAM,CAAC,aAAa,CAAC,CAAC;QAElD,IAAI,WAAW,IAAI,IAAI,CAAC,WAAW,EAAE;YACnC,IAAI,CAAC,WAAgC,CAAC,YAAY,CAAC,0DAAM,CAAC,YAAY,CAAC,CAAC;YACzE,IAAI,CAAC,8BAA8B,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SACtD;QACD,yBAAyB;QACzB,IAAI,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACpE,CAAC;IAED,YAAY,CAAC,QAAgB;QAC5B,IAAI,QAAQ,KAAK,GAAG,EAAE;YACrB,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,QAAmB,CAAC;SAChE;aAAM;YACN,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,KAAK,QAAQ,CAAC;SACnD;IACF,CAAC;IAED,UAAU,CAAC,QAAgB;QAC1B,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAS,CAAC;IAC3C,CAAC;IAED,cAAc,CAAC,IAAY;QAC1B,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED,cAAc,CAAC,GAAW;QACzB,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC9B,CAAC;IAED,aAAa,CAAC,OAAsB,EAAE,MAAe;QACpD,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACjD,CAAC;IACD,mBAAmB,CAAC,OAAe;QAClC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC9C,CAAC;IAED,8BAA8B,CAAC,IAAsB;QACpD,IAAI,CAAC,oCAAoC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACtD,CAAC;IAED,eAAe;QACd,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC;IACnC,CAAC;IAED,cAAc;QACb,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;IACpC,CAAC;;sEAtIW,WAAW;8FAAX,WAAW,WAAX,WAAW,mBAFX,MAAM;6FAEN,WAAW;cAHvB,wDAAU;eAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;;;;;;;;;;;AC3BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,MAAM,MAAM;;AACF,oBAAa,GAAW,EAAE,CAAC;AAC3B,oBAAa,GAAW,CAAC,CAAC;AAC1B,UAAG,GAAW,CAAC,CAAC;AAChB,oBAAa,GAAW,IAAI,CAAC;AAC7B,qBAAc,GAAW,GAAG,CAAC;AAC7B,sBAAe,GAAW,EAAE,CAAC;AAC7B,iBAAU,GAAW;IACpC;QACC,CAAC,EAAE,CAAC;QACJ,CAAC,EAAE,CAAC;KACJ;IACD;QACC,CAAC,EAAE,CAAC;QACJ,CAAC,EAAE,CAAC;KACJ;IACD;QACC,CAAC,EAAE,CAAC;QACJ,CAAC,EAAE,CAAC;KACJ;IACD;QACC,CAAC,EAAE,CAAC;QACJ,CAAC,EAAE,CAAC;KACJ;CACD,CAAC;AACc,iBAAU,GAAW,EAAE,CAAC;AACxB,oCAA6B,GAAW,CAAC,CAAC;AAC1C,eAAQ,GAAW,GAAG,CAAC;AACvB,qBAAc,GAAW,GAAG,CAAC;AAC7B,+BAAwB,GAAW,CAAC,IAAI,CAAC;AACzC,gBAAS,GAAW,GAAG,CAAC;AACxB,iBAAU,GAAW,GAAG,CAAC;AACzB,yBAAkB,GAAW,GAAG,CAAC;AACjC,gBAAS,GAAW,EAAE,CAAC;AACvB,eAAQ,GAAW,GAAG,CAAC;AACvB,4BAAqB,GAAW,GAAG,CAAC;AACpC,mBAAY,GAAW,CAAC,CAAC;AACzB,mBAAY,GAAW,CAAC,CAAC;AACzB,6BAAsB,GAAW,CAAC,CAAC;AACnC,gBAAS,GAAe;IACvC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACT,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC;IACnB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACT,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CACT,CAAC;AACc,sBAAe,GAAW,EAAE,CAAC;AAC7B,kCAA2B,GAAW,CAAC,CAAC;AACxC,qBAAc,GAAe,IAAI,UAAU,CAAC,WAAW,EAAE;IACxE,UAAU,EAAE,KAAK;IACjB,IAAI,EAAE,MAAM;IACZ,MAAM,EAAE,CAAC;IACT,OAAO,EAAE,GAAG;IACZ,OAAO,EAAE,EAAE;IACX,OAAO,EAAE,GAAG;IACZ,OAAO,EAAE,EAAE;IACX,OAAO,EAAE,KAAK;IACd,MAAM,EAAE,KAAK;IACb,QAAQ,EAAE,KAAK;IACf,OAAO,EAAE,KAAK;IACd,MAAM,EAAE,CAAC;IACT,OAAO,EAAE,IAAI;CACb,CAAC,CAAC;AACH,oCAAoC;AACpB,cAAO,GAAW,GAAG,CAAC;AACtB,sBAAe,GAAW,CAAC,CAAC;AAC5B,qBAAc,GAAW,CAAC,CAAC;AAC3C,kCAAkC;AAClB,yBAAkB,GAAa,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AACvC,gBAAS,GAAW,CAAC,CAAC;AACtB,qBAAc,GAAW,GAAG,CAAC;AAC7B,sBAAe,GAAW,CAAC,CAAC;AAC5B,qBAAc,GAAS,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC;AAC1C,kBAAW,GAAW,IAAI,CAAC;AAC3B,oBAAa,GAAW;IACvC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE;IAClB,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE;IAClB,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE;IAClB,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE;IAClB,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE;CAClB,CAAC;AACF,gCAAgC;AAChB,8BAAuB,GAAW,CAAC,CAAC;AACpC,0BAAmB,GAAW,EAAE,CAAC;AACjD,kCAAkC;AAClB,8BAAuB,GAAW,CAAC,CAAC;AACpC,6BAAsB,GAAW,CAAC,CAAC;AACnD,gDAAgD;AAChC,qBAAc,GAAW,CAAC,CAAC,CAAC;AAC5B,0BAAmB,GAAW,CAAC,CAAC;AAChC,kBAAW,GAAW,CAAC,CAAC;AACxB,6BAAsB,GAAW,CAAC,CAAC,CAAC;AACpC,mBAAY,GAAW,GAAG,CAAC;AAC3B,iBAAU,GAAW,EAAE,CAAC;AACxB,0BAAmB,GAAW,GAAG,CAAC;AAClC,qBAAc,GAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACtC,mBAAY,GAAS,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;AACtC,kBAAW,GAAS,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC;AACvC,yBAAkB,GAAS,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC;AAC9C,2BAAoB,GAAS,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;AAClD,6BAAsB,GAAW,CAAC,CAAC;AACnC,mBAAY,GAAW,CAAC,CAAC;AACzB,uBAAgB,GAAW,EAAE,CAAC;AAC9B,oBAAa,GAAW,EAAE,CAAC;AAC3B,YAAK,GAAW,CAAC,CAAC,CAAC;AACnB,YAAK,GAAW,CAAC,CAAC,CAAC;AACnB,gBAAS,GAAW,CAAC,CAAC,CAAC;AACvB,gBAAS,GAAW,CAAC,CAAC,CAAC;AAEhC,iBAAU,GAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACzB,qBAAc,GAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACtC,mBAAY,GAAW,CAAC,CAAC;AACzB,kBAAW,GAAW,CAAC,CAAC;AACxB,qBAAc,GAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACtC,iBAAU,GAAW,GAAG,CAAC;AACzB,kBAAW,GAAW,GAAG,CAAC;AAC1B,+BAAwB,GAAW,gBAAgB,CAAC;AACpD,gCAAyB,GAAW,iBAAiB,CAAC;AACtD,oBAAa,GAAW,GAAG,CAAC;AAC5B,mBAAY,GAAW,GAAG,CAAC;AAC3B,qBAAc,GAAW,GAAG,CAAC;AAC7B,6BAAsB,GAAW,EAAE,CAAC;AACpD,gCAAgC;AAChB,4BAAqB,GAAW,CAAC,CAAC;AAClC,8BAAuB,GAAW,CAAC,CAAC;AACpC,kCAA2B,GAAW,GAAG,CAAC;AAC1C,+BAAwB,GAAW,CAAC,CAAC;AACrC,gBAAS,GAAW;IACnC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;IACd,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;IACf,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;IACd,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;IACd,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;CACd,CAAC;AACc,uBAAgB,GAAW;IAC1C,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;IACd,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;CACd,CAAC;AACc,yBAAkB,GAAW;IAC5C,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;IACd,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;CACd,CAAC;AACc,+BAAwB,GAAW;IAClD,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;IACd,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;CACjB,CAAC;AACc,mBAAY,GAAiB;IAC5C,EAAE,OAAO,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAgB;IACjE,EAAE,OAAO,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAgB;IACjE,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAgB;IAC/D,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAgB;IACnD,EAAE,OAAO,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAgB;IACrD,EAAE,OAAO,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAgB;IACrD,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAgB;IACjD,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAgB;IAClD,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAgB;IAClD,EAAE,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAgB;IACtD,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAgB;IAClD,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC,EAAgB;CAC3C,CAAC;AACF,iCAAiC;AAC1B,mBAAY,GAAW,CAAC,CAAC;AACzB,uBAAgB,GAAW,GAAG,CAAC;AAC/B,eAAQ,GAAW,EAAE,CAAC;AACtB,mBAAY,GAAmD;IACrE,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;CACN,CAAC;AACK,sBAAe,GAAW,EAAE,CAAC;AACpC,+BAA+B;AACf,iBAAU,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;AACtG,iBAAU,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;AACvG,mBAAY,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;AACzG,sBAAe,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;AAC5G,iBAAU,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;AACvG,iBAAU,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;AACvH,kCAAkC;AAClB,0BAAmB,GAAW,CAAC,CAAC;AAChC,gCAAyB,GAAW,EAAE,CAAC;AACvC,oBAAa,GAAW,CAAC,CAAC;AAC1B,sBAAe,GAAW,CAAC,CAAC;AAC5B,qBAAc,GAAW,CAAC,CAAC;AAC3B,sBAAe,GAAW,CAAC,CAAC;AAC5B,uBAAgB,GAAW,CAAC,CAAC;AAC7B,oBAAa,GAAW,GAAG,CAAC;AAC5B,6BAAsB,GAAW,CAAC,CAAC;AACnC,0BAAmB,GAAW,EAAE,CAAC;AACjC,sBAAe,GAAW,CAAC,CAAC,CAAC;AAC7C,0BAA0B;AACV,gBAAS,GAAW,IAAI,CAAC;AACzB,iBAAU,GAAW,EAAE,CAAC;AACxB,qBAAc,GAAW,EAAE,CAAC;AAC5C,yBAAyB;AACT,sBAAe,GAAW,GAAG,CAAC;AAC9B,sBAAe,GAAW,EAAE,CAAC;AAC7B,kBAAW,GAAW,GAAG,CAAC;AAC1B,kBAAW,GAAW,EAAE,CAAC;AACzB,sBAAe,GAAW,CAAC,CAAC;AAC5B,sBAAe,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AAC5E,uBAAgB,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AAC7E,uBAAgB,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AAC7F,+BAA+B;AACf,mBAAY,GAAW,UAAU,CAAC;AAClC,oBAAa,GAAW,WAAW,CAAC;AACpD,qBAAqB;AACL,0BAAmB,GAAW,EAAE,CAAC;AACjC,8BAAuB,GAAW,CAAC,CAAC;AACpD,6BAA6B;AACb,uBAAgB,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,WAAW,EAAE,CAAC,CAAC;AACrF,wBAAiB,GAAkB,IAAI,aAAa,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,YAAY,EAAE,CAAC,CAAC;AACvF,sBAAe,GAAa;IAC3C,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC,OAAO,CAAC,EAAE;IACvC,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC,MAAM,CAAC,EAAE;IACtC,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC,OAAO,CAAC,EAAE;IACvC,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,EAAE,EAAE;CAChC,CAAC;AACc,0BAAmB,GAAa;IAC/C,CAAC;IACD,CAAC;IACD,CAAC;IACD,MAAM,CAAC,uBAAuB;CAC9B,CAAC;AACF,wBAAwB;AACR,wBAAiB,GAAW,EAAE,CAAC;AAC/B,oBAAa,GAAW,EAAE,CAAC;AAC3B,oBAAa,GAAW,EAAE,CAAC;AAC3B,eAAQ,GAAW,iCAAiC,CAAC;AAEtE,IAAY,SAWX;AAXD,WAAY,SAAS;IACpB,+CAAW;IACX,2DAAiB;IACjB,iDAAY;IACZ,mDAAa;IACb,uDAAe;IACf,mDAAa;IACb,iDAAY;IACZ,mEAAqB;IACrB,uEAAuB;IACvB,uEAAuB;AACxB,CAAC,EAXW,SAAS,KAAT,SAAS,QAWpB;AACD,IAAY,WAMX;AAND,WAAY,WAAW;IACtB,6CAAQ;IACR,iDAAU;IACV,+CAAS;IACT,6CAAQ;IACR,mDAAW;AACZ,CAAC,EANW,WAAW,KAAX,WAAW,QAMtB;AACD,IAAY,GAKX;AALD,WAAY,GAAG;IACd,uBAAK;IACL,uBAAK;IACL,uBAAK;IACL,uBAAK;AACN,CAAC,EALW,GAAG,KAAH,GAAG,QAKd;AACD,IAAY,QAOX;AAPD,WAAY,QAAQ;IACnB,wBAAY;IACZ,uBAAW;IACX,wBAAY;IACZ,gCAAoB;IACpB,mCAAuB;IACvB,wCAA4B;AAC7B,CAAC,EAPW,QAAQ,KAAR,QAAQ,QAOnB;AACD,IAAY,cAKX;AALD,WAAY,cAAc;IACzB,uEAAkB;IAClB,mEAAgB;IAChB,2DAAY;IACZ,+DAAc;AACf,CAAC,EALW,cAAc,KAAd,cAAc,QAKzB;AACD,IAAY,OAKX;AALD,WAAY,OAAO;IAClB,kCAAuB;IACvB,0BAAe;IACf,4BAAiB;IACjB,4BAAiB;AAClB,CAAC,EALW,OAAO,KAAP,OAAO,QAKlB;AACD,IAAY,MAKX;AALD,WAAY,MAAM;IACjB,iCAAuB;IACvB,iCAAuB;IACvB,mCAAyB;IACzB,6BAAmB;AACpB,CAAC,EALW,MAAM,KAAN,MAAM,QAKjB;AACD,IAAY,KAMX;AAND,WAAY,KAAK;IAChB,wBAAe;IACf,4BAAmB;IACnB,4BAAmB;IACnB,0CAAiC;IACjC,oCAA2B;AAC5B,CAAC,EANW,KAAK,KAAL,KAAK,QAMhB;AACM,MAAM,MAAM,GAAa;IAC/B,yBAAyB;IACzB,8BAA8B;IAC9B,yBAAyB;IACzB,wBAAwB;IACxB,4BAA4B;CAC5B,CAAC;AACF,IAAY,YAUX;AAVD,WAAY,YAAY;IACvB,mDAAM;IACN,2DAAU;IACV,6DAAW;IACX,uDAAQ;IACR,2DAAU;IACV,+DAAY;IACZ,mEAAc;IACd,iEAAa;IACb,qEAAe;AAChB,CAAC,EAVW,YAAY,KAAZ,YAAY,QAUvB;;;;;;;;;;;;;ACnTD;AAAA;AAAA,gFAAgF;AAChF,0EAA0E;AAC1E,gEAAgE;AAIzD,MAAM,WAAW,GAAiB;IACxC,UAAU,EAAE,KAAK;CACjB,CAAC;AAEF;;;;;;GAMG;AACH,mEAAmE;;;;;;;;;;;;;ACjBnE;AAAA;AAAA;AAAA;AAAA;AAA+C;AAIU;;;AAEzD,IAAI,qEAAW,CAAC,UAAU,EAAE;IAC3B,oEAAc,EAAE,CAAC;CACjB;AAED,2EAAwB,gBACP,CAAC,0DAAU;KAC1B,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { EditorComponent } from './components/editor/editor.component';\nimport { MainPageComponent } from './components/main-page/main-page.component';\n\nconst routes: Routes = [\n\t{ path: '', redirectTo: '/home', pathMatch: 'full' },\n\t{ path: 'home', component: MainPageComponent },\n\t{ path: 'editor', component: EditorComponent },\n\t{ path: '**', redirectTo: '/home' },\n];\n\n@NgModule({\n\timports: [RouterModule.forRoot(routes)],\n\texports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","import { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './components/app/app.component';\nimport { EditorModule } from './components/editor/editor.module';\nimport { ExportModule } from './components/export/export.module';\nimport { MainPageModule } from './components/main-page/main-page.module';\n\n@NgModule({\n\tdeclarations: [AppComponent],\n\timports: [BrowserModule, HttpClientModule, BrowserAnimationsModule, AppRoutingModule, MainPageModule, EditorModule, ExportModule],\n\tproviders: [],\n\tbootstrap: [AppComponent],\n})\nexport class AppModule {}\n","export class BucketOptions {\n\ttolerance: number = 0;\n}\n","export class Queue<T> {\n\tstore: T[] = [];\n\tpush(val: T): void {\n\t\tthis.store.push(val);\n\t}\n\tpop(): T | undefined {\n\t\treturn this.store.shift();\n\t}\n\tget length(): number {\n\t\treturn this.store.length;\n\t}\n}\n","export class GridOptions {\n\tsize: number = 50;\n\topacity: number = 80;\n\tisActive: boolean = false;\n}\n","import { Global } from '@app/shared/global';\n\nexport class LineOptions {\n\tconnectionDotSize: number = Global.MIN_TOOL_SIZE;\n\thasConnectionDots: boolean = true;\n}\n","import { Vec2 } from './vec2';\n\nexport class Line {\n\tr: number;\n\tdx: number;\n\tdy: number;\n\tdistance: number;\n\tinitPoint: Vec2;\n\tfinalPoint: Vec2;\n\tconstructor(point1: Vec2, point2: Vec2, distance: number) {\n\t\tthis.r = this.calculateR(point1, point2);\n\t\tthis.dx = -(distance / this.r) * (point2.y - point1.y);\n\t\tthis.dy = (distance / this.r) * (point2.x - point1.x);\n\t\tthis.initPoint = point1;\n\t\tthis.finalPoint = point2;\n\t}\n\n\tcalculateR(point1: Vec2, point2: Vec2): number {\n\t\treturn Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));\n\t}\n\tgetNewPoint(point: Vec2): Vec2 {\n\t\treturn { x: point.x + this.dx, y: point.y + this.dy };\n\t}\n\n\tintersection(point1: Vec2, point2: Vec2, point3: Vec2, point4: Vec2): Vec2 {\n\t\tlet slope1 = 0;\n\t\tlet slope2 = 0;\n\t\tlet xin = 0;\n\t\tlet yin = 0;\n\t\tif (point2.x - point1.x !== 0) {\n\t\t\tslope1 = (point2.y - point1.y) / (point2.x - point1.x);\n\t\t}\n\n\t\tif (point4.x - point3.x !== 0) {\n\t\t\tslope2 = (point4.y - point3.y) / (point4.x - point3.x);\n\t\t}\n\n\t\tif (slope1 !== slope2) {\n\t\t\txin =\n\t\t\t\t((point1.x * point2.y - point1.y * point2.x) * (point3.x - point4.x) -\n\t\t\t\t\t(point3.x * point4.y - point3.y * point4.x) * (point1.x - point2.x)) /\n\t\t\t\t((point1.x - point2.x) * (point3.y - point4.y) - (point1.y - point2.y) * (point3.x - point4.x));\n\t\t\tyin =\n\t\t\t\t((point1.x * point2.y - point1.y * point2.x) * (point3.y - point4.y) -\n\t\t\t\t\t(point3.x * point4.y - point3.y * point4.x) * (point1.y - point2.y)) /\n\t\t\t\t((point1.x - point2.x) * (point3.y - point4.y) - (point1.y - point2.y) * (point3.x - point4.x));\n\t\t}\n\t\treturn { x: xin, y: yin } as Vec2;\n\t}\n}\n","export class ShapeOptions {\n\tcontour: boolean = false;\n\tfill: boolean = true;\n\tnbVertices: number;\n\n\tconstructor(nbVertices: number) {\n\t\tif (nbVertices !== 0) this.nbVertices = nbVertices;\n\t}\n}\n","import { Global } from '@app/shared/global';\n\nexport class SprayOptions {\n\tdropletSize: number = 1;\n\tspraySize: number = Global.MIN_SPRAY_SIZE;\n\tsprayTime: number = Global.TIME_DELAY;\n}\n","import { stamps } from '@app/shared/global';\n\nexport class StampOptions {\n\tstampSrc: string;\n\tscalingFactor: number = 1;\n\torientation: number = 0;\n\n\tconstructor() {\n\t\tthis.stampSrc = stamps[0];\n\t}\n}\n","import { Fonts, Global } from '@app/shared/global';\n\nexport class TextOptions {\n\tfontSize: number = Global.DEFAULT_FONT_SIZE;\n\tfont: Fonts = Fonts.Arial;\n\tisBold: boolean = false;\n\tisItalic: boolean = false;\n\talignment: string = 'left';\n}\n","export class ToolInfo {\n\tname: string;\n\tbuttonText: string;\n\tshortcut: string;\n\n\tconstructor(name: string, buttonText: string, shortcut: string) {\n\t\tthis.name = name;\n\t\tthis.buttonText = buttonText;\n\t\tthis.shortcut = shortcut;\n\t}\n}\n","import { BucketOptions } from '@app/classes/bucket-options';\nimport { GridOptions } from '@app/classes/grid-options';\nimport { LineOptions } from '@app/classes/line-options';\nimport { ShapeOptions } from '@app/classes/shape-options';\nimport { SprayOptions } from '@app/classes/spray-options';\nimport { Global } from '@app/shared/global';\nimport { StampOptions } from './stamp-options';\nimport { TextOptions } from './text-options';\n\nexport class ToolOption {\n\tshapeOptions: ShapeOptions;\n\tlineOptions: LineOptions;\n\tsprayOptions: SprayOptions;\n\tgridOptions: GridOptions;\n\tstampOptions: StampOptions;\n\ttextOptions: TextOptions;\n\tsize: number = Global.MIN_TOOL_SIZE;\n\tbucketOptions: BucketOptions;\n\n\tconstructor(\n\t\tshapeCrevices?: number,\n\t\tlineOptions?: boolean,\n\t\tsprayOptions?: boolean,\n\t\tsize?: number,\n\t\tgridOptions?: boolean,\n\t\tbucketOptions?: boolean,\n\t\ttextOptions?: boolean,\n\t\tstampOptions?: boolean,\n\t) {\n\t\tif (shapeCrevices !== undefined && shapeCrevices >= 0) this.shapeOptions = new ShapeOptions(shapeCrevices);\n\t\tif (lineOptions) this.lineOptions = new LineOptions();\n\t\tif (sprayOptions) this.sprayOptions = new SprayOptions();\n\t\tif (textOptions) this.textOptions = new TextOptions();\n\t\tif (gridOptions) this.gridOptions = new GridOptions();\n\t\tif (stampOptions) this.stampOptions = new StampOptions();\n\t\tif (size) this.size = size;\n\t\tif (bucketOptions) this.bucketOptions = new BucketOptions();\n\t}\n}\n","import { DrawingService } from '@app/services/drawing/drawing.service';\nimport { ToolInfo } from './tool-info';\nimport { ToolOption } from './tool-option';\nimport { Vec2 } from './vec2';\n\n// tslint:disable:no-empty\nexport abstract class Tool {\n\tmouseDownCoord: Vec2;\n\tisDrawing: boolean = false;\n\tabstract info: ToolInfo;\n\tabstract options: ToolOption;\n\tpageOffset: number;\n\n\tconstructor(protected drawingService: DrawingService) {}\n\n\tonMouseDown(event: MouseEvent): void {}\n\n\tonMouseUp(event: MouseEvent): void {}\n\n\tonMouseMove(event: MouseEvent): void {}\n\n\tonDoubleClick(event: MouseEvent): void {}\n\n\tonWheel(event: WheelEvent): void {}\n\n\thandleCommand(command: KeyboardEvent, isDown: boolean): void {}\n\n\tgetDrawingService(): DrawingService {\n\t\treturn this.drawingService;\n\t}\n\n\tgetPositionFromMouse(event: MouseEvent): Vec2 {\n\t\treturn { x: event.offsetX, y: event.offsetY };\n\t}\n\n\tgetPagePositionFromMouse(event: MouseEvent): Vec2 {\n\t\treturn { x: event.pageX - this.drawingService.positionX, y: event.pageY };\n\t}\n}\n","import { Component } from '@angular/core';\nimport { CommandManagerService } from '@app/services/commands/command-manager.service';\nimport { EventManagerService } from '@app/services/event-manager/event-manager.service';\nimport { ToolService } from '@app/services/tools/tool.service';\n\n@Component({\n\tselector: 'app-root',\n\ttemplateUrl: './app.component.html',\n\tstyleUrls: ['./app.component.scss'],\n})\nexport class AppComponent {\n\tconstructor(public toolService: ToolService, public commandManager: CommandManagerService, public eventManager: EventManagerService) {}\n}\n","<!--The content below is only a placeholder and can be replaced.-->\n<router-outlet></router-outlet>\n","import { Component, Input } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolService } from 'src/app/services/tools/tool.service';\nimport { Fonts, stamps } from 'src/app/shared/global';\n\n@Component({\n\tselector: 'app-attributes-panel',\n\ttemplateUrl: './attributes-panel.component.html',\n\tstyleUrls: ['./attributes-panel.component.scss'],\n})\nexport class AttributesPanelComponent {\n\tmin: number = 1;\n\tmax: number = 50;\n\tvalue: number = 0;\n\t@Input() activeTool: Tool;\n\n\tconstructor(public toolService: ToolService) {\n\t\tthis.toolService.changeLimitSize$.subscribe((minSize: number) => {\n\t\t\tthis.min = minSize;\n\t\t});\n\t\tthis.activeTool = toolService.currentTool;\n\t}\n\n\tget fonts(): Fonts[] {\n\t\treturn Object.values(Fonts);\n\t}\n\n\tget stamps(): string[] {\n\t\treturn stamps;\n\t}\n}\n","<div class=\"container\">\n\t<h2\n\t\t*ngIf=\"\n\t\t\tactiveTool &&\n\t\t\t(activeTool.options.size !== -1 ||\n\t\t\t\tactiveTool.info.name === 'eye-dropper' ||\n\t\t\t\tactiveTool.info.name === 'text' ||\n\t\t\t\tactiveTool.info.name === 'stamp')\n\t\t\"\n\t\tclass=\"header\"\n\t>\n\t\tAttributs {{ activeTool.info.buttonText }}\n\t</h2>\n\t<div\n\t\t*ngIf=\"\n\t\t\tthis.activeTool.options.size !== -1 &&\n\t\t\tactiveTool.info.name !== 'shift-selection' &&\n\t\t\tactiveTool.info.name !== 'spray' &&\n\t\t\tactiveTool.info.name !== 'grille' &&\n\t\t\tactiveTool.info.name !== 'fill'\n\t\t\"\n\t>\n\t\t<div *ngIf=\"activeTool\" class=\"label\">Taille du trait</div>\n\t\t<mat-slider [max]=\"max\" [min]=\"min\" [thumbLabel]=\"true\" [(value)]=\"toolService.currentTool.options.size\"></mat-slider>\n\t\t<b> {{ toolService.currentTool.options.size }}px </b>\n\t</div>\n\n\t<div *ngIf=\"toolService.currentTool.options.shapeOptions && activeTool.info.name !== 'shift-selection'\">\n\t\t<br />\n\t\t<mat-slide-toggle\n\t\t\t[(checked)]=\"toolService.currentTool.options.shapeOptions.contour\"\n\t\t\t#rectangle\n\t\t\t(change)=\"toolService.currentTool.options.shapeOptions.contour = $event.checked\"\n\t\t\t(disabled)=\"(toolService.currentTool.options.shapeOptions.fill)\"\n\t\t\t>Contour</mat-slide-toggle\n\t\t>\n\t\t<br />\n\t\t<mat-slide-toggle\n\t\t\t[(checked)]=\"toolService.currentTool.options.shapeOptions.fill\"\n\t\t\t#rectangle\n\t\t\t(change)=\"toolService.currentTool.options.shapeOptions.fill = $event.checked\"\n\t\t\t>Plein</mat-slide-toggle\n\t\t>\n\t\t<br />\n\t\t<br />\n\t\t<div *ngIf=\"toolService.currentTool.options.shapeOptions.nbVertices\" class=\"label\">\n\t\t\tNombre de côtés\n\t\t\t<mat-slider [max]=\"12\" [min]=\"3\" [thumbLabel]=\"true\" [(value)]=\"toolService.currentTool.options.shapeOptions.nbVertices\"></mat-slider>\n\t\t\t<b> {{ toolService.currentTool.options.shapeOptions.nbVertices }}</b>\n\t\t</div>\n\t</div>\n\n\t<div *ngIf=\"activeTool.options.lineOptions\">\n\t\t<div class=\"label\">\n\t\t\t<label>Points de jonction</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<mat-slide-toggle\n\t\t\t\tstyle=\"padding-left: 10px\"\n\t\t\t\t#slideToggle\n\t\t\t\t[(checked)]=\"toolService.currentTool.options.lineOptions.hasConnectionDots\"\n\t\t\t\t(change)=\"toolService.currentTool.options.lineOptions.hasConnectionDots = $event.checked\"\n\t\t\t></mat-slide-toggle>\n\t\t</div>\n\t\t<div *ngIf=\"slideToggle.checked\">\n\t\t\t<div class=\"label\">Rayon des points</div>\n\t\t\t<mat-slider\n\t\t\t\t[max]=\"max\"\n\t\t\t\t[min]=\"min\"\n\t\t\t\t[thumbLabel]=\"true\"\n\t\t\t\t[(value)]=\"toolService.currentTool.options.lineOptions.connectionDotSize\"\n\t\t\t></mat-slider>\n\t\t\t<b> {{ activeTool.options.lineOptions.connectionDotSize }}px</b>\n\t\t</div>\n\t</div>\n\t<div *ngIf=\"activeTool.info.name === 'spray'\">\n\t\t<div class=\"label\">\n\t\t\t<label>Diamètre des goutelletes</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<mat-slider [max]=\"5\" [min]=\"1\" [thumbLabel]=\"true\" [(value)]=\"toolService.currentTool.options.sprayOptions.dropletSize\"></mat-slider>\n\t\t\t<b> {{ toolService.currentTool.options.sprayOptions.dropletSize }}px </b>\n\t\t</div>\n\t\t<div class=\"label\">\n\t\t\t<label>Diamètre du jet</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<mat-slider [max]=\"50\" [min]=\"10\" [thumbLabel]=\"true\" [(value)]=\"toolService.currentTool.options.sprayOptions.spraySize\"></mat-slider>\n\t\t\t<b> {{ toolService.currentTool.options.sprayOptions.spraySize }}px </b>\n\t\t</div>\n\t\t<div class=\"label\">\n\t\t\t<label>Émissions par secondes</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<mat-slider [max]=\"5000\" [min]=\"100\" [thumbLabel]=\"true\" [(value)]=\"toolService.currentTool.options.sprayOptions.sprayTime\"></mat-slider>\n\t\t\t<b> {{ toolService.currentTool.options.sprayOptions.sprayTime }}</b>\n\t\t</div>\n\t</div>\n\t<div *ngIf=\"activeTool.info.name === 'fill'\">\n\t\t<div class=\"label\">\n\t\t\t<label>Tolérance (%)</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<mat-slider [max]=\"100\" [min]=\"0\" [thumbLabel]=\"true\" [(value)]=\"toolService.currentTool.options.bucketOptions.tolerance\"></mat-slider>\n\t\t</div>\n\t</div>\n\t<div *ngIf=\"activeTool.info.name === 'grille'\">\n\t\t<div class=\"label\">\n\t\t\t<label>Taille des carrés</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<mat-slider\n\t\t\t\t[max]=\"250\"\n\t\t\t\t[min]=\"5\"\n\t\t\t\t[thumbLabel]=\"true\"\n\t\t\t\t(change)=\"toolService.updateGridSize($event.value)\"\n\t\t\t\t[value]=\"toolService.currentTool.options.gridOptions.size\"\n\t\t\t></mat-slider>\n\t\t\t<b> {{ toolService.currentTool.options.gridOptions.size }}px </b>\n\t\t</div>\n\t\t<div class=\"label\">\n\t\t\t<label>Opacité de la grille</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<mat-slider [max]=\"100\" [min]=\"40\" [thumbLabel]=\"true\" [(value)]=\"toolService.currentTool.options.gridOptions.opacity\"></mat-slider>\n\t\t\t<b> {{ toolService.currentTool.options.gridOptions.opacity }}% </b>\n\t\t</div>\n\t</div>\n\n\t<div *ngIf=\"activeTool.info.name === 'eye-dropper'\">\n\t\t<canvas id=\"eye-dropper-canvas\"></canvas>\n\t</div>\n\n\t<div *ngIf=\"activeTool.info.name === 'text'\" id=\"text-options-panel\">\n\t\t<div class=\"label\">Police</div>\n\t\t<mat-form-field appearance=\"fill\">\n\t\t\t<mat-select\n\t\t\t\t#FontSelect\n\t\t\t\t[(value)]=\"toolService.currentTool.options.textOptions.font\"\n\t\t\t\t(closed)=\"FontSelect._elementRef.nativeElement.blur()\"\n\t\t\t>\n\t\t\t\t<mat-option [value]=\"font\" *ngFor=\"let font of fonts\">{{ font }}</mat-option>\n\t\t\t</mat-select>\n\t\t</mat-form-field>\n\t\t<br />\n\t\t<br />\n\t\t<div class=\"label\">Taille de la police</div>\n\t\t<mat-slider\n\t\t\t#FontSizeSlider\n\t\t\t[max]=\"70\"\n\t\t\t[min]=\"15\"\n\t\t\t[thumbLabel]=\"true\"\n\t\t\t[(value)]=\"toolService.currentTool.options.textOptions.fontSize\"\n\t\t\t(change)=\"FontSizeSlider._elementRef.nativeElement.blur()\"\n\t\t></mat-slider>\n\t\t<b> {{ toolService.currentTool.options.textOptions.fontSize }}px</b>\n\t\t<br />\n\t\t<br />\n\t\t<mat-slide-toggle\n\t\t\t[(checked)]=\"toolService.currentTool.options.textOptions.isBold\"\n\t\t\t(change)=\"toolService.currentTool.options.textOptions.isBold = $event.checked\"\n\t\t\t>Gras</mat-slide-toggle\n\t\t>\n\t\t<br />\n\t\t<mat-slide-toggle\n\t\t\t[(checked)]=\"toolService.currentTool.options.textOptions.isItalic\"\n\t\t\t(change)=\"toolService.currentTool.options.textOptions.isItalic = $event.checked\"\n\t\t\t>Italique</mat-slide-toggle\n\t\t>\n\t\t<br />\n\t\t<br />\n\t\t<mat-button-toggle-group [(value)]=\"toolService.currentTool.options.textOptions.alignment\">\n\t\t\t<mat-button-toggle value=\"left\" aria-label=\"Text align left\">\n\t\t\t\t<mat-icon>format_align_left</mat-icon>\n\t\t\t</mat-button-toggle>\n\t\t\t<mat-button-toggle value=\"center\" aria-label=\"Text align center\">\n\t\t\t\t<mat-icon>format_align_center</mat-icon>\n\t\t\t</mat-button-toggle>\n\t\t\t<mat-button-toggle value=\"right\" aria-label=\"Text align right\">\n\t\t\t\t<mat-icon>format_align_right</mat-icon>\n\t\t\t</mat-button-toggle>\n\t\t</mat-button-toggle-group>\n\t</div>\n\n\t<div id=\"stamp-attributes\" *ngIf=\"activeTool.info.name === 'stamp'\" id=\"stamp-options-panel\">\n\t\t<div class=\"label\">Étampe</div>\n\t\t<mat-button-toggle-group\n\t\t\tclass=\"stamp-toggle-group\"\n\t\t\t(change)=\"toolService.currentTool.options.stampOptions.stampSrc = $event.value\"\n\t\t\tvalue=\"{{ stamps[0] }}\"\n\t\t>\n\t\t\t<mat-button-toggle class=\"stamp-button-toggle\" *ngFor=\"let stamp of stamps\" value=\"{{ stamp }}\">\n\t\t\t\t<img class=\"stamp-img\" src=\"{{ stamp }}\" />\n\t\t\t</mat-button-toggle>\n\t\t</mat-button-toggle-group>\n\t\t<br />\n\t\t<br />\n\t\t<div class=\"label\">Facteur de mise à l'échelle</div>\n\t\t<mat-slider\n\t\t\tclass=\"stamp-slider\"\n\t\t\t#StampSizeSlider\n\t\t\t[max]=\"3\"\n\t\t\t[min]=\"0.1\"\n\t\t\t[step]=\"0.1\"\n\t\t\t[thumbLabel]=\"true\"\n\t\t\t[(value)]=\"toolService.currentTool.options.stampOptions.scalingFactor\"\n\t\t\t(change)=\"StampSizeSlider._elementRef.nativeElement.blur()\"\n\t\t></mat-slider>\n\t\t<b> {{ toolService.currentTool.options.stampOptions.scalingFactor }}</b>\n\t\t<br />\n\t\t<br />\n\t\t<div class=\"label\">Rotation (degrés)</div>\n\t\t<mat-slider\n\t\t\tclass=\"stamp-slider\"\n\t\t\t#StampOrientationSlider\n\t\t\t[max]=\"360\"\n\t\t\t[min]=\"0\"\n\t\t\t[step]=\"1\"\n\t\t\t[thumbLabel]=\"true\"\n\t\t\t[(value)]=\"toolService.currentTool.options.stampOptions.orientation\"\n\t\t\t(change)=\"StampOrientationSlider._elementRef.nativeElement.blur()\"\n\t\t></mat-slider>\n\t\t<b> {{ toolService.currentTool.options.stampOptions.orientation }}°</b>\n\n\n    </div>\n\t<div *ngIf=\"activeTool.info.name === 'shift-selection' && toolService.magnetService.isActive \" >\n\t\t<b>Point de controle</b>\n\t\t<mat-button-toggle-group vertical #group=\"matButtonToggleGroup\" (change) = \"toolService.magnetService.changeControlPoint($event.value)\">\n            <mat-button-toggle value=0 [checked]=\"toolService.magnetService.controlPoint ==0\">\n            \tCentre\n            </mat-button-toggle>\n\t\t\t<mat-button-toggle value=1 [checked]=\"toolService.magnetService.controlPoint ==1\">\n\t\t\t\tCentre gauche\n\t\t\t</mat-button-toggle>\n\t\t\t<mat-button-toggle value=2 [checked]=\"toolService.magnetService.controlPoint ==2\">\n\t\t\t\tCentre droit\n\t\t\t</mat-button-toggle>\n\t\t\t  <mat-button-toggle value=3 [checked]=\"toolService.magnetService.controlPoint ==3\">\n\t\t\t\tCentre haut\n\t\t\t</mat-button-toggle>\n\t\t\t<mat-button-toggle value=4 [checked]=\"toolService.magnetService.controlPoint ==4\">\n\t\t\t\tCentre bas\n\t\t\t</mat-button-toggle>\n\t\t\t<mat-button-toggle value=5 [checked]=\"toolService.magnetService.controlPoint ==5\">\n\t\t\t\tCoin haut gauche\n\t\t\t</mat-button-toggle>\n\t\t\t<mat-button-toggle value=6 [checked]=\"toolService.magnetService.controlPoint ==6\">\n\t\t\t\tCoin bas gauche\n\t\t\t</mat-button-toggle>\n\t\t\t<mat-button-toggle value=7 [checked]=\"toolService.magnetService.controlPoint ==7\">\n\t\t\t\tCoin haut droit\n\t\t\t</mat-button-toggle>\n\t\t\t<mat-button-toggle value=8 [checked]=\"toolService.magnetService.controlPoint ==8\">\n\t\t\t\tCoin bas droit\n\t\t\t</mat-button-toggle>\n\n        </mat-button-toggle-group>\n\t</div>\n\t<div class=\"color-picker-container\">\n\t\t<app-color-panel\n\t\t\t[ngClass]=\"this.toolService.hasBegunDrawing() && this.toolService.currentTool.info.name !== 'text' ? 'disabled' : ''\"\n\t\t></app-color-panel>\n\t</div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { ColorPanelModule } from '@app/components/color-panel/color-panel.module';\nimport { AttributesPanelComponent } from './attributes-panel.component';\n\n@NgModule({\n\tdeclarations: [AttributesPanelComponent],\n\timports: [\n\t\tCommonModule,\n\t\tMatSliderModule,\n\t\tBrowserAnimationsModule,\n\t\tMatSlideToggleModule,\n\t\tColorPanelModule,\n\t\tMatSelectModule,\n\t\tMatButtonToggleModule,\n\t\tMatIconModule,\n\t],\n\texports: [AttributesPanelComponent],\n})\nexport class AttributesPanelModule {}\n","import { ENTER } from '@angular/cdk/keycodes';\nimport { HttpResponse } from '@angular/common/http';\nimport { Component, ElementRef, HostListener, OnInit, ViewChild } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { MatAutocomplete, MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';\nimport { MatChipInputEvent } from '@angular/material/chips';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global } from '@app/shared/global';\nimport { Dessin } from '@common/communication/dessin';\nimport { StatusCodes } from 'http-status-codes';\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport { SaveService } from 'src/app/services/index/save.service';\n\n@Component({\n\tselector: 'app-carrousel',\n\ttemplateUrl: './carrousel.component.html',\n\tstyleUrls: ['./carrousel.component.scss'],\n})\nexport class CarrouselComponent implements OnInit {\n\t// isLoading:boolean = false;\n\toutOfBounds: number = -1;\n\tindexFiche: number = 0;\n\treadonly separatorKeysCodes: number[] = [ENTER];\n\tallDrawing: Dessin[] = [];\n\tfilteredDrawing: number[] = [];\n\temptyDrawing: Dessin = {\n\t\tname: 'Dessin vide',\n\t\tetiquette: [],\n\t\timage: '',\n\t};\n\tpreviousIsLoading: boolean = false;\n\tcenterIsLoading: boolean = false;\n\tnextIsLoading: boolean = false;\n\tetiquettes: string[] = [];\n\tselectedEtiquettes: string[] = [];\n\tfilteredEtiquettes: Observable<string[]>;\n\tetiquetteCtrl: FormControl = new FormControl();\n\n\t@ViewChild('auto') matAutocomplete: MatAutocomplete;\n\t@ViewChild('etiquetteInput') etiquetteInput: ElementRef<HTMLInputElement>;\n\n\tconstructor(\n\t\tprivate basicService: SaveService,\n\t\tprivate drawingService: DrawingService,\n\t\tprivate snackBar: MatSnackBar,\n\t\tprivate dialog: MatDialogRef<CarrouselComponent>,\n\t) {\n\t\tthis.filteredEtiquettes = this.etiquetteCtrl.valueChanges.pipe(\n\t\t\tstartWith(null),\n\t\t\tmap((etiquette: string | null) => (etiquette ? this._filter(etiquette) : this.etiquettes.slice())),\n\t\t);\n\t}\n\n\tasync ngOnInit(): Promise<void> {\n\t\tawait this.getAllDrawing();\n\t\tthis.noDrawingFilter();\n\t\tthis.allDrawing.forEach((dessin) => {\n\t\t\tdessin.etiquette.forEach((etiquette) => {\n\t\t\t\tif (this.etiquettes.indexOf(etiquette) === -Global.ONE) this.etiquettes.push(etiquette);\n\t\t\t});\n\t\t});\n\t}\n\n\t@HostListener('document:keydown', ['$event'])\n\thandleKeyboardEventDown(event: KeyboardEvent): void {\n\t\tif ((document.activeElement as Element).id !== 'etiquetteInput') {\n\t\t\tevent.preventDefault();\n\t\t\tswitch (event.key) {\n\t\t\t\tcase 'ArrowLeft':\n\t\t\t\t\tthis.increaseIndex();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight':\n\t\t\t\t\tthis.decreaseIndex();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// mettre subscribe dans le INIT\n\t// on destroy retirer subscribe\n\tadd(event: MatChipInputEvent): void {\n\t\tconst input = event.input;\n\t\tconst value = event.value;\n\t\t// Add etiquette\n\t\tif (this.selectedEtiquettes.indexOf(value) === this.outOfBounds) {\n\t\t\tconst index = this.etiquettes.findIndex((x) => x === value);\n\t\t\tif (index >= 0) {\n\t\t\t\tthis.selectedEtiquettes.push(this.etiquettes[index]);\n\t\t\t\tthis.setDrawingFilter();\n\t\t\t} else {\n\t\t\t\tif (document.activeElement === document.getElementById('etiquetteInput')) {\n\t\t\t\t\tthis.snackBar.open('étiquette non existant', '', {\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Reset the input value\n\t\tif (input) {\n\t\t\tinput.value = '';\n\t\t}\n\t\tthis.etiquetteCtrl.setValue(null);\n\t}\n\n\tremove(etiquette: string): void {\n\t\tconst index = this.selectedEtiquettes.indexOf(etiquette);\n\t\tif (index >= 0) {\n\t\t\tthis.selectedEtiquettes.splice(index, Global.ONE);\n\t\t\tif (this.selectedEtiquettes.length === 0) {\n\t\t\t\tthis.noDrawingFilter();\n\t\t\t} else {\n\t\t\t\tthis.setDrawingFilter();\n\t\t\t}\n\t\t}\n\t}\n\n\tselected(event: MatAutocompleteSelectedEvent): void {\n\t\tif (this.selectedEtiquettes.indexOf(event.option.value) === this.outOfBounds) {\n\t\t\tthis.selectedEtiquettes.push(event.option.value);\n\t\t\tthis.setDrawingFilter();\n\t\t}\n\t\tthis.etiquetteInput.nativeElement.value = '';\n\t\tthis.etiquetteCtrl.setValue(null);\n\t}\n\n\tprivate _filter(value: string): string[] {\n\t\tconst filterValue = value.toLowerCase();\n\t\treturn this.etiquettes.filter(\n\t\t\t(etiquette) => etiquette.toLowerCase().indexOf(filterValue) === 0 && this.selectedEtiquettes.indexOf(etiquette) === this.outOfBounds,\n\t\t);\n\t}\n\n\tprivate setDrawingFilter(): void {\n\t\tthis.filteredDrawing = [];\n\t\tthis.indexFiche = 0;\n\t\tfor (let i = 0; i < this.allDrawing.length; i++) {\n\t\t\tthis.selectedEtiquettes.forEach((etiquettes) => {\n\t\t\t\tif (this.allDrawing[i].etiquette.indexOf(etiquettes) !== -Global.ONE && this.filteredDrawing.indexOf(i) === -Global.ONE)\n\t\t\t\t\tthis.filteredDrawing.push(i);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate noDrawingFilter(): void {\n\t\tthis.filteredDrawing = [];\n\t\tthis.indexFiche = 0;\n\t\tfor (let i = 0; i < this.allDrawing.length; i++) {\n\t\t\tthis.filteredDrawing.push(i);\n\t\t}\n\t}\n\n\tlesThanThreeDrawing(indexWithOneTwo: number, indexWithTwo: number): Dessin {\n\t\tif (this.filteredDrawing.length === 2 && this.indexFiche === indexWithTwo) return this.allDrawing[this.filteredDrawing[Global.ONE]];\n\t\tif (this.indexFiche === indexWithOneTwo) return this.allDrawing[this.filteredDrawing[0]];\n\t\treturn this.emptyDrawing;\n\t}\n\n\tget centerFiche(): Dessin {\n\t\tlet dessin: Dessin;\n\t\tif (this.filteredDrawing.length === 0) return this.emptyDrawing; // 0 dessin\n\t\tif (this.filteredDrawing.length < Global.LESS_THEN_THREE_DRAWING) {\n\t\t\t// 1-2 dessin\n\t\t\tdessin = this.lesThanThreeDrawing(0, Global.ONE);\n\t\t} else {\n\t\t\tdessin = this.allDrawing[this.filteredDrawing[this.indexFiche]];\n\t\t}\n\t\tif (dessin.name !== 'Dessin vide' && dessin.image === undefined && !this.centerIsLoading) {\n\t\t\tthis.centerIsLoading = true;\n\t\t\tthis.addImageToDrawing(dessin).then(() => {\n\t\t\t\tthis.centerIsLoading = false;\n\t\t\t});\n\t\t}\n\t\treturn dessin;\n\t}\n\n\tget previousFiche(): Dessin {\n\t\t// 1,2 //-1\n\t\tlet dessin: Dessin;\n\t\tif (this.filteredDrawing.length === 0) return this.emptyDrawing; // 0 dessin\n\t\tif (this.filteredDrawing.length < Global.LESS_THEN_THREE_DRAWING) {\n\t\t\t// 1-2 dessin\n\t\t\tdessin = this.lesThanThreeDrawing(1, 2);\n\t\t} else {\n\t\t\tdessin = this.allDrawing[this.filteredDrawing[this.indexFiche - 1]];\n\t\t\tif (this.indexFiche - Global.ONE === -Global.ONE)\n\t\t\t\tdessin = this.allDrawing[this.filteredDrawing[this.filteredDrawing.length - Global.ONE]];\n\t\t}\n\t\tif (dessin.name !== 'Dessin vide' && dessin.image === undefined && !this.previousIsLoading) {\n\t\t\tthis.previousIsLoading = true;\n\t\t\tthis.addImageToDrawing(dessin).then(() => {\n\t\t\t\tthis.previousIsLoading = false;\n\t\t\t});\n\t\t}\n\t\treturn dessin;\n\t}\n\n\tget nextFiche(): Dessin {\n\t\t// 2-0\n\t\tlet dessin: Dessin;\n\t\tif (this.filteredDrawing.length === 0) return this.emptyDrawing; // 0 dessin\n\t\tif (this.filteredDrawing.length < Global.LESS_THEN_THREE_DRAWING) {\n\t\t\t// 1-2 dessin\n\t\t\tdessin = this.lesThanThreeDrawing(2, 0);\n\t\t} else {\n\t\t\tdessin = this.allDrawing[this.filteredDrawing[this.indexFiche + Global.ONE]];\n\t\t\tif (this.indexFiche + 1 === this.filteredDrawing.length) dessin = this.allDrawing[this.filteredDrawing[0]];\n\t\t}\n\t\tif (dessin.name !== 'Dessin vide' && dessin.image === undefined && !this.nextIsLoading) {\n\t\t\tthis.nextIsLoading = true;\n\t\t\tthis.addImageToDrawing(dessin).then(() => {\n\t\t\t\tthis.nextIsLoading = false;\n\t\t\t});\n\t\t}\n\t\treturn dessin;\n\t}\n\n\tdecreaseIndex(): void {\n\t\tthis.indexFiche--;\n\t\tif (this.indexFiche === -Global.ONE)\n\t\t\tthis.indexFiche = this.filteredDrawing.length < Global.LESS_THEN_THREE_DRAWING ? 2 : this.filteredDrawing.length - Global.ONE;\n\t}\n\n\tincreaseIndex(): void {\n\t\tthis.indexFiche++;\n\t\tif (this.filteredDrawing.length < Global.LESS_THEN_THREE_DRAWING) {\n\t\t\tif (this.indexFiche > 2) this.indexFiche = 0;\n\t\t} else {\n\t\t\tif (this.indexFiche >= this.filteredDrawing.length) this.indexFiche = 0;\n\t\t}\n\t}\n\n\tasync getAllDrawing(): Promise<void> {\n\t\tawait this.basicService\n\t\t\t.basicGet()\n\t\t\t.then((drawing: Dessin[]) => {\n\t\t\t\tthis.allDrawing = drawing;\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tif (error) {\n\t\t\t\t\tthis.allDrawing = [];\n\t\t\t\t\tthis.snackBar.open('une erreur est survenue', '', {\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tdeleteDrawing(drawing: Dessin): void {\n\t\tconst data = new FormData();\n\t\tdata.append('dessin', drawing.name);\n\t\tdata.append('tags', JSON.stringify(this.etiquettes));\n\t\tdata.append('id', drawing.id as string);\n\t\tthis.basicService.deletePost(data).subscribe((response: HttpResponse<void>) => {\n\t\t\tlet message = '';\n\t\t\tswitch (response.status) {\n\t\t\t\tcase StatusCodes.CREATED:\n\t\t\t\t\tmessage = 'le dessin a été enlevé';\n\t\t\t\t\tbreak;\n\t\t\t\tcase StatusCodes.BAD_REQUEST:\n\t\t\t\t\tmessage = \"le dessin n'a pas pu être supprimé\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase StatusCodes.INTERNAL_SERVER_ERROR:\n\t\t\t\t\tmessage = 'Une erreur est survenue';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.snackBar.open(message, '', {\n\t\t\t\tduration: 2000,\n\t\t\t});\n\t\t});\n\n\t\tthis.allDrawing.splice(this.allDrawing.indexOf(drawing), Global.ONE);\n\t\tif (this.selectedEtiquettes.length === 0) {\n\t\t\tthis.noDrawingFilter();\n\t\t} else {\n\t\t\tthis.setDrawingFilter();\n\t\t}\n\t}\n\n\tasync open(drawing: Dessin): Promise<void> {\n\t\tif (drawing.name === 'Dessin vide') {\n\t\t\tthis.drawingService.canvasImage = drawing.image as string;\n\t\t\tthis.dialog.close(true);\n\t\t\treturn;\n\t\t}\n\t\tif (await this.addImageToDrawing(drawing)) {\n\t\t\tthis.drawingService.canvasImage = drawing.image as string;\n\t\t\tthis.dialog.close(true);\n\t\t} else {\n\t\t\tthis.snackBar.open('le dessin ne peut etre affiche', '', {\n\t\t\t\tduration: 2000,\n\t\t\t});\n\t\t}\n\t}\n\n\tasync addImageToDrawing(drawing: Dessin): Promise<boolean> {\n\t\treturn new Promise((success) => {\n\t\t\tthis.basicService.getDrawing(drawing.id as string).subscribe(\n\t\t\t\tasync (data) => {\n\t\t\t\t\tdrawing.image = await this.blobToURL(data);\n\t\t\t\t\tsuccess(true);\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tthis.allDrawing.splice(this.allDrawing.indexOf(drawing), 1);\n\t\t\t\t\t\tif (this.selectedEtiquettes.length === 0) {\n\t\t\t\t\t\t\tthis.noDrawingFilter();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setDrawingFilter();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsuccess(false);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t});\n\t}\n\n\tasync blobToURL(blob: Blob): Promise<string> {\n\t\tconst reader = new FileReader();\n\t\treturn new Promise((success) => {\n\t\t\treader.addEventListener('load', () => {\n\t\t\t\tsuccess(reader.result as string);\n\t\t\t});\n\t\t\treader.readAsDataURL(blob);\n\t\t});\n\t}\n}\n","<h2 mat-dialog-title class=\"title\">Carrousel</h2>\n<mat-form-field>\n\t<mat-chip-list #chipList aria-label=\"etiquette selection\">\n\t\t<mat-chip *ngFor=\"let etiquette of selectedEtiquettes\" [selectable]=\"true\" [removable]=\"true\" (removed)=\"remove(etiquette)\">\n\t\t\t{{ etiquette }}\n\t\t\t<mat-icon matChipRemove>cancel</mat-icon>\n\t\t</mat-chip>\n\t\t<input\n\t\t\tplaceholder=\"filtre\"\n\t\t\t[matChipInputFor]=\"chipList\"\n\t\t\tid=\"etiquetteInput\"\n\t\t\t#etiquetteInput\n\t\t\t[formControl]=\"etiquetteCtrl\"\n\t\t\t[matAutocomplete]=\"auto\"\n\t\t\t[matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\"\n\t\t\t[matChipInputAddOnBlur]=\"true\"\n\t\t\t(matChipInputTokenEnd)=\"add($event)\"\n\t\t/>\n\t</mat-chip-list>\n\t<mat-autocomplete id=\"autoComplete\" #auto=\"matAutocomplete\" (optionSelected)=\"selected($event)\">\n\t\t<mat-option *ngFor=\"let etiquette of filteredEtiquettes | async\" [value]=\"etiquette\">\n\t\t\t{{ etiquette }}\n\t\t</mat-option>\n\t</mat-autocomplete>\n</mat-form-field>\n\n<mat-dialog-content>\n\t<button id=\"left-button\" (click)=\"increaseIndex()\">\n\t\t<mat-icon>keyboard_arrow_left</mat-icon>\n\t</button>\n\t<div class=\"fiche-container\">\n\t\t<app-fiche [dessin]=\"previousFiche\" (openFicheEvent)=\"open($event)\" (deleteFicheEvent)=\"deleteDrawing($event)\" class=\"fiche\"></app-fiche>\n\n\t\t<app-fiche [dessin]=\"centerFiche\" (openFicheEvent)=\"open($event)\" (deleteFicheEvent)=\"deleteDrawing($event)\" class=\"fiche\"></app-fiche>\n\n\t\t<app-fiche [dessin]=\"nextFiche\" (openFicheEvent)=\"open($event)\" (deleteFicheEvent)=\"deleteDrawing($event)\" class=\"fiche\"></app-fiche>\n\t</div>\n\t<button id=\"right-button\" (click)=\"decreaseIndex()\">\n\t\t<mat-icon>keyboard_arrow_right</mat-icon>\n\t</button>\n</mat-dialog-content>\n\n<mat-dialog-actions class=\"action\">\n\t<button mat-raised-button mat-dialog-close class=\"close\">Fermer</button>\n</mat-dialog-actions>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { FicheModule } from 'src/app/components/fiche/fiche.module';\nimport { CarrouselComponent } from './carrousel.component';\n@NgModule({\n\tdeclarations: [CarrouselComponent],\n\timports: [\n\t\tCommonModule,\n\t\tMatDialogModule,\n\t\tBrowserAnimationsModule,\n\t\tMatButtonModule,\n\t\tFicheModule,\n\t\tMatChipsModule,\n\t\tMatIconModule,\n\t\tMatFormFieldModule,\n\t\tMatAutocompleteModule,\n\t\tFormsModule,\n\t\tReactiveFormsModule,\n\t\tMatSnackBarModule,\n\t\tMatProgressBarModule,\n\t],\n\texports: [CarrouselComponent],\n})\nexport class CarrouselModule {}\n","import { Component } from '@angular/core';\nimport { MouseButton } from '@app/shared/global';\nimport { DrawingService } from 'src/app/services/drawing/drawing.service';\n\n@Component({\n\tselector: 'app-color-panel',\n\ttemplateUrl: './color-panel.component.html',\n\tstyleUrls: ['./color-panel.component.scss'],\n})\nexport class ColorPanelComponent {\n\tprimaryColorPicker: boolean = false;\n\tsecondColorPicker: boolean = false;\n\n\tconstructor(private drawingService: DrawingService) {}\n\n\tswitchMainColors(): void {\n\t\tconst primaryColor: string = this.primaryColor;\n\t\tthis.primaryColor = this.secondaryColor;\n\t\tthis.secondaryColor = primaryColor;\n\t}\n\n\tuseColorHistory(event: MouseEvent, color: string): void {\n\t\tlet changePrimaryColor: boolean | null = null;\n\t\tif (event.button === MouseButton.Left) {\n\t\t\tchangePrimaryColor = true;\n\t\t} else if (event.button === MouseButton.Right) {\n\t\t\tchangePrimaryColor = false;\n\t\t}\n\n\t\tif (changePrimaryColor !== null) {\n\t\t\tthis.drawingService.changeColor(color, changePrimaryColor, false);\n\t\t}\n\t}\n\n\tget colorHistory(): string[] {\n\t\treturn this.drawingService.colorHistory;\n\t}\n\n\tget primaryColor(): string {\n\t\treturn this.drawingService.primaryColor;\n\t}\n\n\tset primaryColor(value: string) {\n\t\tthis.drawingService.primaryColor = value;\n\t}\n\n\tget secondaryColor(): string {\n\t\treturn this.drawingService.secondaryColor;\n\t}\n\n\tset secondaryColor(value: string) {\n\t\tthis.drawingService.secondaryColor = value;\n\t}\n}\n","<div class=\"switch-wrapper\">\n\t<div class=\"main-color primary\" [ngStyle]=\"{ 'background-color': this.primaryColor }\" (click)=\"primaryColorPicker = true\"></div>\n\n\t<app-color-picker\n\t\t#mainColorPicker\n\t\t*ngIf=\"primaryColorPicker\"\n\t\tclass=\"color-picker primary\"\n\t\t[isPrimaryColor]=\"true\"\n\t\t(shouldHide)=\"primaryColorPicker = false; mainColorPicker.updateColor()\"\n\t></app-color-picker>\n\n\t<button (click)=\"switchMainColors()\"></button>\n\n\t<div class=\"main-color secondary\" [ngStyle]=\"{ 'background-color': this.secondaryColor }\" (click)=\"secondColorPicker = true\"></div>\n\t<app-color-picker\n\t\t#secondaryColorPicker\n\t\t*ngIf=\"secondColorPicker\"\n\t\tclass=\"color-picker secondary\"\n\t\t[isPrimaryColor]=\"false\"\n\t\t(shouldHide)=\"secondColorPicker = false; secondaryColorPicker.updateColor()\"\n\t></app-color-picker>\n</div>\n<div class=\"color-history-wrapper\">\n\t<div\n\t\tclass=\"color\"\n\t\t*ngFor=\"let color of colorHistory; let i = index\"\n\t\t[ngStyle]=\"{ 'background-color': colorHistory[i] || '#e6e6e6' }\"\n\t\t(mousedown)=\"useColorHistory($event, this.colorHistory[i])\"\n\t></div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { ColorPickerModule } from '@app/components/color-picker/color-picker.module';\nimport { ColorPanelComponent } from './color-panel.component';\n\n@NgModule({\n\tdeclarations: [ColorPanelComponent],\n\timports: [CommonModule, ColorPickerModule, MatButtonModule, MatMenuModule],\n\texports: [ColorPanelComponent],\n})\nexport class ColorPanelModule {}\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Input, OnChanges, Output, SimpleChanges, ViewChild } from '@angular/core';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global } from 'src/app/shared/global';\n\n// Ce composant a ete construit a l'aide du tutoriel suivant\n// https://malcoded.com/posts/angular-color-picker/\n\n@Component({\n\tselector: 'app-color-palette',\n\ttemplateUrl: './color-palette.component.html',\n\tstyleUrls: ['./color-palette.component.scss'],\n})\nexport class ColorPaletteComponent implements AfterViewInit, OnChanges {\n\t@ViewChild('canvas') canvas: ElementRef<HTMLCanvasElement>;\n\n\t@Input() hue: string;\n\t@Output() color: EventEmitter<string> = new EventEmitter();\n\n\tprivate ctx: CanvasRenderingContext2D;\n\n\tprivate selectedPosition: Vec2;\n\n\tconstructor(private drawingService: DrawingService) {\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t}\n\n\tngAfterViewInit(): void {\n\t\tthis.selectedPosition = { x: this.canvas.nativeElement.width - 1, y: 0 };\n\t\tthis.draw();\n\t}\n\n\tngOnChanges(changes: SimpleChanges): void {\n\t\tif (changes.hue && this.canvas) {\n\t\t\tthis.draw();\n\t\t\tthis.emitColor(this.selectedPosition.x, this.selectedPosition.y);\n\t\t}\n\t}\n\n\tonMouseDown(evt: MouseEvent): void {\n\t\tdocument.body.addEventListener('mousemove', this.onMouseMove);\n\t\tdocument.body.addEventListener('mouseup', this.onMouseUp);\n\t\tthis.onMouseMove(evt);\n\t}\n\n\tprivate onMouseUp(): void {\n\t\tdocument.body.removeEventListener('mousemove', this.onMouseMove);\n\t\tdocument.body.removeEventListener('mouseup', this.onMouseUp);\n\t}\n\n\tprivate onMouseMove(evt: MouseEvent): void {\n\t\tconst canvasDimensions = this.canvas.nativeElement.getBoundingClientRect();\n\n\t\tlet x = evt.x - canvasDimensions.left;\n\t\tx = x < 0 ? 0 : x >= canvasDimensions.width ? canvasDimensions.width - 1 : x;\n\n\t\tlet y = evt.y - canvasDimensions.top;\n\t\ty = y < 0 ? 0 : y > canvasDimensions.height ? canvasDimensions.height : y;\n\n\t\tthis.selectedPosition = { x, y };\n\t\tthis.draw();\n\t\tthis.emitColor(x, y);\n\t}\n\n\tprivate emitColor(x: number, y: number): void {\n\t\tconst hexColor = this.getColorAtPosition(x, y);\n\t\tthis.color.emit(hexColor);\n\t}\n\n\tprivate getColorAtPosition(x: number, y: number): string {\n\t\tconst imageData = this.ctx.getImageData(x, y, 1, 1).data;\n\t\treturn this.drawingService.RGBToHex(imageData[0], imageData[1], imageData[2]);\n\t}\n\n\tprivate draw(): void {\n\t\tif (!this.ctx) {\n\t\t\tthis.ctx = this.canvas.nativeElement.getContext('2d') as CanvasRenderingContext2D;\n\t\t}\n\n\t\tconst width = this.canvas.nativeElement.width;\n\t\tconst height = this.canvas.nativeElement.height;\n\n\t\tthis.ctx.fillStyle = this.hue;\n\t\tthis.ctx.fillRect(1, 0, width - 1, height - 1);\n\n\t\tconst whiteGrad = this.ctx.createLinearGradient(0, 0, width - 1, 0);\n\t\twhiteGrad.addColorStop(0, '#FFFFFFFF');\n\t\twhiteGrad.addColorStop(1, '#FFFFFF00');\n\n\t\tthis.ctx.fillStyle = whiteGrad;\n\t\tthis.ctx.fillRect(0, 0, width - 1, height);\n\n\t\tconst blackGrad = this.ctx.createLinearGradient(0, 0, 0, height - 1);\n\t\tblackGrad.addColorStop(0, '#00000000');\n\t\tblackGrad.addColorStop(1, '#000000FF');\n\n\t\tthis.ctx.fillStyle = blackGrad;\n\t\tthis.ctx.fillRect(0, 1, width, height - 1);\n\n\t\tthis.ctx.strokeStyle = 'white';\n\t\tthis.ctx.fillStyle = 'white';\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(this.selectedPosition.x, this.selectedPosition.y, Global.SELECTED_RECTANGLE_HEIGHT, 0, 2 * Math.PI);\n\t\tthis.ctx.lineWidth = Global.SELECTED_LINE_WIDTH;\n\t\tthis.ctx.stroke();\n\t}\n}\n","<canvas #canvas class=\"color-palette\" width=\"150\" height=\"150\" (mousedown)=\"onMouseDown($event)\"> </canvas>\n","import { Component, ElementRef, EventEmitter, HostListener, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { EventManagerService } from '@app/services/event-manager/event-manager.service';\nimport { DrawingService } from 'src/app/services/drawing/drawing.service';\nimport { Global } from 'src/app/shared/global';\n\n@Component({\n\tselector: 'app-color-picker',\n\ttemplateUrl: './color-picker.component.html',\n\tstyleUrls: ['./color-picker.component.scss'],\n})\nexport class ColorPickerComponent implements OnInit, OnDestroy {\n\t@Input() isPrimaryColor: boolean = true;\n\t@Output() shouldHide: EventEmitter<void> = new EventEmitter();\n\n\tHEX_COLOR_PATTERN: RegExp = new RegExp('^([0-9A-Fa-f]{2})$');\n\n\thue: string = '#FF0000FF';\n\tcolor: string;\n\n\tconstructor(private drawingService: DrawingService, private eventManager: EventManagerService, private elementRef: ElementRef) {}\n\n\tngOnInit(): void {\n\t\tthis.color = this.isPrimaryColor ? this.drawingService.primaryColor : this.drawingService.secondaryColor;\n\t\tthis.eventManager.disableShortcuts();\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.eventManager.enableShortcuts();\n\t}\n\n\t@HostListener('document:mousedown', ['$event'])\n\tonMouseDown(evt: MouseEvent): void {\n\t\tconst dimensions = this.elementRef.nativeElement.getBoundingClientRect();\n\t\tconst x = evt.x - dimensions.left;\n\t\tconst y = evt.y - dimensions.top;\n\n\t\tif (x < 0 || x >= dimensions.width || y < 0 || y > dimensions.height) {\n\t\t\tthis.shouldHide.emit();\n\t\t}\n\t}\n\n\tchangeColor(color: string): void {\n\t\tthis.color = this.replaceStringAt(this.color, 0, color);\n\t}\n\n\tupdateColor(): void {\n\t\tthis.drawingService.changeColor(this.color, this.isPrimaryColor, true);\n\t}\n\n\t@HostListener('document:keydown', ['$event'])\n\thandleKeyDown(event: KeyboardEvent): void {\n\t\tconst charCodeAt = event.key.charCodeAt(0);\n\n\t\tif (\n\t\t\t(charCodeAt >= '0'.charCodeAt(0) && charCodeAt <= '9'.charCodeAt(0)) ||\n\t\t\t(charCodeAt >= 'a'.charCodeAt(0) && charCodeAt <= 'f'.charCodeAt(0)) ||\n\t\t\t(charCodeAt >= 'A'.charCodeAt(0) && charCodeAt <= 'F'.charCodeAt(0)) ||\n\t\t\tevent.key === 'Backspace' ||\n\t\t\tevent.key === 'Delete'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t}\n\n\tget hexR(): string {\n\t\treturn this.color.substring(Global.RED_INDEX_HEX, Global.RED_INDEX_HEX + Global.HEX_COLOR_LENGTH);\n\t}\n\n\tset hexR(value: string) {\n\t\tif (value.length === 2 && value.match(this.HEX_COLOR_PATTERN)) {\n\t\t\tthis.color = this.replaceStringAt(this.color, Global.RED_INDEX_HEX, value);\n\t\t}\n\t}\n\n\tget hexG(): string {\n\t\treturn this.color.substring(Global.GREEN_INDEX_HEX, Global.GREEN_INDEX_HEX + Global.HEX_COLOR_LENGTH);\n\t}\n\n\tset hexG(value: string) {\n\t\tif (value.length === 2 && value.match(this.HEX_COLOR_PATTERN)) {\n\t\t\tthis.color = this.replaceStringAt(this.color, Global.GREEN_INDEX_HEX, value);\n\t\t}\n\t}\n\n\tget hexB(): string {\n\t\treturn this.color.substring(Global.BLUE_INDEX_HEX, Global.BLUE_INDEX_HEX + Global.HEX_COLOR_LENGTH);\n\t}\n\n\tset hexB(value: string) {\n\t\tif (value.length === 2 && value.match(this.HEX_COLOR_PATTERN)) {\n\t\t\tthis.color = this.replaceStringAt(this.color, Global.BLUE_INDEX_HEX, value);\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\tconst alphaString: string = this.color.substring(Global.ALPHA_INDEX_HEX, Global.ALPHA_INDEX_HEX + Global.HEX_COLOR_LENGTH);\n\t\treturn +(parseInt(alphaString, 16) / Global.MAX_HEX_VALUE).toFixed(2);\n\t}\n\n\tset alpha(value: number) {\n\t\tlet newAlpha = Math.floor(value * Global.MAX_HEX_VALUE)\n\t\t\t.toString(16)\n\t\t\t.toUpperCase();\n\n\t\tif (newAlpha.length === 1) newAlpha = '0' + newAlpha;\n\n\t\tthis.color = this.replaceStringAt(this.color, Global.ALPHA_INDEX_HEX, newAlpha);\n\t}\n\n\tprivate replaceStringAt(stringToModify: string, index: number, stringToInsert: string): string {\n\t\treturn stringToModify.substring(0, index) + stringToInsert + stringToModify.substring(index + stringToInsert.length);\n\t}\n}\n","<div class=\"color-wrapper\">\n\t<app-color-palette #colorPalette [hue]=\"hue\" (color)=\"changeColor($event)\"></app-color-palette>\n\t<app-color-slider #colorSlider (color)=\"this.hue = $event\"></app-color-slider>\n</div>\n<div class=\"input-wrapper\">\n\t<div class=\"text-input-wrapper\">\n\t\t<mat-form-field class=\"text-input\">\n\t\t\t<mat-label>R</mat-label>\n\t\t\t<input matInput type=\"search\" name=\"r\" [(ngModel)]=\"this.hexR\" maxlength=\"2\" pattern=\"[a-fA-F0-9]{2}\" autocomplete=\"off\" />\n\t\t</mat-form-field>\n\t\t<mat-form-field class=\"text-input\">\n\t\t\t<mat-label>G</mat-label>\n\t\t\t<input matInput type=\"search\" name=\"g\" [(ngModel)]=\"this.hexG\" maxlength=\"2\" pattern=\"[a-fA-F0-9]{2}\" autocomplete=\"off\" />\n\t\t</mat-form-field>\n\t\t<mat-form-field class=\"text-input\">\n\t\t\t<mat-label>B</mat-label>\n\t\t\t<input matInput type=\"search\" name=\"b\" [(ngModel)]=\"this.hexB\" maxlength=\"2\" pattern=\"[a-fA-F0-9]{2}\" autocomplete=\"off\" />\n\t\t</mat-form-field>\n\t</div>\n\n\t<div class=\"opacity-color-wrapper\">\n\t\t<mat-slider\n\t\t\tclass=\"opacity-slider\"\n\t\t\tname=\"opacity\"\n\t\t\tmin=\"0\"\n\t\t\tmax=\"1\"\n\t\t\tstep=\"0.01\"\n\t\t\t[value]=\"this.alpha\"\n\t\t\t(input)=\"this.alpha = $event.value\"\n\t\t\tthumbLabel=\"true\"\n\t\t></mat-slider>\n\t\t<b> {{ this.alpha }}</b>\n\t\t<div class=\"color-div\" [ngStyle]=\"{ 'background-color': this.color, opacity: this.alpha }\"></div>\n\t</div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { ColorPickerComponent } from 'src/app/components/color-picker/color-picker.component';\nimport { ColorPaletteComponent } from './color-palette/color-palette.component';\nimport { ColorSliderComponent } from './color-slider/color-slider.component';\n\n@NgModule({\n\tdeclarations: [ColorPickerComponent, ColorPaletteComponent, ColorSliderComponent],\n\timports: [CommonModule, MatInputModule, MatSliderModule, MatFormFieldModule, FormsModule],\n\texports: [ColorPickerComponent],\n})\nexport class ColorPickerModule {}\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Output, ViewChild } from '@angular/core';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global } from 'src/app/shared/global';\n\n// Ce composant a ete construit a l'aide du tutoriel suivant\n// https://malcoded.com/posts/angular-color-picker/\n\n@Component({\n\tselector: 'app-color-slider',\n\ttemplateUrl: './color-slider.component.html',\n\tstyleUrls: ['./color-slider.component.scss'],\n})\nexport class ColorSliderComponent implements AfterViewInit {\n\t@ViewChild('canvas') canvas: ElementRef<HTMLCanvasElement>;\n\t@Output() color: EventEmitter<string> = new EventEmitter();\n\n\tprivate ctx: CanvasRenderingContext2D;\n\tprivate selectedHeight: number;\n\n\tconstructor(private drawingService: DrawingService) {\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t}\n\n\tngAfterViewInit(): void {\n\t\tthis.selectedHeight = 1;\n\t\tthis.draw();\n\t}\n\n\tprivate onMouseUp(): void {\n\t\tdocument.body.removeEventListener('mousemove', this.onMouseMove);\n\t\tdocument.body.removeEventListener('mouseup', this.onMouseUp);\n\t}\n\n\tonMouseDown(evt: MouseEvent): void {\n\t\tdocument.body.addEventListener('mousemove', this.onMouseMove);\n\t\tdocument.body.addEventListener('mouseup', this.onMouseUp);\n\t\tthis.onMouseMove(evt);\n\t}\n\n\tprivate onMouseMove(evt: MouseEvent): void {\n\t\tconst canvasDimensions = this.canvas.nativeElement.getBoundingClientRect();\n\n\t\tlet y = evt.y - canvasDimensions.top;\n\t\ty = y < 0 ? 0 : y >= canvasDimensions.height ? canvasDimensions.height - 1 : y;\n\n\t\tthis.selectedHeight = y;\n\t\tthis.draw();\n\t\tthis.emitColor(this.canvas.nativeElement.width / 2, y);\n\t}\n\n\tprivate emitColor(x: number, y: number): void {\n\t\tconst hexColor = this.getColorAtPosition(x, y);\n\t\tthis.color.emit(hexColor);\n\t}\n\n\tprivate getColorAtPosition(x: number, y: number): string {\n\t\tconst imageData = this.ctx.getImageData(x, y, 1, 1).data;\n\t\treturn this.drawingService.RGBToHex(imageData[0], imageData[1], imageData[2]);\n\t}\n\n\tprivate draw(): void {\n\t\tif (!this.ctx) {\n\t\t\tthis.ctx = this.canvas.nativeElement.getContext('2d') as CanvasRenderingContext2D;\n\t\t}\n\n\t\tconst width = this.canvas.nativeElement.width;\n\t\tconst height = this.canvas.nativeElement.height;\n\n\t\tconst gradient = this.ctx.createLinearGradient(0, 0, 0, height);\n\t\t// tslint:disable:no-magic-numbers\n\t\tgradient.addColorStop(0, '#FF0000');\n\t\tgradient.addColorStop(1 / 6, '#FFFF00');\n\t\tgradient.addColorStop(1 / 3, '#00FF00');\n\t\tgradient.addColorStop(1 / 2, '#00FFFF');\n\t\tgradient.addColorStop(2 / 3, '#0000FF');\n\t\tgradient.addColorStop(5 / 6, '#FF00FF');\n\t\tgradient.addColorStop(1, '#FF0000');\n\t\t// tslint:enable:no-magic-numbers\n\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.rect(0, 0, width, height);\n\t\tthis.ctx.fillStyle = gradient;\n\t\tthis.ctx.fill();\n\t\tthis.ctx.closePath();\n\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.strokeStyle = 'white';\n\t\tthis.ctx.lineWidth = Global.SELECTED_LINE_WIDTH;\n\t\tthis.ctx.rect(0, this.selectedHeight - Global.SELECTED_LINE_WIDTH, width, Global.SELECTED_RECTANGLE_HEIGHT);\n\t\tthis.ctx.stroke();\n\t\tthis.ctx.closePath();\n\t}\n}\n","<canvas #canvas class=\"color-slider\" width=\"30\" height=\"150\" (mousedown)=\"onMouseDown($event)\"></canvas>\n","import { AfterViewInit, Component, ElementRef, ViewChild } from '@angular/core';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { EventManagerService } from '@app/services/event-manager/event-manager.service';\nimport { GridService } from '@app/services/grid/grid.service';\nimport { Global } from '@app/shared/global';\n\n@Component({\n\tselector: 'app-drawing',\n\ttemplateUrl: './drawing.component.html',\n\tstyleUrls: ['./drawing.component.scss'],\n})\nexport class DrawingComponent implements AfterViewInit {\n\t@ViewChild('baseCanvas', { static: false })\n\tbaseCanvas: ElementRef<HTMLCanvasElement>;\n\t// On utilise ce canvas pour dessiner sans affecter le dessin final\n\t@ViewChild('previewCanvas', { static: false })\n\tpreviewCanvas: ElementRef<HTMLCanvasElement>;\n\t@ViewChild('container', { static: false })\n\tcontainer: ElementRef<HTMLDivElement>;\n\tisResizing: boolean;\n\tprivate baseCtx: CanvasRenderingContext2D;\n\tprivate previewCtx: CanvasRenderingContext2D;\n\tcanvasSize: Vec2;\n\tcanvasResizePreview: Vec2;\n\tcanvasLimit: Vec2;\n\n\tconstructor(private drawingService: DrawingService, private eventManager: EventManagerService, public gridService: GridService) {\n\t\tthis.isResizing = false;\n\t\tthis.canvasSize = { x: Global.DEFAULT_WIDTH, y: Global.DEFAULT_HEIGHT };\n\t\tthis.canvasResizePreview = { x: Global.DEFAULT_WIDTH, y: Global.DEFAULT_HEIGHT };\n\t\tthis.canvasLimit = { x: Global.DEFAULT_WIDTH, y: Global.DEFAULT_HEIGHT };\n\t\tthis.gridService.options.gridOptions.isActive = false;\n\t}\n\n\tngAfterViewInit(): void {\n\t\tthis.baseCtx = this.baseCanvas.nativeElement.getContext('2d') as CanvasRenderingContext2D;\n\t\tthis.drawingService.baseCtx = this.baseCtx;\n\t\tthis.previewCtx = this.previewCanvas.nativeElement.getContext('2d') as CanvasRenderingContext2D;\n\t\tthis.drawingService.previewCtx = this.previewCtx;\n\t\tthis.drawingService.containerSize.x = this.container.nativeElement.clientWidth;\n\t\tthis.drawingService.containerSize.y = this.container.nativeElement.clientHeight;\n\t\tthis.drawingService.canvasSize = this.canvasSize;\n\n\t\tsetTimeout(() => {\n\t\t\tthis.canvasLimit.x = this.drawingService.containerSize.x - Global.DRAWING_CONTAINER_SIZE_BUFFER;\n\t\t\tthis.canvasLimit.y = this.drawingService.containerSize.y - Global.DRAWING_CONTAINER_SIZE_BUFFER;\n\t\t\tthis.drawingService.initCanvas();\n\t\t});\n\t}\n\n\tget canvasWidth(): number {\n\t\treturn this.canvasSize.x;\n\t}\n\n\tget canvasHeight(): number {\n\t\treturn this.canvasSize.y;\n\t}\n\tget limitWidth(): number {\n\t\treturn this.canvasLimit.x;\n\t}\n\n\tget limitHeight(): number {\n\t\treturn this.canvasLimit.y;\n\t}\n\n\tget canvasPreview(): Vec2 {\n\t\treturn this.canvasResizePreview;\n\t}\n\n\tget cornerResizePos(): Vec2 {\n\t\treturn this.drawingService.cornerResizePos;\n\t}\n\n\tget rightResizePos(): Vec2 {\n\t\treturn this.drawingService.rightResizePos;\n\t}\n\n\tget bottomResizePos(): Vec2 {\n\t\treturn this.drawingService.bottomResizePos;\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tif (!this.isResizing) {\n\t\t\tthis.eventManager.startDrawing(event);\n\t\t}\n\t}\n\n\tstartPreview(): void {\n\t\tthis.isResizing = true;\n\t}\n\n\tpreview(distanceX: number, distanceY: number): void {\n\t\tthis.canvasResizePreview.x = this.canvasSize.x + distanceX;\n\t\tthis.canvasResizePreview.y = this.canvasSize.y + distanceY;\n\t\tthis.drawingService.placeResizeButton(this.canvasResizePreview);\n\t}\n\n\tendPreview(): void {\n\t\tconst oldCanvas = this.baseCtx.canvas.toDataURL();\n\t\tconst img = new Image();\n\t\tthis.isResizing = false;\n\t\tthis.previewCtx.canvas.width = this.baseCtx.canvas.width = this.canvasSize.x = this.canvasResizePreview.x;\n\t\tthis.previewCtx.canvas.height = this.baseCtx.canvas.height = this.canvasSize.y = this.canvasResizePreview.y;\n\t\tthis.baseCtx.fillStyle = 'white';\n\t\tthis.baseCtx.fillRect(0, 0, this.canvasSize.x, this.canvasSize.y);\n\t\tthis.drawingService.placeResizeButton(this.canvasSize);\n\t\timg.onload = () => {\n\t\t\tthis.baseCtx.drawImage(img, 0, 0);\n\t\t\tlocalStorage.setItem('save', this.baseCtx.canvas.toDataURL());\n\t\t};\n\t\timg.src = oldCanvas;\n\t\tconst canSize = { ...this.canvasResizePreview };\n\t\tconst funcResize: CallableFunction = () => {\n\t\t\tthis.actionWrapper(img, oldCanvas, canSize);\n\t\t};\n\t\tthis.drawingService.addAction(funcResize);\n\t}\n\n\tactionWrapper(img: HTMLImageElement, oldCanvas: string, canSize: Vec2): void {\n\t\tthis.previewCtx.canvas.width = this.baseCtx.canvas.width = this.canvasSize.x = canSize.x;\n\t\tthis.previewCtx.canvas.height = this.baseCtx.canvas.height = this.canvasSize.y = canSize.y;\n\t\tthis.drawingService.placeResizeButton(this.canvasSize);\n\t\timg.onload = () => {\n\t\t\tthis.baseCtx.drawImage(img, 0, 0);\n\t\t};\n\t\timg.src = oldCanvas;\n\t}\n}\n","<div id=\"drawing-container\" #container>\n\t<div class=\"limit\" [ngStyle]=\"{ 'width.px': limitWidth, 'height.px': limitHeight }\">\n\t\t<div id=\"canvas-container\" [ngStyle]=\"{ 'width.px': canvasWidth, 'height.px': canvasHeight }\" (mousedown)=\"onMouseDown($event)\">\n\t\t\t<canvas id=\"canvas\" #baseCanvas></canvas>\n\t\t\t<canvas id=\"previewLayer\" #previewCanvas></canvas>\n\t\t\t<div>\n\t\t\t\t<svg class=\"grid\" [attr.width]=\"this.canvasWidth\" [attr.height]=\"this.canvasHeight\" *ngIf=\"gridService.options.gridOptions.isActive\">\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t<pattern\n\t\t\t\t\t\t\tid=\"grid\"\n\t\t\t\t\t\t\t[attr.width]=\"gridService.options.gridOptions.size\"\n\t\t\t\t\t\t\t[attr.height]=\"gridService.options.gridOptions.size\"\n\t\t\t\t\t\t\tpatternUnits=\"userSpaceOnUse\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t[attr.d]=\"gridService.vPath\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tstroke=\"gray\"\n\t\t\t\t\t\t\t\tstroke-width=\"1\"\n\t\t\t\t\t\t\t\t[ngStyle]=\"{ opacity: gridService.options.gridOptions.opacity / 100 }\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t[attr.d]=\"gridService.hPath\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tstroke=\"gray\"\n\t\t\t\t\t\t\t\tstroke-width=\"1\"\n\t\t\t\t\t\t\t\t[ngStyle]=\"{ opacity: gridService.options.gridOptions.opacity / 100 }\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</pattern>\n\t\t\t\t\t</defs>\n\t\t\t\t\t<rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n\t\t\t\t</svg>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tid=\"corner-cp\"\n\t\t\t\tclass=\"resize-button\"\n\t\t\t\tcdkDrag\n\t\t\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t\t\tcdkDragBoundary=\".limit\"\n\t\t\t\t[cdkDragFreeDragPosition]=\"cornerResizePos\"\n\t\t\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y)\"\n\t\t\t></div>\n\n\t\t\t<div\n\t\t\t\tid=\"right-cp\"\n\t\t\t\tclass=\"resize-button\"\n\t\t\t\tcdkDrag\n\t\t\t\tcdkDragLockAxis=\"x\"\n\t\t\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t\t\tcdkDragBoundary=\".limit\"\n\t\t\t\t[cdkDragFreeDragPosition]=\"rightResizePos\"\n\t\t\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y)\"\n\t\t\t></div>\n\n\t\t\t<div\n\t\t\t\tid=\"bottom-cp\"\n\t\t\t\tclass=\"resize-button\"\n\t\t\t\tcdkDrag\n\t\t\t\tcdkDragLockAxis=\"y\"\n\t\t\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t\t\tcdkDragBoundary=\".limit\"\n\t\t\t\t[cdkDragFreeDragPosition]=\"bottomResizePos\"\n\t\t\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y)\"\n\t\t\t></div>\n\t\t\t<div *ngIf=\"isResizing\" [ngStyle]=\"{ 'width.px': canvasPreview.x, 'height.px': canvasPreview.y }\" class=\"preview\"></div>\n\t\t\t<app-selection-box id=\"selection\"></app-selection-box>\n\t\t</div>\n\t</div>\n</div>\n","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { SelectionBoxModule } from '@app/components/selection/selection-box/selection-box.module';\nimport { DrawingComponent } from './drawing.component';\n\n@NgModule({\n\tdeclarations: [DrawingComponent],\n\timports: [CommonModule, BrowserAnimationsModule, DragDropModule, SelectionBoxModule],\n\texports: [DrawingComponent],\n})\nexport class DrawingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { EventManagerService } from '@app/services/event-manager/event-manager.service';\n@Component({\n\tselector: 'app-editor',\n\ttemplateUrl: './editor.component.html',\n\tstyleUrls: ['./editor.component.scss'],\n})\nexport class EditorComponent implements OnInit {\n\tconstructor(private eventManager: EventManagerService) {}\n\n\tngOnInit(): void {\n\t\t// Je trouve plus pertinent d'avoir ces deux declarations que d'avoir deux fonctions\n\t\t// avec deux hostlistener qui font seulement appeler la fonction\n\t\tdocument.body.addEventListener('mousemove', this.eventManager.onMouseMove);\n\t\tdocument.body.addEventListener('wheel', this.eventManager.onWheel);\n\t}\n}\n","<body class=\"background\" oncontextmenu=\"return false\">\n\t<app-sidebar class=\"sidebar\"></app-sidebar>\n\t<app-drawing class=\"drawing\"></app-drawing>\n</body>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { DrawingModule } from 'src/app/components/drawing/drawing.module';\nimport { SidebarModule } from 'src/app/components/sidebar/sidebar.module';\nimport { EditorComponent } from './editor.component';\n\n@NgModule({\n\tdeclarations: [EditorComponent],\n\timports: [CommonModule, BrowserAnimationsModule, SidebarModule, DrawingModule],\n\texports: [EditorComponent],\n\tproviders: [],\n})\nexport class EditorModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\n\n@Component({\n\tselector: 'app-export',\n\ttemplateUrl: './export.component.html',\n\tstyleUrls: ['./export.component.scss'],\n})\nexport class ExportComponent implements OnInit {\n\tpngImage: string = '';\n\tjpegImage: string = '';\n\tname: string = '';\n\ttype: string = '.png';\n\timgurUrl: string = 'https://api.imgur.com/3/image';\n\tpostLink: string = '';\n\tclientID: string = '69294db23e08528';\n\tfilterList: string[] = ['blur', 'grayscale', 'sepia', 'invert', 'darken', 'none'];\n\tfilter: string = 'none';\n\timageUrl: string;\n\n\tconstructor(private drawingService: DrawingService, private snackBar: MatSnackBar) {}\n\n\tngOnInit(): void {\n\t\tthis.pngImage = this.drawingService.baseCtx.canvas.toDataURL('image/png');\n\t\tthis.jpegImage = this.drawingService.baseCtx.canvas.toDataURL('image/jpeg');\n\t}\n\n\texportLocal(): void {\n\t\tconst exportLink = document.getElementById('link');\n\t\tif (exportLink) {\n\t\t\tif (!this.name) {\n\t\t\t\tthis.name = 'monDessin';\n\t\t\t}\n\t\t\texportLink.setAttribute('download', this.name + this.type);\n\t\t\tif (this.type === '.png') {\n\t\t\t\texportLink.setAttribute('href', this.pngImage.replace('image/png', 'image/octet-stream'));\n\t\t\t} else if (this.type === '.jpeg') {\n\t\t\t\texportLink.setAttribute('href', this.jpegImage.replace('image/jpeg', 'image/octet-stream'));\n\t\t\t}\n\t\t\texportLink.click();\n\t\t}\n\t}\n\n\tasync exportImgur(): Promise<void> {\n\t\tswitch (this.type) {\n\t\t\tcase '.png': {\n\t\t\t\tthis.imageUrl = this.pngImage.split(',')[1];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase '.jpeg': {\n\t\t\t\tthis.imageUrl = this.jpegImage.split(',')[1];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst myHeaders = new Headers();\n\t\tmyHeaders.append('Accept', 'application/json');\n\t\tmyHeaders.append('Authorization', 'Client-ID ' + this.clientID);\n\n\t\tconst formdata = new FormData();\n\t\tformdata.append('type', 'base64');\n\t\tformdata.append('image', this.imageUrl);\n\t\tformdata.append('name', this.name);\n\n\t\tconst requestOptions: RequestInit = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: myHeaders,\n\t\t\tbody: formdata,\n\t\t\tredirect: 'manual',\n\t\t};\n\n\t\tfetch(this.imgurUrl, requestOptions)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((post) => {\n\t\t\t\tthis.postLink = post.data.link;\n\t\t\t\tthis.openSnackBar();\n\t\t\t})\n\t\t\t.catch((error) => console.log('error', error));\n\t}\n\n\topenSnackBar(): void {\n\t\tthis.snackBar\n\t\t\t.open('Publication réussie: ' + this.postLink, 'Ouvrir', { duration: 4000 })\n\t\t\t.onAction()\n\t\t\t// tslint:disable-next-line: deprecation\n\t\t\t.subscribe(() => {\n\t\t\t\twindow.open(this.postLink);\n\t\t\t});\n\t}\n\n\tcreateModifiableImage(): void {\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.id = 'tmp-canvas';\n\t\tcanvas.width = this.drawingService.baseCtx.canvas.width;\n\t\tcanvas.height = this.drawingService.baseCtx.canvas.height;\n\t\tconst ctx = canvas.getContext('2d');\n\n\t\tthis.applyFilter(ctx);\n\t}\n\n\tapplyFilter(ctx: CanvasRenderingContext2D | null): void {\n\t\tif (ctx) {\n\t\t\tswitch (this.filter) {\n\t\t\t\tcase 'blur': {\n\t\t\t\t\tctx.filter = 'blur(4px)';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'grayscale': {\n\t\t\t\t\tctx.filter = 'grayscale(100%)';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'sepia': {\n\t\t\t\t\tctx.filter = 'sepia(100%)';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'invert': {\n\t\t\t\t\tctx.filter = 'invert(100%)';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'darken': {\n\t\t\t\t\tctx.filter = 'brightness(50%)';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'none': {\n\t\t\t\t\tctx.filter = 'none';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tctx.drawImage(this.drawingService.baseCtx.canvas, 0, 0, ctx.canvas.width, ctx.canvas.height);\n\t\t\tthis.pngImage = ctx.canvas.toDataURL('image/png');\n\t\t\tthis.jpegImage = ctx.canvas.toDataURL('image/jpeg');\n\t\t}\n\t}\n}\n","<h2 mat-dialog-title class=\"title\">Exporter</h2>\n\n<mat-dialog-content>\n\t<img id=\"image\" src=\"{{ pngImage }}\" />\n</mat-dialog-content>\n\n<mat-form-field>\n\t<mat-label>Nom du dessin</mat-label>\n\t<input matInput type=\"text\" [(ngModel)]=\"name\" />\n</mat-form-field>\n\n<mat-form-field class=\"content\" appearance=\"fill\">\n\t<mat-label>Type d'image</mat-label>\n\t<mat-select [(value)]=\"type\">\n\t\t<mat-option value=\".png\">png</mat-option>\n\t\t<mat-option value=\".jpeg\">jpeg</mat-option>\n\t</mat-select>\n</mat-form-field>\n<a id=\"link\"></a>\n\n<mat-form-field class=\"content\" appearance=\"fill\">\n\t<mat-label>Filter</mat-label>\n\t<mat-select [(value)]=\"filter\">\n\t\t<mat-option *ngFor=\"let filter of filterList\" (click)=\"createModifiableImage()\" [value]=\"filter\">{{ filter }}</mat-option>\n\t</mat-select>\n</mat-form-field>\n\n<button mat-raised-button class=\"content\" (click)=\"exportLocal()\">Exporter</button>\n\n<button mat-raised-button class=\"imgur\" (click)=\"exportImgur()\">Exporter sur Imgur</button>\n\n<button mat-raised-button mat-dialog-close class=\"close\">Fermer</button>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { ExportComponent } from './export.component';\n\n@NgModule({\n\tdeclarations: [ExportComponent],\n\timports: [\n\t\tCommonModule,\n\t\tMatDialogModule,\n\t\tBrowserAnimationsModule,\n\t\tMatButtonModule,\n\t\tMatIconModule,\n\t\tMatSelectModule,\n\t\tMatFormFieldModule,\n\t\tMatAutocompleteModule,\n\t\tFormsModule,\n\t\tReactiveFormsModule,\n\t\tMatInputModule,\n\t\tMatSnackBarModule,\n\t],\n\texports: [ExportComponent],\n})\nexport class ExportModule {}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Dessin } from '@common/communication/dessin';\n@Component({\n\tselector: 'app-fiche',\n\ttemplateUrl: './fiche.component.html',\n\tstyleUrls: ['./fiche.component.scss'],\n})\nexport class FicheComponent {\n\t@Input() dessin: Dessin = { name: 'Dessin vide', etiquette: [], image: '' };\n\t@Output() deleteFicheEvent: EventEmitter<Dessin> = new EventEmitter<Dessin>();\n\t@Output() openFicheEvent: EventEmitter<Dessin> = new EventEmitter<Dessin>();\n\n\tget name(): string {\n\t\treturn this.dessin.name;\n\t}\n\n\timage(): string {\n\t\tif (this.dessin.name === 'Dessin vide')\n\t\t\treturn 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAQAAAAi5ZK2AAABcUlEQVR42u3RAQ0AAAgDIN8/9K3hJlQg7fBMpEtHOtKRjnSkIx3pSEc60pGOdKQjHelIl450pCMd6UhHOtKRjnSkIx3pSEc60pEuHelIRzrSkY50pCMd6UhHOtKRjnSkI1060pGOdKQjHelIRzrSkY50pCMd6UhHunSkIx3pSEc60pGOdKQjHelIRzrSkY506dKlIx3pSEc60pGOdKQjHelIRzrSkY50pEtHOtKRjnSkIx3pSEc60pGOdKQjHelIl450pCMd6UhHOtKRjnSkIx3pSEc60pEuHelIRzrSkY50pCMd6UhHOtKRjnSkI1060pGOdKQjHelIRzrSkY50pCMd6UhHunTp0pGOdKQjHelIRzrSkY50pCMd6UhHOtKlIx3pSEc60pGOdKQjHelIRzrSkY50pEtHOtKRjnSkIx3pSEc60pGOdKQjHelIl450pCMd6UhHOtKRjnSkIx3pSEc60pEuHelIRzrSkY50pHPDAulX8xYd9+8SAAAAAElFTkSuQmCC';\n\t\treturn this.dessin.image as string;\n\t}\n\tremove(): void {\n\t\tthis.deleteFicheEvent.emit(this.dessin);\n\t}\n\topen(): void {\n\t\tthis.openFicheEvent.emit(this.dessin);\n\t}\n}\n","<h1 id=\"name\">{{ dessin.name }}</h1>\n<ng-template [ngIf]=\"this.dessin.image === undefined\" [ngIfElse]=\"elseBlock\">\n\t<mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n</ng-template>\n<ng-template #elseBlock>\n\t<button (click)=\"open()\">\n\t\t<div id=\"image-container\">\n\t\t\t<img [src]=\"image()\" />\n\t\t</div>\n\t</button>\n</ng-template>\n<div id=\"etiquette-container\">\n\t<div *ngFor=\"let etiquette of dessin.etiquette\">\n\t\t<a>{{ etiquette }}</a>\n\t</div>\n</div>\n<ng-template [ngIf]=\"this.dessin.name !== 'Dessin vide'\">\n\t<button mat-button (click)=\"remove()\" class = 'remove'>remove</button>\n</ng-template>\n\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { FicheComponent } from './fiche.component';\n@NgModule({\n\tdeclarations: [FicheComponent],\n\timports: [CommonModule, MatProgressBarModule, MatButtonModule],\n\texports: [FicheComponent],\n})\nexport class FicheModule {}\n","import { Component } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\nimport { WarningComponent } from '@app/components/warning/warning.component';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { CarrouselComponent } from 'src/app/components/carrousel/carrousel.component';\n\n@Component({\n\tselector: 'app-main-page',\n\ttemplateUrl: './main-page.component.html',\n\tstyleUrls: ['./main-page.component.scss'],\n})\nexport class MainPageComponent {\n\treadonly title: string = 'PolyDessin 2';\n\tthereIsDrawing: boolean = false;\n\n\tconstructor(public dialog: MatDialog, private router: Router, private drawingService: DrawingService) {\n\t\tif (localStorage.getItem('save') !== null) {\n\t\t\tthis.thereIsDrawing = true;\n\t\t}\n\t}\n\tnewDrawing(): void {\n\t\tif (this.thereIsDrawing) {\n\t\t\tconst dialogRef = this.dialog.open(WarningComponent, { panelClass: 'custom-warning-container' });\n\t\t\tdialogRef.afterClosed().subscribe((result) => {\n\t\t\t\tif (result) {\n\t\t\t\t\tthis.drawingService.canvasImage = '';\n\t\t\t\t\tthis.router.navigate(['/editor']);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.drawingService.canvasImage = '';\n\t\t\tthis.router.navigate(['/editor']);\n\t\t}\n\t}\n\tcontinueDrawing(): void {\n\t\tthis.drawingService.canvasImage = localStorage.getItem('save') as string;\n\t\tthis.router.navigate(['/editor']);\n\t}\n\topenModal(): void {\n\t\tconst dialogRef = this.dialog.open(CarrouselComponent, { panelClass: 'custom-carrousel-container' });\n\t\tdialogRef.afterClosed().subscribe((result) => {\n\t\t\tif (result) {\n\t\t\t\tthis.router.navigate(['/editor']);\n\t\t\t}\n\t\t});\n\t}\n}\n","<div class=\"section\">\n\t<header class=\"header\">\n\t\t<h1 class=\"header-item\">{{ title }}</h1>\n\t</header>\n\t<div class=\"container\">\n\t\t<div class=\"welcome-message\">\n\t\t\t<P>Bienvenue sur notre site de dessin</P>\n\t\t</div>\n\t\t<button mat-raised-button class=\"button\" (click)=\"newDrawing()\">Créer un nouveau dessin</button>\n\t\t<button mat-raised-button class=\"button\" (click)=\"openModal()\">Ouvrir le carrousel de dessin</button>\n\t\t<button *ngIf=\"thereIsDrawing\" mat-raised-button class=\"button\" (click)=\"continueDrawing()\">Continuer un dessin</button>\n\t</div>\n\n\t<div class=\"footer\">\n\t\t<div class=\"container-footer\">\n\t\t\t<h4>Équipe Poly</h4>\n\t\t\t<p>Thomas Bergeron, Olivier Coulombe-Raymond, Samuel Crosilla, Frédéric Marchildon, Pierre Paquette</p>\n\t\t</div>\n\t</div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { RouterModule } from '@angular/router';\nimport { CarrouselModule } from 'src/app/components/carrousel/carrousel.module';\nimport { MainPageComponent } from './main-page.component';\n@NgModule({\n\tdeclarations: [MainPageComponent],\n\timports: [HttpClientModule, CommonModule, BrowserAnimationsModule, CarrouselModule, RouterModule, MatButtonModule, MatDialogModule],\n\texports: [MainPageComponent],\n})\nexport class MainPageModule {}\n","import { ENTER } from '@angular/cdk/keycodes';\nimport { HttpResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { MatChipInputEvent } from '@angular/material/chips';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global } from '@app/shared/global';\nimport { StatusCodes } from 'http-status-codes';\nimport { SaveService } from 'src/app/services/index/save.service';\n@Component({\n\tselector: 'app-save',\n\ttemplateUrl: './save.component.html',\n\tstyleUrls: ['./save.component.scss'],\n})\nexport class SaveComponent implements OnInit {\n\tname: string = '';\n\tetiquettes: string[] = [];\n\tseparatorKeysCodes: number[] = [ENTER];\n\timage: string = '';\n\tisSaving: boolean = false;\n\tconstructor(\n\t\tprivate basicService: SaveService,\n\t\tprivate drawingService: DrawingService,\n\t\tprivate snackBar: MatSnackBar,\n\t\tprivate dialog: MatDialogRef<SaveComponent>,\n\t) {}\n\n\tngOnInit(): void {\n\t\tthis.image = this.getDataUrl(this.drawingService.baseCtx.canvas);\n\t}\n\n\tgetDataUrl(canvas: HTMLCanvasElement): string {\n\t\treturn canvas.toDataURL('tmp/png');\n\t}\n\n\taddEtiquette(event: MatChipInputEvent): void {\n\t\tconst input = event.input;\n\t\tconst value = event.value;\n\n\t\t// Add etiquette\n\t\tif (value.length > Global.ETIQUETTE_MAX_VALUE) {\n\t\t\tthis.snackBar.open('étiquette tros grand', '', {\n\t\t\t\tduration: 2000,\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.etiquettes.indexOf(value) === -Global.ONE) {\n\t\t\t\tthis.etiquettes.push(value);\n\t\t\t} else {\n\t\t\t\t// afficher index existe deja\n\t\t\t\tthis.snackBar.open('étiquette déjà sélectionné', '', {\n\t\t\t\t\tduration: 5000,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t// Reset the input value\n\t\tif (input) {\n\t\t\tinput.value = '';\n\t\t}\n\t}\n\n\tremoveEtiquette(etiquette: string): void {\n\t\tconst index = this.etiquettes.indexOf(etiquette);\n\t\tif (index >= 0) {\n\t\t\tthis.etiquettes.splice(index, 1);\n\t\t}\n\t}\n\n\tsendServer(): void {\n\t\tif (this.name === '') {\n\t\t\tthis.snackBar.open('Donnez un nom', '', {\n\t\t\t\tduration: 5000,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t// afficher sauvegarde en cours\n\t\tthis.isSaving = true;\n\t\tthis.snackBar.open('en sauvegarde', '', {\n\t\t\tduration: 5000,\n\t\t});\n\n\t\tthis.drawingService.baseCtx.canvas.toBlob((blob: Blob) => {\n\t\t\tconst data = new FormData();\n\t\t\tdata.append('dessin', blob, this.name);\n\t\t\tdata.append('tags', JSON.stringify(this.etiquettes));\n\n\t\t\tthis.basicService.basicPost(data).subscribe((response: HttpResponse<void>) => {\n\t\t\t\tlet message = '';\n\t\t\t\tswitch (response.status) {\n\t\t\t\t\tcase StatusCodes.CREATED:\n\t\t\t\t\t\tmessage = 'le dessin a été sauvegardé';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase StatusCodes.BAD_REQUEST:\n\t\t\t\t\t\tmessage = 'Il y a une erreur dans les données';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase StatusCodes.INTERNAL_SERVER_ERROR:\n\t\t\t\t\t\tmessage = 'Une erreur est survenue';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// get la reponse du serveur\n\t\t\t\tthis.isSaving = false;\n\t\t\t\tthis.snackBar.open(message, '', {\n\t\t\t\t\tduration: 5000,\n\t\t\t\t});\n\t\t\t\tthis.name = '';\n\t\t\t\tthis.etiquettes = [];\n\t\t\t});\n\t\t\tthis.dialog.close();\n\t\t});\n\t}\n\n\tclose(): void {\n\t\tthis.name = '';\n\t\tthis.etiquettes = [];\n\t}\n}\n","<h2 mat-dialog-title class=\"title\">Sauvegarde</h2>\n<mat-dialog-content>\n\t<mat-form-field>\n\t\t<mat-label>Nom du dessin</mat-label>\n\t\t<input matInput type=\"text\" [(ngModel)]=\"name\" maxlength=\"26\" />\n\t\t<mat-hint>26 caractères maximum</mat-hint>\n\t</mat-form-field>\n\t<mat-form-field>\n\t\t<mat-chip-list #chipList aria-label=\"etiquette selection\">\n\t\t\t<mat-chip *ngFor=\"let etiquette of etiquettes\" [selectable]=\"true\" [removable]=\"true\" (removed)=\"removeEtiquette(etiquette)\">\n\t\t\t\t{{ etiquette.toString() }}\n\t\t\t\t<mat-icon matChipRemove>cancel</mat-icon>\n\t\t\t</mat-chip>\n\t\t\t<input\n\t\t\t\tplaceholder=\"ajouter un étiquette\"\n\t\t\t\t[matChipInputFor]=\"chipList\"\n\t\t\t\tid=\"etiquetteInput\"\n\t\t\t\t#etiquetteInput\n\t\t\t\t[matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\"\n\t\t\t\t(matChipInputTokenEnd)=\"addEtiquette($event)\"\n\t\t\t/>\n\t\t</mat-chip-list>\n\t\t<mat-hint\n\t\t\t>Appuyer sur \"Entrer\" pour ajouter un étiquette.<br />\n\t\t\t15 caractères maximum</mat-hint\n\t\t>\n\t</mat-form-field>\n\t<img src=\"{{ image }}\" />\n</mat-dialog-content>\n<mat-dialog-actions class = 'action'>\n\t<button mat-raised-button [disabled]=\"isSaving\" (click)=\"sendServer()\">Sauvegarder</button>\n\t<button mat-raised-button class = 'close' [disabled]=\"isSaving\" mat-dialog-close (click)=\"close()\" class=\"close\">Fermer</button>\n</mat-dialog-actions>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { SaveService } from '@app/services/index/save.service';\nimport { SaveComponent } from './save.component';\n@NgModule({\n\tdeclarations: [SaveComponent],\n\timports: [\n\t\tCommonModule,\n\t\tBrowserAnimationsModule,\n\t\tMatButtonModule,\n\t\tMatDialogModule,\n\t\tMatFormFieldModule,\n\t\tMatChipsModule,\n\t\tMatIconModule,\n\t\tMatInputModule,\n\t\tFormsModule,\n\t\tMatSnackBarModule,\n\t],\n\tproviders: [SaveService],\n\texports: [SaveComponent],\n})\nexport class SaveModule {}\n","import { Component } from '@angular/core';\nimport { Vec2 } from '@app/classes/vec2';\nimport { ClipboardService } from '@app/services/clipboard/clipboard.service';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { ResizeSelectionService } from '@app/services/selection/resize-selection.service';\nimport { SelectionService } from '@app/services/selection/selection.service';\nimport { ShiftSelectionService } from '@app/services/selection/shift-selection.service';\nimport { ToolService } from '@app/services/tools/tool.service';\nimport { Global } from '@app/shared/global';\n\n@Component({\n\tselector: 'app-selection-box',\n\ttemplateUrl: './selection-box.component.html',\n\tstyleUrls: ['./selection-box.component.scss'],\n})\nexport class SelectionBoxComponent {\n\tshiftIsPressed: boolean;\n\n\tprivate position: Vec2 = Global.DEFAULT_VECTOR;\n\tprivate size: Vec2 = Global.TEST_VECTOR;\n\tprivate newSize: Vec2 = Global.TEST_VECTOR;\n\tprivate oldSize: Vec2;\n\tprivate delta: Vec2 = Global.DEFAULT_VECTOR;\n\tprivate oldDistance: Vec2 = Global.DEFAULT_VECTOR;\n\tprivate sign: Vec2 = Global.TEST_VECTOR;\n\tprivate currentSelectionMode: SelectionService;\n\tisResizing: boolean = false;\n\n\tconstructor(\n\t\tprivate drawingService: DrawingService,\n\t\tpublic toolService: ToolService,\n\t\tprivate shiftSelection: ShiftSelectionService,\n\t\tprivate resizeSelectionService: ResizeSelectionService,\n\t\tprivate clipboard: ClipboardService,\n\t) {\n\t\tthis.toolService.changeCurrentSelectionMode$.subscribe((mode: SelectionService) => {\n\t\t\tthis.changeCurrentSelectionMode(mode);\n\t\t});\n\t}\n\n\tplaceBox(origin: Vec2): void {\n\t\tthis.isResizing = false;\n\t\tconst element = document.getElementById('selection-box') as HTMLElement;\n\t\tif (element) {\n\t\t\telement.style.display = 'block';\n\t\t}\n\n\t\tthis.position = origin;\n\t\tif (origin === Global.RESET_VECTOR) {\n\t\t\tthis.changeBoxSize(origin);\n\t\t\telement.style.display = 'none';\n\t\t\tthis.currentSelectionMode.isActiveSelection = false;\n\t\t}\n\t\tconst newVisibility = origin === Global.RESET_VECTOR ? 'hidden' : 'visible';\n\t\tconst cpArray = document.getElementsByClassName('box-button');\n\t\t// tslint:disable-next-line: prefer-for-of\n\t\tfor (let i = 0; i < cpArray.length; i++) {\n\t\t\t(cpArray[i] as HTMLElement).style.visibility = newVisibility;\n\t\t}\n\t\tthis.drawingService.placeBoxButton(this.size);\n\t}\n\n\tchangeBoxSize(delta: Vec2): void {\n\t\tthis.isResizing = true;\n\t\tthis.size = { x: Math.abs(delta.x), y: Math.abs(delta.y) };\n\t\tthis.delta = delta;\n\t}\n\n\tchangeCurrentSelectionMode(mode: SelectionService): void {\n\t\tthis.currentSelectionMode = mode;\n\t\tthis.shiftSelection.selector = mode;\n\t\tthis.clipboard.selector = mode;\n\t\tthis.currentSelectionMode.changeBoxSize$.subscribe((delta: Vec2) => {\n\t\t\tthis.changeBoxSize(delta);\n\t\t});\n\t\tthis.currentSelectionMode.placeBox$.subscribe((origin: Vec2) => {\n\t\t\tthis.placeBox(origin);\n\t\t});\n\t}\n\n\tget boxWidth(): number {\n\t\treturn this.size.x;\n\t}\n\n\tget boxHeight(): number {\n\t\treturn this.size.y;\n\t}\n\n\tget boxLeft(): number {\n\t\treturn this.delta.x < 0 ? this.position.x + this.delta.x : this.position.x;\n\t}\n\n\tget boxTop(): number {\n\t\treturn this.delta.y < 0 ? this.position.y + this.delta.y : this.position.y;\n\t}\n\n\tget eastBoxPos(): Vec2 {\n\t\treturn this.drawingService.eastBoxPos;\n\t}\n\n\tget northBoxPos(): Vec2 {\n\t\treturn this.drawingService.northBoxPos;\n\t}\n\n\tget northEastBoxPos(): Vec2 {\n\t\treturn this.drawingService.northEastBoxPos;\n\t}\n\n\tget northWestBoxPos(): Vec2 {\n\t\treturn this.drawingService.northWestBoxPos;\n\t}\n\n\tget southBoxPos(): Vec2 {\n\t\treturn this.drawingService.southBoxPos;\n\t}\n\n\tget westBoxPos(): Vec2 {\n\t\treturn this.drawingService.westBoxPos;\n\t}\n\n\tget southEastBoxPos(): Vec2 {\n\t\treturn this.drawingService.southEastBoxPos;\n\t}\n\n\tget southWestBoxPos(): Vec2 {\n\t\treturn this.drawingService.southWestBoxPos;\n\t}\n\n\tstartPreview(): void {\n\t\tthis.oldDistance = Global.DEFAULT_VECTOR;\n\t\tthis.oldSize = this.newSize = this.size;\n\t\tthis.resizeSelectionService.selector = this.currentSelectionMode;\n\t\tthis.toolService.changeTool(Global.RESIZE_SELECTION_SHORTCUT);\n\t\tthis.toolService.currentTool.isDrawing = true;\n\t\tthis.resizeSelectionService.resize(this.size, this.size, this.sign, '');\n\t}\n\n\tpreview(distanceX: number, distanceY: number, tag: string): void {\n\t\tconst shiftIsPressed = this.resizeSelectionService.shiftIsPressed;\n\t\tconst conditionOrigin = this.determineCondition({ x: distanceX, y: distanceY }, tag, shiftIsPressed);\n\n\t\tif (!shiftIsPressed) {\n\t\t\tthis.resizeSelectionService.selector.origin.x += conditionOrigin.x === 0 ? distanceX - this.oldDistance.x : 0;\n\t\t\tthis.resizeSelectionService.selector.origin.y += conditionOrigin.y === 0 ? distanceY - this.oldDistance.y : 0;\n\t\t\tthis.sign = { x: conditionOrigin.x === 0 ? Global.MINUS_ONE : 1, y: conditionOrigin.y === 0 ? Global.MINUS_ONE : 1 };\n\t\t} else {\n\t\t\tthis.resizeSelectionService.selector.origin.x += (distanceX - this.oldDistance.x) * (conditionOrigin.x !== 0 ? Global.MINUS_ONE : 1);\n\t\t\tthis.resizeSelectionService.selector.origin.y += (distanceY - this.oldDistance.y) * (conditionOrigin.y !== 0 ? Global.MINUS_ONE : 1);\n\t\t\tthis.sign = { x: conditionOrigin.x === 0 ? Global.MINUS_TWO : 2, y: conditionOrigin.y === 0 ? Global.MINUS_TWO : 2 };\n\t\t}\n\t\tthis.newSize = {\n\t\t\tx: this.size.x + (distanceX - this.oldDistance.x) * this.sign.x,\n\t\t\ty: this.size.y + (distanceY - this.oldDistance.y) * this.sign.y,\n\t\t};\n\n\t\tthis.oldDistance = { x: distanceX, y: distanceY };\n\t\tthis.newSize = this.resizeSelectionService.resize(this.newSize, this.size, this.sign, tag);\n\t\tthis.changeBoxSize(this.newSize);\n\t}\n\n\tprivate determineCondition(distances: Vec2, tag: string, isShift: boolean): Vec2 {\n\t\tconst condition = { x: 1, y: 1 };\n\t\tif (tag.includes('n')) {\n\t\t\tcondition.y = this.oldSize.y - (isShift ? distances.y * 2 : distances.y) > 0 ? 0 : condition.y;\n\t\t}\n\t\tif (tag.includes('w')) {\n\t\t\tcondition.x = this.oldSize.x - (isShift ? distances.x * 2 : distances.x) > 0 ? 0 : condition.x;\n\t\t}\n\t\tif (tag.includes('s')) {\n\t\t\tcondition.y = this.oldSize.y + (isShift ? distances.y * 2 : distances.y) > 0 ? condition.y : 0;\n\t\t}\n\t\tif (tag.includes('e')) {\n\t\t\tcondition.x = this.oldSize.x + (isShift ? distances.x * 2 : distances.x) > 0 ? condition.x : 0;\n\t\t}\n\t\treturn condition;\n\t}\n\n\tendPreview(): void {\n\t\tthis.size = this.newSize;\n\t\tthis.resizeSelectionService.resize(this.size, this.size, this.sign, '');\n\t\tthis.changeBoxSize(this.size);\n\t\tthis.toolService.currentTool.isDrawing = false;\n\t}\n}\n","<div\n\tid=\"selection-box\"\n\t#container\n\t[ngStyle]=\"{ position: 'absolute', 'width.px': boxWidth - 1, 'height.px': boxHeight - 1, 'left.px': boxLeft - 2, 'top.px': boxTop - 2 }\"\n>\n\t<div\n\t\tid=\"east-cp\"\n\t\tclass=\"box-button\"\n\t\tcdkDrag\n\t\tcdkDragLockAxis=\"x\"\n\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y, 'e')\"\n\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t[cdkDragFreeDragPosition]=\"eastBoxPos\"\n\t></div>\n\n\t<div\n\t\tid=\"north-cp\"\n\t\tclass=\"box-button\"\n\t\tcdkDrag\n\t\tcdkDragLockAxis=\"y\"\n\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y, 'n')\"\n\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t[cdkDragFreeDragPosition]=\"northBoxPos\"\n\t></div>\n\n\t<div\n\t\tid=\"ne-cp\"\n\t\tclass=\"box-button\"\n\t\tcdkDrag\n\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y, 'ne')\"\n\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t[cdkDragFreeDragPosition]=\"northEastBoxPos\"\n\t></div>\n\n\t<div\n\t\tid=\"nw-cp\"\n\t\tclass=\"box-button\"\n\t\tcdkDrag\n\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y, 'nw')\"\n\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t[cdkDragFreeDragPosition]=\"northWestBoxPos\"\n\t></div>\n\n\t<div\n\t\tid=\"south-cp\"\n\t\tclass=\"box-button\"\n\t\tcdkDrag\n\t\tcdkDragLockAxis=\"y\"\n\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y, 's')\"\n\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t[cdkDragFreeDragPosition]=\"southBoxPos\"\n\t></div>\n\n\t<div\n\t\tid=\"se-cp\"\n\t\tclass=\"box-button\"\n\t\tcdkDrag\n\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y, 'se')\"\n\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t[cdkDragFreeDragPosition]=\"southEastBoxPos\"\n\t></div>\n\n\t<div\n\t\tid=\"sw-cp\"\n\t\tclass=\"box-button\"\n\t\tcdkDrag\n\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y, 'sw')\"\n\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t[cdkDragFreeDragPosition]=\"southWestBoxPos\"\n\t></div>\n\n\t<div\n\t\tid=\"west-cp\"\n\t\tclass=\"box-button\"\n\t\tcdkDrag\n\t\tcdkDragLockAxis=\"x\"\n\t\t(cdkDragStarted)=\"startPreview()\"\n\t\t(cdkDragMoved)=\"preview($event.distance.x, $event.distance.y, 'w')\"\n\t\t(cdkDragReleased)=\"endPreview()\"\n\t\t[cdkDragFreeDragPosition]=\"westBoxPos\"\n\t></div>\n\n    \n    <app-selection-manager id=\"selection-manager\" [ngStyle]=\"{'position': 'absolute', 'width.px': boxWidth, 'height.px': boxHeight, 'left.px': 0, 'top.px': 0}\"></app-selection-manager>\n</div>\n","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { SelectionManagerModule } from '@app/components/selection/selection-manager/selection-manager.module';\nimport { SelectionBoxComponent } from './selection-box.component';\n\n@NgModule({\n\tdeclarations: [SelectionBoxComponent],\n\timports: [CommonModule, BrowserAnimationsModule, DragDropModule, SelectionManagerModule],\n\texports: [SelectionBoxComponent],\n})\nexport class SelectionBoxModule {}\n","import { Component, HostListener, OnInit } from '@angular/core';\nimport { Vec2 } from '@app/classes/vec2';\nimport { ClipboardService } from '@app/services/clipboard/clipboard.service';\nimport { ResizeSelectionService } from '@app/services/selection/resize-selection.service';\nimport { SelectionService } from '@app/services/selection/selection.service';\nimport { ShiftSelectionService } from '@app/services/selection/shift-selection.service';\nimport { ToolService } from '@app/services/tools/tool.service';\nimport { Arrows, Command, Global, Shortcut } from '@app/shared/global';\n\n@Component({\n\tselector: 'app-selection-manager',\n\ttemplateUrl: './selection-manager.component.html',\n\tstyleUrls: ['./selection-manager.component.scss'],\n})\nexport class SelectionManagerComponent implements OnInit {\n\tposition: Vec2;\n\tsize: Vec2;\n\tdelta: Vec2;\n\tsign: Vec2;\n\tkeyMap: Map<string, boolean>;\n\ttimerMode: boolean;\n\n\tconstructor(\n\t\tpublic toolService: ToolService,\n\t\tprivate shiftSelection: ShiftSelectionService,\n\t\tprivate resizeSelection: ResizeSelectionService,\n\t\tprivate clipboard: ClipboardService,\n\t) {\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t\tthis.handleKeyDown = this.handleKeyDown.bind(this);\n\t\tthis.handleKeyUp = this.handleKeyUp.bind(this);\n\n\t\tthis.size = this.sign = Global.TEST_VECTOR;\n\t\tthis.position = this.delta = Global.DEFAULT_VECTOR;\n\t\tthis.keyMap = new Map();\n\t\tthis.keyMap.set(Arrows.ARROWDOWN, false);\n\t\tthis.keyMap.set(Arrows.ARROWLEFT, false);\n\t\tthis.keyMap.set(Arrows.ARROWRIGHT, false);\n\t\tthis.keyMap.set(Arrows.ARROWUP, false);\n\t\tthis.timerMode = false;\n\t}\n\n\tngOnInit(): void {\n\t\t(document.getElementById('selection') as HTMLElement).addEventListener('mousedown', this.onMouseDown);\n\t\t(document.getElementById('selection') as HTMLElement).addEventListener('mouseup', this.onMouseUp);\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tif ('placeBox$' in this.toolService.currentTool) {\n\t\t\tthis.shiftSelection.operation = 0;\n\t\t}\n\t\tthis.toolService.changeTool(Global.SHIFT_SELECTION_SHORTCUT);\n\t\tconst element = document.getElementById('selection-manager') as HTMLElement;\n\t\tthis.position = {\n\t\t\tx: parseFloat((element.parentElement as HTMLElement).style.left),\n\t\t\ty: parseFloat((element.parentElement as HTMLElement).style.top),\n\t\t};\n\t\tthis.size = { x: parseFloat(element.style.width), y: parseFloat(element.style.height) };\n\t\tthis.shiftSelection.handleMouseDown(event, this.position, this.size);\n\t}\n\n\tonMouseUp(event: MouseEvent): void {\n\t\tthis.toolService.currentTool.isDrawing = false;\n\t\tthis.shiftSelection.onMouseUp();\n\t}\n\n\t@HostListener('body:keydown', ['$event'])\n\thandleKeyDown(event: KeyboardEvent): void {\n\t\tif (this.keyIsArrow(event.key)) {\n\t\t\tthis.handleArrowsDown(event.key);\n\t\t} else if (event.ctrlKey) {\n\t\t\tthis.handleCtrlDown(event.key);\n\t\t} else if (event.key === Command.SHIFT) {\n\t\t\tthis.resizeSelection.shiftIsPressed = true;\n\t\t} else if (event.key === Command.DELETE && this.clipboard.selector.isActiveSelection) {\n\t\t\tthis.clipboard.handleCommand(event.key, this.shiftSelection.operation);\n\t\t} else if (event.key === Command.ESCAPE) {\n\t\t\tthis.handleEscapeDown();\n\t\t}\n\t}\n\n\tprivate handleArrowsDown(key: string): void {\n\t\tif ('placeBox$' in this.toolService.currentTool) {\n\t\t\tthis.toolService.changeTool(Global.SHIFT_SELECTION_SHORTCUT);\n\t\t\tthis.shiftSelection.operation = 0;\n\t\t}\n\t\tthis.keyMap.set(key, true);\n\n\t\tif (this.toolService.currentTool.info.shortcut === 'shiftSelection') {\n\t\t\tsetTimeout(\n\t\t\t\t() => {\n\t\t\t\t\tconst element = document.getElementById('selection-manager') as HTMLElement;\n\t\t\t\t\tthis.size = { x: parseFloat(element.style.width), y: parseFloat(element.style.height) };\n\t\t\t\t\t(this.toolService.currentTool as ShiftSelectionService).handleCommandMap(this.keyMap, this.size);\n\t\t\t\t\tthis.timerMode = false;\n\t\t\t\t\tthis.clipboard.selector.isActiveSelection = false;\n\t\t\t\t\tthis.shiftSelection.isDrawing = true;\n\t\t\t\t},\n\t\t\t\tthis.timerMode ? Global.INIT_TIMER : Global.OTHER_TIMER,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate handleCtrlDown(key: string): void {\n\t\tif (key === 'a') {\n\t\t\tthis.toolService.changeTool(Shortcut.SURFACE_SELECTION);\n\t\t\tthis.toolService.handleCommand(new KeyboardEvent('keydown', { key: 'a', ctrlKey: true }), true);\n\t\t} else if (this.clipboard.selector.isActiveSelection || key === 'v') {\n\t\t\tthis.clipboard.handleCommand(key, this.shiftSelection.operation);\n\n\t\t\tthis.clipboard.changeClipSize$.subscribe(() => {\n\t\t\t\tif ('cx'.includes(key)) {\n\t\t\t\t\tthis.changeClipSize();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (key === 'v') {\n\t\t\t\tthis.shiftSelection.operation = 1;\n\t\t\t\tthis.resizeSelection.isFirstResize = false;\n\t\t\t\tthis.toolService.changeTool(Global.SHIFT_SELECTION_SHORTCUT);\n\t\t\t\tthis.shiftSelection.handleCommandMap(this.keyMap, this.clipboard.clipSize);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate handleEscapeDown(): void {\n\t\tif ('placeBox$' in this.toolService.currentTool) {\n\t\t\t(this.toolService.currentTool as SelectionService).deleteCurrentSelection();\n\t\t} else if (this.toolService.currentTool.info.shortcut === Global.SHIFT_SELECTION_SHORTCUT) {\n\t\t\t(this.toolService.currentTool as ShiftSelectionService).selector.deleteCurrentSelection();\n\t\t} else if (this.toolService.currentTool.info.shortcut === Global.RESIZE_SELECTION_SHORTCUT) {\n\t\t\t(this.toolService.currentTool as ResizeSelectionService).selector.deleteCurrentSelection();\n\t\t}\n\t}\n\n\t@HostListener('body:keyup', ['$event'])\n\thandleKeyUp(event: KeyboardEvent): void {\n\t\tif (this.keyIsArrow(event.key)) {\n\t\t\tif (this.toolService.currentTool.info.shortcut === 'shiftSelection') {\n\t\t\t\tsetTimeout(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.keyMap.set(event.key, false);\n\t\t\t\t\t\t(this.toolService.currentTool as ShiftSelectionService).handleCommandMap(this.keyMap, this.size);\n\t\t\t\t\t\tlet counter = 0;\n\t\t\t\t\t\tthis.keyMap.forEach((value: boolean, key: string) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tkey.substring(0, Global.ARROW_SUBSTRING_LENGTH) === Arrows.ARROWDOWN.substring(0, Global.ARROW_SUBSTRING_LENGTH) &&\n\t\t\t\t\t\t\t\t!value\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcounter++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.timerMode = counter === Global.ARROW_NUMBER ? true : false;\n\t\t\t\t\t\tif (this.timerMode) {\n\t\t\t\t\t\t\tthis.clipboard.selector.isActiveSelection = true;\n\t\t\t\t\t\t\tthis.toolService.changeTool(this.shiftSelection.selector.info.shortcut);\n\t\t\t\t\t\t\tthis.toolService.currentTool.isDrawing = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tthis.timerMode ? Global.INIT_TIMER : Global.OTHER_TIMER,\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (event.key === Command.SHIFT) {\n\t\t\tthis.resizeSelection.shiftIsPressed = false;\n\t\t}\n\t}\n\n\tprivate keyIsArrow(value: string): boolean {\n\t\treturn value === Arrows.ARROWDOWN || value === Arrows.ARROWLEFT || value === Arrows.ARROWRIGHT || value === Arrows.ARROWUP;\n\t}\n\n\tprivate changeClipSize(): void {\n\t\tconst element = document.getElementById('selection-manager') as HTMLElement;\n\t\tthis.size = { x: parseFloat(element.style.width), y: parseFloat(element.style.height) };\n\t\tthis.clipboard.clipSize = this.size;\n\t}\n}\n","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { SelectionManagerComponent } from './selection-manager.component';\n\n@NgModule({\n\tdeclarations: [SelectionManagerComponent],\n\timports: [CommonModule, BrowserAnimationsModule, DragDropModule],\n\texports: [SelectionManagerComponent],\n})\nexport class SelectionManagerModule {}\n","import { AfterViewInit, Component, ElementRef, ViewChild } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { EventManagerService } from '@app/services/event-manager/event-manager.service';\nimport { ResizeSelectionService } from '@app/services/selection/resize-selection.service';\nimport { SelectionService } from '@app/services/selection/selection.service';\nimport { ShiftSelectionService } from '@app/services/selection/shift-selection.service';\nimport { ToolService } from '@app/services/tools/tool.service';\nimport { Command, Global } from '@app/shared/global';\nimport { CarrouselComponent } from 'src/app/components/carrousel/carrousel.component';\nimport { SaveComponent } from 'src/app/components/save/save.component';\nimport { WarningComponent } from 'src/app/components/warning/warning.component';\n\n@Component({\n\tselector: 'app-sidebar',\n\ttemplateUrl: './sidebar.component.html',\n\tstyleUrls: ['./sidebar.component.scss'],\n})\nexport class SidebarComponent implements AfterViewInit {\n\tconstructor(\n\t\tpublic toolService: ToolService,\n\t\tpublic dialog: MatDialog,\n\t\tpublic drawingService: DrawingService,\n\t\tpublic event: EventManagerService,\n\t) {}\n\n\t@ViewChild('sidebarElement')\n\tsidebarElement: ElementRef;\n\n\tngAfterViewInit(): void {\n\t\tthis.drawingService.positionX = this.sidebarElement.nativeElement.offsetWidth;\n\t}\n\n\topenModal(): void {\n\t\tthis.event.disableShortcuts();\n\t\tconst dialogRef = this.dialog.open(CarrouselComponent, { panelClass: 'custom-carrousel-container' });\n\t\tdialogRef.afterClosed().subscribe((result: boolean) => {\n\t\t\tthis.event.enableShortcuts();\n\t\t\tif (result) {\n\t\t\t\tif (!this.drawingService.isEmpty()) {\n\t\t\t\t\tconst ref = this.dialog.open(WarningComponent, { panelClass: 'custom-warning-container' });\n\t\t\t\t\tref.afterClosed().subscribe((response: boolean) => {\n\t\t\t\t\t\tif (response) this.drawingService.initCanvas();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.drawingService.initCanvas();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggleDrawingOptions(shortcut: string): void {\n\t\tif (shortcut === 'g') {\n\t\t\tthis.event.toggleView(shortcut);\n\t\t}\n\t}\n\n\topenExport(): void {\n\t\tthis.event.exportWrapper();\n\t}\n\n\topenSaving(): void {\n\t\tthis.event.disableShortcuts();\n\t\tconst dialogRef = this.dialog.open(SaveComponent, { panelClass: 'custom-dialog-container' });\n\t\tdialogRef.afterClosed().subscribe(() => this.event.enableShortcuts());\n\t}\n\tnewDrawing(): void {\n\t\tif (!this.drawingService.isEmpty()) {\n\t\t\tthis.event.disableShortcuts();\n\t\t\tconst dialogRef = this.dialog.open(WarningComponent, { panelClass: 'custom-warning-container' });\n\t\t\tdialogRef.afterClosed().subscribe((result: boolean) => {\n\t\t\t\tthis.event.enableShortcuts();\n\t\t\t\tif (result) this.drawingService.new();\n\t\t\t});\n\t\t}\n\t}\n\n\tundo(): void {\n\t\tthis.drawingService.undo();\n\t}\n\tredo(): void {\n\t\tthis.drawingService.redo();\n\t}\n\n\tvalueChange(value: string): void {\n\t\tconst command = { key: Command.ESCAPE } as KeyboardEvent;\n\t\tthis.toolService.changeTool(value);\n\t\tthis.toolService.currentTool.handleCommand(command, true);\n\t}\n\n\trunShortcut(value: string): void {\n\t\tconst command = { key: value } as KeyboardEvent;\n\t\tif (this.toolService.currentTool.info.name.includes('selection') && !'rsv'.includes(value)) {\n\t\t\tthis.drawingService.addAction(this.drawingService.lastAction);\n\t\t}\n\t\tthis.toolService.changeTool(value);\n\t\tthis.toolService.currentTool.handleCommand(command, true);\n\t}\n\n\thandleClipboard(key: string): void {\n\t\tconst operation = 'isShifting' in this.toolService.currentTool ? 1 : 0;\n\t\tthis.toolService.clipboardService.handleCommand(key, operation);\n\t}\n\n\tselectionIsActive(): boolean {\n\t\tif ('placeBox$' in this.toolService.currentTool) {\n\t\t\treturn (this.toolService.currentTool as SelectionService).isActiveSelection;\n\t\t} else if (Global.SHIFT_SELECTION_SHORTCUT === this.toolService.currentTool.info.shortcut) {\n\t\t\treturn (this.toolService.currentTool as ShiftSelectionService).selector.isActiveSelection;\n\t\t} else if (Global.RESIZE_SELECTION_SHORTCUT === this.toolService.currentTool.info.shortcut) {\n\t\t\treturn (this.toolService.currentTool as ResizeSelectionService).selector.isActiveSelection;\n\t\t}\n\t\treturn false;\n\t}\n\n\tclipboardNotEmpty(): boolean {\n\t\treturn this.toolService.clipboardService.canPaste;\n\t}\n\n\ttoolInUse(): boolean {\n\t\treturn this.toolService.hasBegunDrawing();\n\t}\n\n\tverifyValue(value: string): boolean {\n\t\tif (value === 'm') {\n\t\t\treturn this.toolService.magnetIsActive();\n\t\t}\n\t\treturn this.toolService.currentTool.info.shortcut === value;\n\t}\n}\n","<div #sidebarElement class=\"container\" id=\"container\">\n    <div class=\"bar-container\">\n        <button mat-raised-button [matMenuTriggerFor]=\"fichier\" class=\"btn square\" #tooltip=\"matTooltip\" matTooltip=\"liste d'options pour le dessin\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\" [disabled]=\"toolInUse()\">\n\t\t\t<i class=\"far fa-file\"></i>\n\t\t</button>\n        <mat-menu #fichier class=\"container\">\n            <button mat-button (click)=\"newDrawing()\" value=\"ctrl-o\" class=\"btn\" #tooltip=\"matTooltip\" matTooltip=\"Créer un nouveau dessin vide Raccourci: ctrl-o\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\">\n\t\t\t\t<i class=\"fas fa-plus\"></i>\n\t\t\t</button>\n            <button mat-button (click)=\"openSaving()\" value=\"ctrl-s\" class=\"btn\" #tooltip=\"matTooltip\" matTooltip=\"Sauvegarder le dessin Raccourci: ctrl-s\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\">\n\t\t\t\t<i class=\"far fa-save\"></i>\n\t\t\t</button>\n            <button mat-button (click)=\"openModal()\" class=\"btn\" #tooltip=\"matTooltip\" matTooltip=\"Ouvrir le carrousel de dessin Raccourci: ctrl-g\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\">\n\t\t\t\t<i class=\"far fa-folder-open\"></i>\n\t\t\t</button>\n            <button mat-button (click)=\"openExport()\" value=\"ctrl-e\" class=\"btn\" #tooltip=\"matTooltip\" matTooltip=\"Exporter le dessin Raccourci: ctrl-e\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\">\n\t\t\t\t<i class=\"fas fa-file-export\"></i>\n\t\t\t</button>\n        </mat-menu>\n\n        <mat-button-toggle-group name=\"options\" vertical class=\"button-group\" (change)=\"valueChange($event.value)\">\n            <div class=\"two-by-two\">\n                <mat-button-toggle value=\"c\" #pencil disableRipple=\"true\" [checked]=\"verifyValue(pencil.value)\" [disabled]=\"toolInUse()\" #tooltip=\"matTooltip\" matTooltip=\"Dessiner avec un crayon Raccourci: c\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\" class=\"btn\">\n                    <i class=\"fas fa-pencil-alt\"></i>\n                </mat-button-toggle>\n                <mat-button-toggle [disabled]=\"toolInUse()\" value=\"a\" #spray [checked]=\"verifyValue(spray.value)\" #tooltip=\"matTooltip\" matTooltip=\"Dessiner avec un aérosol Raccourci: a\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\" class=\"btn\"><i class=\"fas fa-spray-can\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t</div>\n\t\t\t<div class=\"two-by-two\">\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\t[disabled]=\"toolInUse()\"\n\t\t\t\t\t[matMenuTriggerFor]=\"formes\"\n\t\t\t\t\t[checked]=\"verifyValue(formeListe.value)\"\n\t\t\t\t\tdisableRipple=\"true\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Liste de forme à placer dans le dessin\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t><i class=\"fas fa-shapes\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t\t<mat-menu #formes>\n\t\t\t\t\t<mat-button-toggle-group #formeListe=\"matButtonToggleGroup\" vertical class=\"button-group\" (change)=\"valueChange($event.value)\">\n\t\t\t\t\t\t<mat-button-toggle\n\t\t\t\t\t\t\tvalue=\"1\"\n\t\t\t\t\t\t\t#rectangle\n\t\t\t\t\t\t\tdisableRipple=\"true\"\n\t\t\t\t\t\t\t[checked]=\"verifyValue(rectangle.value)\"\n\t\t\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\t\t\tmatTooltip=\"Placer un rectangle ou carré Raccourci: 1\"\n\t\t\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t\t\t><i class=\"far fa-square\"></i>\n                </mat-button-toggle>\n                <mat-button-toggle value=\"2\" #ellipse disableRipple=\"true\" [checked]=\"verifyValue(ellipse.value)\" #tooltip=\"matTooltip\" matTooltip=\"Placer une ellipse ou cercle Raccourci: 2\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\" class=\"btn\"><i class=\"far fa-circle\"></i\n\t\t\t\t\t\t></mat-button-toggle>\n\t\t\t\t\t\t<mat-button-toggle\n\t\t\t\t\t\t\tvalue=\"3\"\n\t\t\t\t\t\t\t#polygone\n\t\t\t\t\t\t\t[checked]=\"verifyValue(polygone.value)\"\n\t\t\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\t\t\tmatTooltip=\"Placer un polygone Raccourci: 3\"\n\t\t\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t\t\t><i class=\"fas fa-draw-polygon\"></i\n\t\t\t\t\t\t></mat-button-toggle>\n\t\t\t\t\t</mat-button-toggle-group>\n\t\t\t\t</mat-menu>\n\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\tvalue=\"l\"\n\t\t\t\t\t#line\n\t\t\t\t\tdisableRipple=\"true\"\n\t\t\t\t\t[checked]=\"verifyValue(line.value)\"\n\t\t\t\t\t[disabled]=\"toolInUse()\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Dessiner une ligne Raccourci: l\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t><i class=\"fas fa-minus\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t</div>\n\t\t\t<div class=\"two-by-two\">\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\t[disabled]=\"toolInUse()\"\n\t\t\t\t\tvalue=\"t\"\n\t\t\t\t\t#text\n\t\t\t\t\t[checked]=\"verifyValue(text.value)\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Placer du texte Raccourci: t\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t><i class=\"fas fa-text-height\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t\t<mat-button-toggle\n\t\t\t\t[disabled]=\"toolInUse()\"\n\t\t\t\t\tvalue=\"b\"\n\t\t\t\t\t#fill\n\t\t\t\t\t[checked]=\"verifyValue(fill.value)\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Dessiner avec une couleur une partie du dessin Raccourci: b\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t><i class=\"fas fa-fill-drip\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t</div>\n\t\t\t<div class=\"two-by-two\">\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\tvalue=\"e\"\n\t\t\t\t\t#eraser\n\t\t\t\t\tdisableRipple=\"true\"\n\t\t\t\t\t[checked]=\"verifyValue(eraser.value)\"\n\t\t\t\t\t[disabled]=\"toolInUse()\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Effacer une partie du dessin Raccourci: e\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t><i class=\"fas fa-eraser\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\t[disabled]=\"toolInUse()\"\n\t\t\t\t\tvalue=\"d\"\n\t\t\t\t\t#stamp\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t[checked]=\"verifyValue(stamp.value)\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Placer une image sur le dessin Raccourci: d\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t><i class=\"fas fa-stamp\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t</div>\n\t\t\t<div class=\"two-by-two\">\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\t[disabled]=\"toolInUse()\"\n\t\t\t\t\tvalue=\"i\"\n\t\t\t\t\t#select\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t[checked]=\"verifyValue(select.value)\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Sélectionner la couleur d'un pixel Raccourci: i\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t><i class=\"fas fa-eye-dropper\"></i\n\t\t\t\t></mat-button-toggle>\n\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\t[disabled]=\"toolInUse()\"\n\t\t\t\t\t[matMenuTriggerFor]=\"selection\"\n\t\t\t\t\t[checked]=\"verifyValue(selectionListe.value)\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Selection d'une partie du dessin à l'aide d'une forme\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t><i class=\"far fa-object-ungroup\"></i\n\t\t\t\t></mat-button-toggle>\n\n\t\t\t\t<mat-menu #selection>\n\t\t\t\t\t<mat-button-toggle-group\n\t\t\t\t\t\t#selectionListe=\"matButtonToggleGroup\"\n\t\t\t\t\t\tvertical\n\t\t\t\t\t\tclass=\"button-group\"\n\t\t\t\t\t\t(change)=\"valueChange($event.value)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<mat-button-toggle\n\t\t\t\t\t\t\tvalue=\"r\"\n\t\t\t\t\t\t\t#rectangleSelection\n\t\t\t\t\t\t\t[checked]=\"verifyValue(rectangleSelection.value)\"\n\t\t\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\t\t\tmatTooltip=\"Sélection en rectangle ou carré Raccourci: r\"\n\t\t\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t\t\t><i class=\"fas fa-vector-square\"></i>\n                </mat-button-toggle>\n                <mat-button-toggle value=\"s\" #ellipseSelection [checked]=\"verifyValue(ellipseSelection.value)\" #tooltip=\"matTooltip\" matTooltip=\"Sélection en ellipse ou cercle Raccourci: s\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\" class=\"btn\"><i class=\"far fa-circle\"></i\n\t\t\t\t\t\t></mat-button-toggle>\n\t\t\t\t\t\t<mat-button-toggle\n\t\t\t\t\t\t\tvalue=\"v\"\n\t\t\t\t\t\t\t#lassoSelection\n\t\t\t\t\t\t\t[checked]=\"verifyValue(lassoSelection.value)\"\n\t\t\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\t\t\tmatTooltip=\"Sélection avec une forme créer Raccourci: v\"\n\t\t\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t\t\t><img class=\"lassoImage\" src=\"/assets/lasso.png\"></mat-button-toggle\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<mat-button-toggle\n\t\t\t\t\t\t\tvalue=\"ctrl-a\"\n\t\t\t\t\t\t\t#surfaceSelection\n\t\t\t\t\t\t\t[checked]=\"verifyValue(surfaceSelection.value)\"\n\t\t\t\t\t\t\t(click)=\"runShortcut(surfaceSelection.value)\"\n\t\t\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\t\t\tmatTooltip=\"Sélectionner tout le dessin: ctrl + a\"\n\t\t\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t\t\t><i class=\"far fa-object-group\"></i\n\t\t\t\t\t\t></mat-button-toggle>\n\t\t\t\t\t</mat-button-toggle-group>\n\t\t\t\t</mat-menu>\n\t\t\t</div>\n\t\t\t<mat-button-toggle-group name=\"options-process\" (change)=\"valueChange($event.value)\">\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\t[disabled]=\"!selectionIsActive()\"\n\t\t\t\t\tvalue=\"ctrl-c\"\n\t\t\t\t\tclass=\"multi-button btn\"\n\t\t\t\t\t#copy\n\t\t\t\t\t(click)=\"handleClipboard('c')\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Copier une partie du dessin Raccourci: ctrl-c\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t><i class=\"far fa-copy\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t\t<mat-button-toggle\n                    [disabled]=\"!selectionIsActive() && !clipboardNotEmpty()\"\n\t\t\t\t\tvalue=\"ctrl-v\"\n\t\t\t\t\tclass=\"multi-button btn\"\n\t\t\t\t\t#paste\n\t\t\t\t\t(click)=\"handleClipboard('v')\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Coller une partie du dessin Raccourci: ctrl-v\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t><i class=\"fas fa-paste\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t</mat-button-toggle-group>\n\t\t\t<div class=\"two-by-two\">\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\t[disabled]=\"!selectionIsActive()\"\n\t\t\t\t\tvalue=\"ctrl-x\"\n\t\t\t\t\tclass=\"multi-button btn\"\n\t\t\t\t\t#cut\n\t\t\t\t\t(click)=\"handleClipboard('x')\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Enlever une partie de dessin et la conserve pour copie Raccourci: ctrl-x\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t><i class=\"fas fa-cut\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t\t<mat-button-toggle\n\t\t\t\t\t[disabled]=\"!selectionIsActive()\"\n\t\t\t\t\tvalue=\"Delete\"\n\t\t\t\t\tclass=\"multi-button btn\"\n\t\t\t\t\t#cut\n\t\t\t\t\t(change)=\"valueChange($event.value)\"\n\t\t\t\t\t(click)=\"handleClipboard('Delete')\"\n\t\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\t\tmatTooltip=\"Supprimer la sélection\"\n\t\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t\t><i class=\"fas fa-backspace\"></i\n\t\t\t\t></mat-button-toggle>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t[disabled]=\"toolInUse() || !drawingService.undoIsReady() || this.toolService.currentTool.info.name.includes('selection')\"\n\t\t\t\t\t(click)=\"this.drawingService.undo()\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<i class=\"fas fa-undo\"></i>\n            </div>\n            </button>\n            <button class=\"btn\" [disabled]=\"toolInUse() || !drawingService.redoIsReady() || this.toolService.currentTool.info.name.includes('selection')\" (click)=\"this.drawingService.redo()\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<i class=\"fas fa-redo\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n    </div>\n\n    \t<mat-button-toggle-group name=\"outil-surface\">\n       \t\t<mat-button-toggle\n\t\t\t[disabled]=\"toolInUse()\"\n\t\t\tvalue=\"g\"\n\t\t\tclass=\"multi-button\"\n\t\t\t#grid class=\"btn\"\n\t\t\t(click)=\"toolService.isToolActive(grid.value) ? toggleDrawingOptions(grid.value) : toolService.changeTool(grid.value)\" [checked]=\"toolService.isToolActive(grid.value)\"\n            #tooltip=\"matTooltip\" matTooltip=\"affiche une grille sur le dessin Raccourci: g\" matTooltipPosition=\"right\" matTooltipShowDelay=\"1000\"><i class=\"fas fa-border-all\"></i\n\t\t\t></mat-button-toggle>\n\t\t\t<mat-button-toggle\n\t\t\t\t[disabled]=\"toolInUse()\"\n\t\t\t\tvalue=\"m\"\n\t\t\t\tclass=\"multi-button\"\n\t\t\t\t#magnet\n\t\t\t\tclass=\"btn\"\n\t\t\t\t(click)='toolService.magnetService.toggleIsActive()'\n\t\t\t\t[checked]=\"verifyValue(magnet.value)\"\n\t\t\t\t#tooltip=\"matTooltip\"\n\t\t\t\tmatTooltip=\"bouger un outil le fait coller à la grille Raccourci: m\"\n\t\t\t\tmatTooltipPosition=\"right\"\n\t\t\t\tmatTooltipShowDelay=\"1000\"\n\t\t\t\t><i class=\"fas fa-magnet\"></i\n\t\t\t></mat-button-toggle>\n\t\t\t</mat-button-toggle-group>\n\t\t</mat-button-toggle-group>\n\t</div>\n\n\t<app-attributes-panel [activeTool]=\"toolService.currentTool\" id=\"attributes-panel\"></app-attributes-panel>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { AttributesPanelModule } from 'src/app/components/attributes-panel/attributes-panel.module';\nimport { CarrouselModule } from 'src/app/components/carrousel/carrousel.module';\nimport { SaveModule } from 'src/app/components/save/save.module';\nimport { WarningModule } from 'src/app/components/warning/warning.module';\nimport { SidebarComponent } from './sidebar.component';\n\n@NgModule({\n\tdeclarations: [SidebarComponent],\n\timports: [\n\t\tFormsModule,\n\t\tCommonModule,\n\t\tBrowserAnimationsModule,\n\t\tMatButtonModule,\n\t\tMatButtonToggleModule,\n\t\tMatMenuModule,\n\t\tMatSelectModule,\n\t\tMatTooltipModule,\n\t\tCarrouselModule,\n\t\tWarningModule,\n\t\tAttributesPanelModule,\n\t\tSaveModule,\n\t],\n\texports: [SidebarComponent],\n})\nexport class SidebarModule {}\n","import { Component } from '@angular/core';\n@Component({\n\tselector: 'app-warning',\n\ttemplateUrl: './warning.component.html',\n\tstyleUrls: ['./warning.component.scss'],\n})\nexport class WarningComponent {}\n","<h2 mat-dialog-title class=\"title\">Attention</h2>\n<mat-dialog-content> Vous allez perdre votre dessin. Êtes-vous certain? </mat-dialog-content>\n<mat-dialog-actions class=\"action\">\n\t<button mat-raised-button [mat-dialog-close]=\"true\">Confirmer</button>\n\t<button mat-raised-button mat-dialog-close class = 'close'>Fermer</button>\n</mat-dialog-actions>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { WarningComponent } from './warning.component';\n\n@NgModule({\n\tdeclarations: [WarningComponent],\n\timports: [CommonModule, MatDialogModule, BrowserAnimationsModule, MatButtonModule],\n\texports: [WarningComponent],\n})\nexport class WarningModule {}\n","import { Injectable } from '@angular/core';\nimport { ClipboardInfo } from '@app/classes/clipboard-info';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { SelectionService } from '@app/services/selection/selection.service';\nimport { Command, Global } from '@app/shared/global';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class ClipboardService {\n\tprivate clip: ClipboardInfo;\n\tcanPaste: boolean;\n\tselector: SelectionService;\n\tclipSize: Vec2;\n\n\tprivate changeClipSizeCallSource: Subject<string> = new BehaviorSubject<string>('');\n\tchangeClipSize$: Observable<string> = this.changeClipSizeCallSource.asObservable();\n\n\tconstructor(private drawingService: DrawingService) {\n\t\tthis.clip = { selection: new ImageData(1, 1), posX: 0, posY: 0, width: 0, height: 0 };\n\t\tthis.canPaste = false;\n\t\tthis.clipSize = Global.DEFAULT_VECTOR;\n\t}\n\n\thandleCommand(key: string, operation: number): void {\n\t\tswitch (key) {\n\t\t\tcase Global.COPY_SHORTCUT:\n\t\t\t\tthis.copySelection();\n\t\t\t\tbreak;\n\t\t\tcase Global.CUT_SHORTCUT:\n\t\t\t\tthis.cutSelection(operation);\n\t\t\t\tbreak;\n\t\t\tcase Global.PASTE_SHORTCUT:\n\t\t\t\tthis.pasteSelection();\n\t\t\t\tbreak;\n\t\t\tcase Command.DELETE:\n\t\t\t\tthis.deleteSelection(operation);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate copySelection(): void {\n\t\tif (this.selector.isActiveSelection) {\n\t\t\tthis.clip.selection = this.selector.selection;\n\t\t\tthis.clip.posX = this.selector.origin.x;\n\t\t\tthis.clip.posY = this.selector.origin.y;\n\t\t\tthis.clip.width = Math.abs(this.selector.deltaX);\n\t\t\tthis.clip.height = Math.abs(this.selector.deltaY);\n\n\t\t\tthis.canPaste = true;\n\t\t\tthis.callChangeClipSize();\n\t\t}\n\t}\n\n\tprivate cutSelection(operation: number): void {\n\t\tif (this.selector.isActiveSelection) {\n\t\t\tthis.copySelection();\n\t\t\tconst position = { x: this.clip.posX, y: this.clip.posY };\n\t\t\tthis.clip.width = this.clip.width === 0 ? 1 : this.clip.width;\n\t\t\tthis.clip.height = this.clip.height === 0 ? 1 : this.clip.height;\n\t\t\tthis.selector.redrawSelection(position, operation !== 1 ? 0 : 1, { x: this.clip.width, y: this.clip.height }, this.clip.selection);\n\t\t\tthis.selector.deleteCurrentSelection();\n\t\t\tconst wrappedPosition: Vec2 = { ...position };\n\t\t\tconst wrappedSize: Vec2 = { ...{ x: this.clip.width, y: this.clip.height } };\n\t\t\tconst wrappedSelector: SelectionService = this.selector;\n\t\t\tconst imageData: ImageData = this.clip.selection;\n\t\t\tconst func: CallableFunction = () => {\n\t\t\t\twrappedSelector.redrawSelection(wrappedPosition, operation !== 1 ? 0 : 1, wrappedSize, imageData);\n\t\t\t\tthis.selector.deleteCurrentSelection();\n\t\t\t};\n\t\t\tthis.drawingService.addAction(func);\n\t\t}\n\t}\n\n\tprivate pasteSelection(): void {\n\t\tif (this.canPaste) {\n\t\t\tconst position = { x: 0, y: 0 };\n\t\t\tthis.clipSize.x = this.clipSize.x === 0 ? this.clip.width : this.clipSize.x;\n\t\t\tthis.clipSize.y = this.clipSize.y === 0 ? this.clip.height : this.clipSize.y;\n\t\t\tthis.selector.deltaX = this.clip.width;\n\t\t\tthis.selector.deltaY = this.clip.height;\n\t\t\tthis.selector.redrawSelection(position, 1, this.clipSize, this.clip.selection);\n\t\t\tconst wrappedPosition: Vec2 = { ...position };\n\t\t\tconst wrappedSize: Vec2 = { ...this.clipSize };\n\t\t\tconst wrappedSelector: SelectionService = this.selector;\n\t\t\tconst imageData: ImageData = this.clip.selection;\n\t\t\tconst func: CallableFunction = () => {\n\t\t\t\twrappedSelector.redrawSelection(wrappedPosition, 1, wrappedSize, imageData);\n\t\t\t\tthis.selector.deleteCurrentSelection();\n\t\t\t};\n\t\t\tthis.drawingService.addAction(func);\n\t\t\tthis.selector.selection = this.clip.selection;\n\t\t\tthis.clip.posX = this.clip.posY = 0;\n\t\t\tthis.selector.origin = position;\n\t\t\tthis.selector.isActiveSelection = true;\n\t\t}\n\t}\n\n\tprivate deleteSelection(operation: number): void {\n\t\tconst tempClip = this.clip;\n\t\tthis.cutSelection(operation);\n\t\tthis.clip = tempClip;\n\t\tthis.canPaste = false;\n\t\tthis.selector.deltaX = this.selector.deltaY = 0;\n\t}\n\n\tprivate callChangeClipSize(): void {\n\t\tthis.changeClipSizeCallSource.next();\n\t}\n}\n","import { Injectable } from '@angular/core';\n// import { CanvasAction } from '@app/classes/canvas-action';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class CommandManagerService {\n\tprivate normalStack: CallableFunction[] = [] as CallableFunction[];\n\tprivate historyStack: CallableFunction[] = [] as CallableFunction[];\n\n\tconstructor() {\n\t\tthis.normalStack = [] as CallableFunction[];\n\t\tthis.historyStack = [] as CallableFunction[];\n\t}\n\n\tasync undo(): Promise<void> {\n\t\tif (!this.undoIsReady()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.historyStack.push(this.normalStack.pop() as CallableFunction);\n\t\tawait this.update();\n\t}\n\n\tasync redo(): Promise<void> {\n\t\tif (!this.redoIsReady()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.normalStack.push(this.historyStack.pop() as CallableFunction);\n\t\tawait this.update();\n\t}\n\n\tclear(): void {\n\t\tthis.normalStack = [];\n\t\tthis.historyStack = [];\n\t}\n\n\tredoIsReady(): boolean {\n\t\treturn !(this.historyStack.length < 1);\n\t}\n\tundoIsReady(): boolean {\n\t\treturn !(this.normalStack.length < 2);\n\t}\n\n\tprivate async update(): Promise<void> {\n\t\tfor (const action of this.normalStack) {\n\t\t\tawait action();\n\t\t}\n\t}\n\treplaceAction(action: CallableFunction): void {\n\t\tthis.normalStack.pop();\n\t\tthis.normalStack.push(action);\n\t}\n\n\taddAction(action: CallableFunction): void {\n\t\tthis.normalStack.push(action);\n\t\tthis.historyStack = [];\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { Vec2 } from '@app/classes/vec2';\nimport { CommandManagerService } from '@app/services/commands/command-manager.service';\nimport { Global } from '@app/shared/global';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class DrawingService {\n\tbaseCtx: CanvasRenderingContext2D;\n\tpreviewCtx: CanvasRenderingContext2D;\n\tprimaryColor: string = '#000000FF';\n\tsecondaryColor: string = '#FF0000FF';\n\tcolorHistory: string[] = new Array(Global.COLOR_HISTORY_COUNT);\n\tpositionX: number;\n\tcontainerSize: Vec2 = { x: Global.DEFAULT_WIDTH, y: Global.DEFAULT_HEIGHT };\n\tcanvasSize: Vec2 = { x: Global.DEFAULT_WIDTH, y: Global.DEFAULT_HEIGHT };\n\tcanvasImage: string = '';\n\tbottomResizePos: Vec2;\n\trightResizePos: Vec2;\n\tcornerResizePos: Vec2;\n\tcommandManager: CommandManagerService;\n\teastBoxPos: Vec2;\n\tnorthBoxPos: Vec2;\n\tnorthEastBoxPos: Vec2;\n\tnorthWestBoxPos: Vec2;\n\tsouthBoxPos: Vec2;\n\tsouthEastBoxPos: Vec2;\n\tsouthWestBoxPos: Vec2;\n\twestBoxPos: Vec2;\n\n\t// tslint:disable-next-line: no-empty\n\tlastAction: CallableFunction = () => {};\n\n\tconstructor(commandManagerParam: CommandManagerService) {\n\t\tthis.colorHistory[0] = this.primaryColor;\n\t\tthis.colorHistory[1] = this.secondaryColor;\n\t\tthis.commandManager = commandManagerParam;\n\t\tthis.canvasImage = localStorage.getItem('save') !== null ? (localStorage.getItem('save') as string) : '';\n\t}\n\n\tclearCanvas(context: CanvasRenderingContext2D): void {\n\t\tcontext.clearRect(0, 0, this.canvasSize.x, this.canvasSize.y);\n\t\tif (context === this.baseCtx) {\n\t\t\tcontext.fillStyle = 'white';\n\t\t\tcontext.fillRect(0, 0, this.canvasSize.x, this.canvasSize.y);\n\t\t}\n\t}\n\n\taddAction(action: CallableFunction): void {\n\t\tthis.commandManager.addAction(action);\n\t\tlocalStorage.setItem('save', this.baseCtx.canvas.toDataURL());\n\t}\n\n\tundoIsReady(): boolean {\n\t\treturn this.commandManager.undoIsReady();\n\t}\n\n\tredoIsReady(): boolean {\n\t\treturn this.commandManager.redoIsReady();\n\t}\n\n\tundo(): void {\n\t\tif (this.undoIsReady()) {\n\t\t\tthis.clearCanvas(this.baseCtx);\n\t\t\tif (this.canvasImage !== '') {\n\t\t\t\tconst image = new Image();\n\t\t\t\timage.onload = () => {\n\t\t\t\t\tthis.baseCtx.drawImage(image, 0, 0);\n\t\t\t\t};\n\t\t\t\timage.src = this.canvasImage;\n\t\t\t}\n\t\t}\n\t\tthis.commandManager.undo().then(() => {\n\t\t\tlocalStorage.setItem('save', this.baseCtx.canvas.toDataURL());\n\t\t});\n\t}\n\n\tredo(): void {\n\t\tif (this.canvasImage !== '') {\n\t\t\tconst image = new Image();\n\t\t\timage.onload = () => {\n\t\t\t\tthis.baseCtx.drawImage(image, 0, 0);\n\t\t\t};\n\t\t\timage.src = this.canvasImage;\n\t\t}\n\t\tthis.commandManager.redo().then(() => {\n\t\t\tlocalStorage.setItem('save', this.baseCtx.canvas.toDataURL());\n\t\t});\n\t}\n\n\tchangeColor(color: string, changePrimaryColor: boolean, forceAdd: boolean): void {\n\t\tconst nbColors = this.colorHistory.filter((element: string) => {\n\t\t\treturn element != undefined;\n\t\t}).length;\n\n\t\tlet colorIndex: number = Global.UNDEFINED_COLOR;\n\t\tfor (let i = 0; i < nbColors && colorIndex === Global.UNDEFINED_COLOR; i++) {\n\t\t\tif (this.compareColors(this.colorHistory[i], color)) colorIndex = i;\n\t\t}\n\n\t\tif (!forceAdd && colorIndex === Global.UNDEFINED_COLOR) return;\n\n\t\tif (changePrimaryColor) {\n\t\t\tthis.primaryColor = color;\n\t\t} else {\n\t\t\tthis.secondaryColor = color;\n\t\t}\n\n\t\tif (colorIndex !== Global.UNDEFINED_COLOR) {\n\t\t\tthis.colorHistory = this.colorHistory.slice(0, colorIndex).concat(this.colorHistory.slice(colorIndex + 1, Global.COLOR_HISTORY_COUNT));\n\t\t\tthis.colorHistory.unshift(color);\n\t\t} else {\n\t\t\tthis.colorHistory.pop();\n\t\t\tthis.colorHistory.unshift(color);\n\t\t}\n\t}\n\n\tcompareColors(firstColor: string, secondColor: string): boolean {\n\t\treturn firstColor.substring(0, Global.ALPHA_INDEX_HEX) === secondColor.substring(0, Global.ALPHA_INDEX_HEX);\n\t}\n\n\t// fonction adaptee de la page https://css-tricks.com/converting-color-spaces-in-javascript/\n\tRGBToHex(r: number, g: number, b: number, a?: number): string {\n\t\tlet hexR: string = r.toString(16);\n\t\tlet hexG: string = g.toString(16);\n\t\tlet hexB: string = b.toString(16);\n\t\tlet hexA;\n\t\tif (a !== undefined) hexA = a.toString(16) || '0';\n\n\t\tif (hexR.length === 1) hexR = '0' + hexR;\n\t\tif (hexG.length === 1) hexG = '0' + hexG;\n\t\tif (hexB.length === 1) hexB = '0' + hexB;\n\t\tif (hexA && hexA.length === 1) hexA = '0' + hexA;\n\n\t\tlet color = '#' + hexR.toUpperCase() + hexG.toUpperCase() + hexB.toUpperCase();\n\t\tif (a !== undefined && hexA) color += hexA.toUpperCase();\n\t\treturn color;\n\t}\n\n\tresetCursor(currentTool: Tool): void {\n\t\tthis.clearCanvas(this.previewCtx);\n\t\tswitch (currentTool.info.name) {\n\t\t\tcase 'eraser':\n\t\t\tcase 'eye-dropper':\n\t\t\tcase 'stamp':\n\t\t\t\tthis.previewCtx.canvas.style.cursor = 'none';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.previewCtx.canvas.style.cursor = 'crosshair';\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tisEmpty(): boolean {\n\t\tconst pixelBuffer = new Uint32Array(this.baseCtx.getImageData(0, 0, this.canvasSize.x, this.canvasSize.y).data.buffer);\n\t\treturn !pixelBuffer.some((color) => color !== 0);\n\t}\n\n\tisWhiteCanvas(): boolean {\n\t\tconst pixelBuffer = new Uint32Array(this.baseCtx.getImageData(0, 0, this.canvasSize.x, this.canvasSize.y).data);\n\t\treturn !pixelBuffer.some((color) => color !== Global.MAX_HEX_VALUE);\n\t}\n\n\tnew(): void {\n\t\tthis.baseCtx.clearRect(0, 0, this.canvasSize.x, this.canvasSize.y);\n\t\tthis.previewCtx.clearRect(0, 0, this.canvasSize.x, this.canvasSize.x);\n\t\tthis.commandManager.clear();\n\t\tthis.canvasImage = '';\n\t\tthis.initCanvas();\n\t}\n\n\tplaceResizeButton(component: Vec2): void {\n\t\tthis.bottomResizePos = { x: component.x / 2 - Global.HALF_CP_SIZE, y: component.y };\n\t\tthis.rightResizePos = { x: component.x, y: component.y / 2 - Global.HALF_CP_SIZE };\n\t\tthis.cornerResizePos = { x: component.x, y: component.y };\n\t\tif (component.x <= Global.MIN_SIZE) {\n\t\t\tcomponent.x = Global.MIN_SIZE;\n\t\t\tthis.bottomResizePos.x = Global.MIN_SIZE / 2 - Global.HALF_CP_SIZE;\n\t\t\tthis.rightResizePos.x = Global.MIN_SIZE;\n\t\t\tthis.cornerResizePos.x = Global.MIN_SIZE;\n\t\t}\n\t\tif (component.y <= Global.MIN_SIZE) {\n\t\t\tcomponent.y = Global.MIN_SIZE;\n\t\t\tthis.bottomResizePos.y = Global.MIN_SIZE;\n\t\t\tthis.rightResizePos.y = Global.MIN_SIZE / 2 - Global.HALF_CP_SIZE;\n\t\t\tthis.cornerResizePos.y = Global.MIN_SIZE;\n\t\t}\n\t}\n\n\tgetCanvasDimensions(): Vec2 {\n\t\treturn { x: Math.round(this.canvasSize.x), y: Math.round(this.canvasSize.y) };\n\t}\n\n\tplaceBoxButton(component: Vec2): void {\n\t\tconst boxShift = (Global.SHIFT_FACTOR * Global.BOX_CP_SIZE) / 2;\n\t\tthis.eastBoxPos = { x: component.x - boxShift, y: component.y / 2 - Global.BOX_CP_SIZE };\n\t\tthis.northBoxPos = { x: component.x / 2 - Global.BOX_CP_SIZE, y: -boxShift - 2 };\n\t\tthis.northEastBoxPos = { x: component.x - boxShift, y: -boxShift - 2 };\n\t\tthis.northWestBoxPos = { x: -boxShift, y: -boxShift };\n\t\tthis.southBoxPos = { x: component.x / 2 - Global.BOX_CP_SIZE / 2 - 1, y: component.y - boxShift };\n\t\tthis.southEastBoxPos = { x: component.x - boxShift, y: component.y - boxShift };\n\t\tthis.southWestBoxPos = { x: -boxShift - 2, y: component.y - boxShift };\n\t\tthis.westBoxPos = { x: -boxShift - 2, y: component.y / 2 - Global.BOX_CP_SIZE };\n\t}\n\n\tinitCanvas(): void {\n\t\tif (this.canvasImage !== '') {\n\t\t\tconst image = new Image();\n\n\t\t\tthis.baseCtx.clearRect(0, 0, this.canvasSize.x, this.canvasSize.y);\n\t\t\timage.onload = () => {\n\t\t\t\tthis.previewCtx.canvas.width = this.baseCtx.canvas.width = this.canvasSize.x = image.width;\n\t\t\t\tthis.previewCtx.canvas.height = this.baseCtx.canvas.height = this.canvasSize.y = image.height;\n\t\t\t\tthis.baseCtx.drawImage(image, 0, 0);\n\t\t\t\tthis.placeResizeButton(this.canvasSize);\n\t\t\t\tthis.addActionToStack();\n\t\t\t};\n\t\t\timage.src = this.canvasImage;\n\t\t} else {\n\t\t\tif (this.containerSize.x < Global.MIN_SIZE_CONDITION) {\n\t\t\t\tthis.canvasSize.x = Global.MIN_SIZE;\n\t\t\t} else {\n\t\t\t\tthis.canvasSize.x = this.containerSize.x / 2;\n\t\t\t}\n\t\t\tif (this.containerSize.y < Global.MIN_SIZE_CONDITION) {\n\t\t\t\tthis.canvasSize.y = Global.MIN_SIZE;\n\t\t\t} else {\n\t\t\t\tthis.canvasSize.y = this.containerSize.y / 2;\n\t\t\t}\n\t\t\tthis.previewCtx.canvas.width = this.baseCtx.canvas.width = this.canvasSize.x;\n\t\t\tthis.previewCtx.canvas.height = this.baseCtx.canvas.height = this.canvasSize.y;\n\t\t\tthis.placeResizeButton(this.canvasSize);\n\t\t\tthis.addActionToStack();\n\t\t}\n\t\tthis.baseCtx.fillStyle = 'white';\n\t\tthis.baseCtx.fillRect(0, 0, this.canvasSize.x, this.canvasSize.y);\n\t\tlocalStorage.setItem('save', this.canvasImage);\n\t}\n\n\taddActionToStack(): void {\n\t\tconst canSize = { ...this.canvasSize };\n\t\tconst funcResize: CallableFunction = () => {\n\t\t\tthis.previewCtx.canvas.width = this.baseCtx.canvas.width = this.canvasSize.x = canSize.x;\n\t\t\tthis.previewCtx.canvas.height = this.baseCtx.canvas.height = this.canvasSize.y = canSize.y;\n\t\t\tthis.placeResizeButton(this.canvasSize);\n\t\t};\n\t\tthis.commandManager.addAction(funcResize);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { CarrouselComponent } from '@app/components/carrousel/carrousel.component';\nimport { ExportComponent } from '@app/components/export/export.component';\nimport { SaveComponent } from '@app/components/save/save.component';\nimport { WarningComponent } from '@app/components/warning/warning.component';\nimport { GridService } from '@app/services/grid/grid.service';\nimport { ResizeSelectionService } from '@app/services/selection/resize-selection.service';\nimport { ShiftSelectionService } from '@app/services/selection/shift-selection.service';\nimport { Global } from '@app/shared/global';\nimport { DrawingService } from 'src/app/services/drawing/drawing.service';\nimport { ToolService } from 'src/app/services/tools/tool.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class EventManagerService {\n\t// On permet les no-string-literal et le no-any pour pouvoir tester les fonctions privees du service\n\t// tslint:disable:no-string-literal\n\t// tslint:disable: no-any\n\tprivate isKeyDown: boolean = false;\n\tprivate commandMap: Map<string, () => void> = new Map<string, () => void>();\n\tconstructor(private toolService: ToolService, private drawingService: DrawingService, public dialog: MatDialog) {\n\t\tthis.handleKeydown = this.handleKeydown.bind(this);\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onWheel = this.onWheel.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t\tthis.onDoubleClick = this.onDoubleClick.bind(this);\n\t\tthis.onKeyUp = this.onKeyUp.bind(this);\n\t\tthis.onKeyDown = this.onKeyDown.bind(this);\n\t\tthis.enableShortcuts();\n\t\tthis.commandMap.set(this.getEventHashKey(Global.REDO_EVENT), () => {\n\t\t\tthis.redoWrapper();\n\t\t});\n\t\tthis.commandMap.set(this.getEventHashKey(Global.UNDO_EVENT), () => {\n\t\t\tthis.undoWrapper();\n\t\t});\n\t\tthis.commandMap.set(this.getEventHashKey(Global.EXPORT_EVENT), () => {\n\t\t\tthis.exportWrapper();\n\t\t});\n\t\tthis.commandMap.set(this.getEventHashKey(Global.CARROUSEL_EVENT), () => {\n\t\t\tthis.carrouselWrapper();\n\t\t});\n\t\tthis.commandMap.set(this.getEventHashKey(Global.SAVE_EVENT), () => {\n\t\t\tthis.saveWrapper();\n\t\t});\n\t\tthis.commandMap.set(this.getEventHashKey(Global.OPEN_EVENT), () => {\n\t\t\tthis.openWrapper();\n\t\t});\n\t}\n\n\tenableShortcuts(): void {\n\t\tdocument.body.addEventListener('keydown', this.handleKeydown);\n\t}\n\n\tdisableShortcuts(): void {\n\t\tdocument.body.removeEventListener('keydown', this.handleKeydown);\n\t}\n\ttoggleView(shortcut: string): void {\n\t\tif (shortcut.toLowerCase() === 'g') {\n\t\t\t(this.toolService.getService(shortcut) as GridService).toggleGrid();\n\t\t}\n\t}\n\tisGridActive(): boolean {\n\t\tconst gridService: GridService = this.toolService.getService('g') as GridService;\n\t\tif (gridService.info.name !== 'grille') {\n\t\t\treturn false;\n\t\t}\n\t\treturn gridService.options.gridOptions.isActive;\n\t}\n\n\tprivate getEventHashKey(event: KeyboardEvent): string {\n\t\tconst ctrlKey = event.ctrlKey ? 'ctrl+' : '';\n\t\tconst shiftKey = event.shiftKey ? 'shift+' : '';\n\t\tconst key = event.key.toLowerCase();\n\t\treturn ctrlKey + shiftKey + key;\n\t}\n\n\tprivate redoWrapper(): void {\n\t\tif (!this.toolService.currentTool.info.name.includes('selection')) {\n\t\t\tthis.drawingService.redo();\n\t\t}\n\t}\n\n\tprivate undoWrapper(): void {\n\t\tif (!this.toolService.currentTool.info.name.includes('selection')) {\n\t\t\tthis.drawingService.undo();\n\t\t}\n\t}\n\texportWrapper(): void {\n\t\tif (!this.drawingService.isEmpty()) {\n\t\t\tthis.disableShortcuts();\n\t\t\tconst dialogExportRef = this.dialog.open(ExportComponent, { panelClass: 'custom-dialog-container' });\n\t\t\tdialogExportRef.afterClosed().subscribe((result: boolean) => {\n\t\t\t\tthis.enableShortcuts();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate saveWrapper(): void {\n\t\tthis.disableShortcuts();\n\t\tconst dialogExportRef = this.dialog.open(SaveComponent, { panelClass: 'custom-dialog-container' });\n\t\tdialogExportRef.afterClosed().subscribe((result: boolean) => {\n\t\t\tthis.enableShortcuts();\n\t\t});\n\t}\n\n\tprivate carrouselWrapper(): void {\n\t\tthis.disableShortcuts();\n\t\tconst dialogCarrouselRef = this.dialog.open(CarrouselComponent, { panelClass: 'custom-carrousel-container' });\n\t\tdialogCarrouselRef.afterClosed().subscribe((result: boolean) => {\n\t\t\tthis.enableShortcuts();\n\t\t\tif (result) {\n\t\t\t\tif (!this.drawingService.isEmpty()) {\n\t\t\t\t\tconst ref = this.dialog.open(WarningComponent, { panelClass: 'custom-warning-container' });\n\t\t\t\t\tref.afterClosed().subscribe((response: boolean) => {\n\t\t\t\t\t\tif (response) this.drawingService.initCanvas();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.drawingService.initCanvas();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate openWrapper(): void {\n\t\tif (!this.drawingService.isEmpty()) {\n\t\t\tthis.disableShortcuts();\n\t\t\tconst dialogNewRef = this.dialog.open(WarningComponent, { panelClass: 'custom-warning-container' });\n\t\t\tdialogNewRef.afterClosed().subscribe((result: boolean) => {\n\t\t\t\tthis.enableShortcuts();\n\t\t\t\tif (result) this.drawingService.new();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleShortcut(event: KeyboardEvent): boolean {\n\t\tlet hasHandled = true;\n\t\tconst key = this.getEventHashKey(event);\n\t\tif (this.commandMap.has(key)) {\n\t\t\t(this.commandMap.get(key) as () => void)();\n\t\t} else {\n\t\t\thasHandled = false;\n\t\t\tthis.toolService.handleCommand(event, this.isKeyDown);\n\t\t}\n\t\treturn hasHandled;\n\t}\n\n\tprivate handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key !== 'F12') {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (!this.toolService.hasBegunDrawing() && !this.handleShortcut(event)) {\n\t\t\tconst key = (event.ctrlKey ? 'ctrl-' : '') + event.key;\n\t\t\tif (this.toolService.currentTool.info.name.includes('selection') && !'rsv'.includes(event.key) && this.toolService.isValidToolKey(key)) {\n\t\t\t\tthis.drawingService.addAction(this.drawingService.lastAction);\n\t\t\t}\n\t\t\tthis.toolService.changeTool(key);\n\t\t}\n\t}\n\n\tstartDrawing(event: MouseEvent): void {\n\t\tif (this.toolService.currentTool.info.name === 'shift-selection' && this.getTarget(event).id === 'previewLayer') {\n\t\t\tthis.toolService.changeTool((this.toolService.currentTool as ShiftSelectionService).selector.info.shortcut);\n\t\t\treturn;\n\t\t} else if (this.toolService.currentTool.info.name === 'resize-selection' && this.getTarget(event).id === 'previewLayer') {\n\t\t\tthis.toolService.changeTool((this.toolService.currentTool as ResizeSelectionService).selector.info.shortcut);\n\t\t\treturn;\n\t\t}\n\t\tthis.disableShortcuts();\n\t\tdocument.body.addEventListener('mouseup', this.onMouseUp);\n\t\tdocument.body.addEventListener('keydown', this.onKeyDown);\n\n\t\tif (\n\t\t\t!this.toolService.hasBegunDrawing() ||\n\t\t\tthis.toolService.currentTool.info.name === 'line' ||\n\t\t\tthis.toolService.currentTool.info.name === 'lasso'\n\t\t) {\n\t\t\tthis.toolService.currentTool.onMouseDown(event);\n\t\t}\n\t}\n\n\tprivate getTarget(event: MouseEvent): Element {\n\t\treturn event.target as Element;\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tthis.toolService.currentTool.onMouseMove(event);\n\t}\n\n\tonWheel(event: WheelEvent): void {\n\t\tthis.toolService.currentTool.onWheel(event);\n\t}\n\n\tprivate onMouseUp(event: MouseEvent): void {\n\t\tthis.toolService.currentTool.onMouseUp(event);\n\t\tdocument.body.removeEventListener('mouseup', this.onMouseUp);\n\t\tif (this.toolService.currentTool.info.name !== 'line' && this.toolService.currentTool.info.name !== 'lasso') {\n\t\t\tthis.enableShortcuts();\n\t\t\tdocument.body.removeEventListener('keydown', this.onKeyDown);\n\t\t} else {\n\t\t\tif (this.toolService.currentTool.info.name === 'line') {\n\t\t\t\tdocument.body.addEventListener('dblclick', this.onDoubleClick);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onDoubleClick(event: MouseEvent): void {\n\t\tthis.toolService.currentTool.onDoubleClick(event);\n\t\tthis.enableShortcuts();\n\t\tdocument.body.removeEventListener('keydown', this.onKeyDown);\n\t\tdocument.body.removeEventListener('dblclick', this.onDoubleClick);\n\t}\n\n\tprivate onKeyUp(event: KeyboardEvent): void {\n\t\tif (this.isKeyDown) {\n\t\t\tthis.toolService.handleCommand(event, false);\n\t\t\tthis.isKeyDown = !this.isKeyDown;\n\t\t}\n\n\t\tdocument.body.removeEventListener('keyup', this.onKeyUp);\n\t}\n\tprivate onKeyDown(event: KeyboardEvent): void {\n\t\tevent.preventDefault();\n\t\tif (!this.isKeyDown) {\n\t\t\tthis.toolService.handleCommand(event, true);\n\t\t\tthis.isKeyDown = !this.isKeyDown;\n\t\t}\n\t\tdocument.body.addEventListener('keyup', this.onKeyUp);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global } from '@app/shared/global';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class GridService extends Tool {\n\tgridColor: string = 'rgba(221,221,221)';\n\tcommandMap: Map<string, () => void> = new Map<string, () => void>();\n\tinfo: ToolInfo = new ToolInfo('grille', 'Grille', 'g');\n\toptions: ToolOption = new ToolOption(undefined, undefined, undefined, 1, true);\n\tvPath: string = 'M ' + this.options.gridOptions.size + ' 0 V' + this.options.gridOptions.size;\n\thPath: string = 'M 0 ' + this.options.gridOptions.size + ' H' + this.options.gridOptions.size;\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.commandMap.set('+', () => {\n\t\t\tthis.incrementGridSize();\n\t\t});\n\t\tthis.commandMap.set('=', () => {\n\t\t\tthis.incrementGridSize();\n\t\t});\n\t\tthis.commandMap.set('-', () => {\n\t\t\tthis.decrementGridSize();\n\t\t});\n\t}\n\n\ttoggleGrid(): void {\n\t\tthis.options.gridOptions.isActive = !this.options.gridOptions.isActive;\n\t}\n\n\thandleCommand(command: KeyboardEvent, isDown: boolean): void {\n\t\tconst key = command.key;\n\t\tif (this.commandMap.has(key)) {\n\t\t\t(this.commandMap.get(key) as () => void)();\n\t\t}\n\t}\n\n\tupdateSize(size: number): void {\n\t\tthis.options.gridOptions.size = size;\n\t\tthis.vPath = 'M ' + this.options.gridOptions.size + ' 0 V' + this.options.gridOptions.size;\n\t\tthis.hPath = 'M 0 ' + this.options.gridOptions.size + ' H' + this.options.gridOptions.size;\n\t}\n\n\tincrementGridSize(): void {\n\t\tif (this.options.gridOptions.size < Global.MAX_SQUARE_SIZE) {\n\t\t\tthis.options.gridOptions.size += Global.INCREMENT_VALUE - (this.options.gridOptions.size % Global.INCREMENT_VALUE);\n\t\t}\n\t\tthis.updateSize(this.options.gridOptions.size);\n\t}\n\tdecrementGridSize(): void {\n\t\tif (this.options.gridOptions.size > Global.MIN_SQUARE_SIZE) {\n\t\t\tthis.options.gridOptions.size -=\n\t\t\t\tthis.options.gridOptions.size % Global.INCREMENT_VALUE === 0\n\t\t\t\t\t? Global.INCREMENT_VALUE\n\t\t\t\t\t: this.options.gridOptions.size % Global.INCREMENT_VALUE;\n\t\t} else {\n\t\t\tthis.options.gridOptions.size = Global.MIN_SQUARE_SIZE;\n\t\t}\n\n\t\tthis.updateSize(this.options.gridOptions.size);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { Vec2 } from '@app/classes/vec2';\nimport { ControlPoint, Global } from '@app/shared/global';\nimport { GridService } from './grid.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class MagnetService {\n\tinfo: ToolInfo = new ToolInfo('magnétisme', 'Magnétisme', 'm');\n\tisActive: boolean = false;\n\tcontrolPoint: ControlPoint = ControlPoint.Center;\n\tconstructor(private grid: GridService) {}\n\ttoggleIsActive(): void {\n\t\tthis.isActive = !this.isActive;\n\t}\n\tchangeControlPoint(controlPoint: string): void {\n\t\tthis.controlPoint = +controlPoint;\n\t}\n\tcalculatePosition(position: Vec2, boxSize: Vec2, usedMouse: boolean, direction: Vec2): void {\n\t\tif (this.isActive) {\n\t\t\t// init map\n\t\t\tconst controlPointMap = new Map();\n\t\t\tcontrolPointMap.set(ControlPoint.Center, { x: boxSize.x / 2, y: boxSize.y / 2 });\n\t\t\tcontrolPointMap.set(ControlPoint.CenterDown, { x: boxSize.x / 2, y: boxSize.y });\n\t\t\tcontrolPointMap.set(ControlPoint.CenterLeft, { x: 0, y: boxSize.y / 2 });\n\t\t\tcontrolPointMap.set(ControlPoint.CenterRight, { x: boxSize.x, y: boxSize.y / 2 });\n\t\t\tcontrolPointMap.set(ControlPoint.CenterUp, { x: boxSize.x / 2, y: 0 });\n\t\t\tcontrolPointMap.set(ControlPoint.CornerDownLeft, { x: 0, y: boxSize.y });\n\t\t\tcontrolPointMap.set(ControlPoint.CornerDownRight, { x: boxSize.x, y: boxSize.y });\n\t\t\tcontrolPointMap.set(ControlPoint.CornerUpLeft, { x: 0, y: 0 });\n\t\t\tcontrolPointMap.set(ControlPoint.CornerUpRight, { x: boxSize.x, y: 0 });\n\n\t\t\tconst gridSize = this.grid.options.gridOptions.size;\n\t\t\tconst halfGrid = gridSize / 2;\n\n\t\t\tconst offsetX = controlPointMap.get(this.controlPoint).x;\n\t\t\tconst offsetY = controlPointMap.get(this.controlPoint).y;\n\n\t\t\tconst posInGridX = (position.x + offsetX) % gridSize;\n\t\t\tconst posInGridY = (position.y + offsetY) % gridSize;\n\t\t\t// // new position\n\t\t\tposition.x = posInGridX > halfGrid ? position.x - posInGridX + gridSize : position.x - posInGridX;\n\t\t\tposition.y = posInGridY > halfGrid ? position.y - posInGridY + gridSize : position.y - posInGridY;\n\t\t\tif (!usedMouse) {\n\t\t\t\tposition.x = position.x + (direction.x / Global.SHIFT_AMOUNT) * gridSize;\n\t\t\t\tposition.y = position.y + (direction.y / Global.SHIFT_AMOUNT) * gridSize;\n\t\t\t}\n\t\t}\n\t}\n}\n","import { HttpClient, HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Global } from '@app/shared/global';\nimport { Dessin } from '@common/communication/dessin';\nimport { Observable } from 'rxjs';\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class SaveService {\n\tconstructor(private http: HttpClient) {}\n\n\tasync basicGet(): Promise<Dessin[]> {\n\t\treturn this.http.get<Dessin[]>(Global.BASE_URL + 'all').toPromise();\n\t}\n\n\tbasicPost(dessin: FormData): Observable<HttpResponse<void>> {\n\t\treturn this.http.post<void>(Global.BASE_URL, dessin, { observe: 'response' });\n\t}\n\n\tdeletePost(dessin: FormData): Observable<HttpResponse<void>> {\n\t\treturn this.http.post<void>(Global.BASE_URL + 'delete', dessin, { observe: 'response' });\n\t}\n\n\tgetDrawing(id: string): Observable<Blob> {\n\t\treturn this.http.get(Global.BASE_URL + `${id}`, { responseType: 'blob' });\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Command, Global, MouseButton } from '@app/shared/global';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { SelectionService } from './selection.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class EllipseSelectionService extends Tool implements SelectionService {\n\tinfo: ToolInfo = new ToolInfo('ellipse-selection', 'Sélection en éllipse', 's');\n\toptions: ToolOption = new ToolOption(undefined, false, false, Global.UNDEFINED_SIZE);\n\torigin: Vec2;\n\tdeltaX: number;\n\tdeltaY: number;\n\tselection: ImageData;\n\tisActiveSelection: boolean;\n\tisCircle: boolean;\n\n\tprivate shiftDown: boolean = false;\n\tprivate target: Vec2;\n\tprivate realDelta: Vec2;\n\n\tplaceBoxCallSource: Subject<Vec2> = new BehaviorSubject<Vec2>(Global.DEFAULT_VECTOR);\n\tplaceBox$: Observable<Vec2> = this.placeBoxCallSource.asObservable();\n\tchangeBoxSizeCallSource: Subject<Vec2> = new BehaviorSubject<Vec2>(Global.DEFAULT_VECTOR);\n\tchangeBoxSize$: Observable<Vec2> = this.changeBoxSizeCallSource.asObservable();\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.selection = new ImageData(1, 1);\n\t\tthis.deltaX = 1;\n\t\tthis.deltaY = 1;\n\t\tthis.isActiveSelection = false;\n\t}\n\n\thandleCommand(command: KeyboardEvent): void {\n\t\tif (!this.isDrawing) {\n\t\t\tthis.shiftDown = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (command.key === Command.SHIFT) {\n\t\t\tthis.shiftDown = !this.shiftDown;\n\t\t\tthis.updatePreview();\n\t\t} else if (command.key === Command.ESCAPE) {\n\t\t\tthis.deleteCurrentSelection();\n\t\t\tthis.isDrawing = false;\n\t\t\tthis.shiftDown = false;\n\t\t}\n\t}\n\n\tprivate updatePreview(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.changeStrokeSettings('black', Global.DEFAULT_DASH_AMOUNT);\n\n\t\tif (this.shiftDown) {\n\t\t\tthis.drawCircle(this.drawingService.previewCtx, this.origin, this.target);\n\t\t} else {\n\t\t\tthis.drawEllipse(this.drawingService.previewCtx, this.origin, this.target);\n\t\t}\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tif (this.isActiveSelection) {\n\t\t\tthis.isActiveSelection = false;\n\t\t\tthis.isCircle = false;\n\t\t\tthis.callPlaceBox(Global.RESET_VECTOR);\n\t\t\tthis.updatePreview();\n\t\t\treturn;\n\t\t}\n\t\tthis.isActiveSelection = false;\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.isDrawing = event.button === MouseButton.Left;\n\n\t\tif (this.isDrawing) {\n\t\t\tthis.origin = this.getPagePositionFromMouse(event);\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.callPlaceBox(Global.RESET_VECTOR);\n\t\t}\n\t}\n\n\tonMouseUp(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\n\t\t\tthis.realDelta = { x: Math.abs(this.origin.x - this.target.x), y: Math.abs(this.origin.y - this.target.y) };\n\n\t\t\tif (!this.shiftDown) {\n\t\t\t\tthis.limitRectanglePosition(this.drawingService.previewCtx, this.origin, this.target);\n\t\t\t} else {\n\t\t\t\tthis.isCircle = true;\n\t\t\t\tthis.limitSquarePosition(this.drawingService.previewCtx, this.origin, this.target);\n\t\t\t}\n\t\t\tthis.selectRectangle(this.origin);\n\t\t\tthis.origin = { x: Math.min(this.origin.x, this.target.x), y: Math.min(this.origin.y, this.target.y) };\n\t\t}\n\t\tGlobal.IS_FLIPPED = { x: 1, y: 1 };\n\t\tthis.isDrawing = false;\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.updatePreview();\n\t\t}\n\t}\n\n\tprivate drawEllipse(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2): void {\n\t\tthis.isCircle = false;\n\t\tconst deltas = { x: target.x - origin.x, y: target.y - origin.y };\n\t\tthis.strokeDashLine(ctx, origin, deltas);\n\n\t\tdeltas.x = deltas.x === 0 ? 1 : deltas.x;\n\t\tdeltas.y = deltas.y === 0 ? 1 : deltas.y;\n\t\tthis.selection = this.drawingService.baseCtx.getImageData(origin.x, origin.y, deltas.x, deltas.y);\n\t}\n\n\tprivate drawCircle(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2): void {\n\t\tthis.isCircle = true;\n\t\tthis.deltaX = target.x - origin.x;\n\t\tthis.deltaY = target.y - origin.y;\n\t\tthis.strokeDashLine(ctx, origin, { x: this.deltaX, y: Math.sign(this.deltaY) * Math.abs(this.deltaX) });\n\n\t\tthis.deltaX = this.deltaX === 0 ? 1 : this.deltaX;\n\t\tthis.deltaY = this.deltaY === 0 ? 1 : this.deltaY;\n\t\tthis.selection = this.drawingService.baseCtx.getImageData(origin.x, origin.y, this.deltaX, Math.sign(this.deltaY) * Math.abs(this.deltaX));\n\t}\n\n\tprivate strokeDashLine(ctx: CanvasRenderingContext2D, origin: Vec2, deltas: Vec2): void {\n\t\tctx.beginPath();\n\n\t\tif (this.isDrawing) {\n\t\t\tctx.ellipse(origin.x + deltas.x / 2, origin.y + deltas.y / 2, Math.abs(deltas.x) / 2, Math.abs(deltas.y) / 2, 0, 0, 2 * Math.PI);\n\t\t}\n\n\t\tctx.setLineDash([]);\n\t\tthis.changeStrokeSettings('white', 0);\n\t\tctx.stroke();\n\t\tctx.beginPath();\n\n\t\tif (this.isDrawing) {\n\t\t\tctx.ellipse(origin.x + deltas.x / 2, origin.y + deltas.y / 2, Math.abs(deltas.x) / 2, Math.abs(deltas.y) / 2, 0, 0, 2 * Math.PI);\n\t\t}\n\n\t\tctx.setLineDash([]);\n\t\tthis.changeStrokeSettings('black', Global.DEFAULT_DASH_AMOUNT);\n\t\tctx.stroke();\n\t}\n\n\tselectRectangle(origin: Vec2): void {\n\t\tthis.callChangeBoxSize({ x: this.deltaX, y: this.deltaY });\n\t\tthis.callPlaceBox(origin);\n\t\tthis.changeStrokeSettings('black', 0);\n\t\tthis.isActiveSelection = true;\n\t}\n\n\tprivate limitRectanglePosition(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2): void {\n\t\ttarget.x = target.x > ctx.canvas.width ? ctx.canvas.width : target.x;\n\t\ttarget.y = target.y > ctx.canvas.height ? ctx.canvas.height : target.y;\n\t\ttarget.x = target.x < 0 ? 0 : target.x;\n\t\ttarget.y = target.y < 0 ? 0 : target.y;\n\t\tthis.deltaX = target.x - origin.x;\n\t\tthis.deltaY = target.y - origin.y;\n\t}\n\n\tprivate limitSquarePosition(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2): void {\n\t\tthis.deltaX = target.x - origin.x;\n\t\tthis.deltaY = Math.sign(this.target.y - this.origin.y) * Math.abs(this.deltaX);\n\t\tif (origin.x + this.deltaX > ctx.canvas.width) {\n\t\t\tthis.deltaX = ctx.canvas.width - origin.x;\n\t\t}\n\t\tif (origin.y + this.deltaY > ctx.canvas.height) {\n\t\t\tthis.deltaY = ctx.canvas.height - origin.y;\n\t\t}\n\t\tif (origin.x + this.deltaX < 0) {\n\t\t\tthis.deltaX = -origin.x;\n\t\t}\n\t\tif (origin.y + this.deltaY < 0) {\n\t\t\tthis.deltaY = -origin.y;\n\t\t}\n\t}\n\n\tprivate changeStrokeSettings(color: string, dashAmount: number): void {\n\t\tthis.drawingService.previewCtx.strokeStyle = color;\n\t\tthis.drawingService.previewCtx.lineWidth = 1;\n\t\tthis.drawingService.previewCtx.setLineDash([dashAmount]);\n\t}\n\n\tdeleteCurrentSelection(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.selection = new ImageData(1, 1);\n\t\tthis.callPlaceBox(Global.RESET_VECTOR);\n\t\tthis.isActiveSelection = false;\n\t}\n\n\tredrawSelection(position: Vec2, status: number, deltas: Vec2, selection: ImageData): void {\n\t\tconst halfDelta = {\n\t\t\tx: (Math.abs(deltas.x / this.deltaX) * this.realDelta.x) / 2,\n\t\t\ty: (Math.abs(deltas.y / this.deltaY) * this.realDelta.y) / 2,\n\t\t};\n\n\t\tif (this.drawingService.previewCtx !== undefined) {\n\t\t\tif (status === 0) {\n\t\t\t\tconst baseCtx = this.drawingService.baseCtx;\n\t\t\t\tbaseCtx.save();\n\t\t\t\tbaseCtx.beginPath();\n\t\t\t\tif (this.isCircle) {\n\t\t\t\t\tbaseCtx.ellipse(\n\t\t\t\t\t\tposition.x + halfDelta.x,\n\t\t\t\t\t\tposition.y + halfDelta.x,\n\t\t\t\t\t\tMath.abs(halfDelta.x),\n\t\t\t\t\t\tMath.abs(halfDelta.x),\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t2 * Math.PI,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tbaseCtx.ellipse(\n\t\t\t\t\t\tposition.x + halfDelta.x,\n\t\t\t\t\t\tposition.y + halfDelta.y,\n\t\t\t\t\t\tMath.abs(halfDelta.x),\n\t\t\t\t\t\tMath.abs(halfDelta.y),\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t2 * Math.PI,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbaseCtx.closePath();\n\t\t\t\tbaseCtx.clip();\n\t\t\t\tthis.drawingService.baseCtx.fillStyle = 'white';\n\t\t\t\tthis.drawingService.baseCtx.fillRect(position.x - 1, position.y - 1, Math.abs(deltas.x + 1), Math.abs(deltas.y + 1));\n\t\t\t\tbaseCtx.restore();\n\t\t\t}\n\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\t\tconst ctx = status !== 2 ? this.drawingService.previewCtx : this.drawingService.baseCtx;\n\t\t\tconst divisionFactor = { x: Math.abs(deltas.x / this.deltaX), y: Math.abs(deltas.y / this.deltaY) };\n\t\t\tconst maskCanvas = document.createElement('canvas');\n\t\t\tmaskCanvas.width = window.innerWidth / divisionFactor.x;\n\t\t\tmaskCanvas.height = window.innerHeight / divisionFactor.y;\n\t\t\tconst maskCtx = maskCanvas.getContext('2d') as CanvasRenderingContext2D;\n\n\t\t\tmaskCtx.putImageData(selection, position.x / divisionFactor.x, position.y / divisionFactor.y);\n\t\t\tctx.save();\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(position.x - 1, position.y - 1, Math.abs(deltas.x + 1), Math.abs(deltas.y + 1));\n\t\t\tctx.closePath();\n\t\t\tctx.clip();\n\t\t\tctx.beginPath();\n\t\t\tif (this.isCircle) {\n\t\t\t\tctx.ellipse(position.x + halfDelta.x, position.y + halfDelta.x, Math.abs(halfDelta.x), Math.abs(halfDelta.x), 0, 0, 2 * Math.PI);\n\t\t\t} else {\n\t\t\t\tctx.ellipse(position.x + halfDelta.x, position.y + halfDelta.y, Math.abs(halfDelta.x), Math.abs(halfDelta.y), 0, 0, 2 * Math.PI);\n\t\t\t}\n\t\t\tctx.closePath();\n\n\t\t\tctx.fillStyle = 'white';\n\t\t\tctx.fill();\n\t\t\tctx.clip();\n\t\t\tctx.scale(deltas.x / Math.abs(this.deltaX), deltas.y / Math.abs(this.deltaY));\n\t\t\tctx.drawImage(\n\t\t\t\tmaskCanvas,\n\t\t\t\tdeltas.x < 0 ? deltas.x / divisionFactor.x - (2 * position.x) / divisionFactor.x : 0,\n\t\t\t\tdeltas.y < 0 ? deltas.y / divisionFactor.y - (2 * position.y) / divisionFactor.y : 0,\n\t\t\t);\n\t\t\tctx.restore();\n\n\t\t\tthis.callChangeBoxSize({ x: Math.abs(deltas.x), y: Math.abs(deltas.y) });\n\t\t\tthis.callPlaceBox(position);\n\t\t\tthis.origin = position;\n\t\t}\n\t}\n\n\tcallPlaceBox(origin: Vec2): void {\n\t\tthis.placeBoxCallSource.next(origin);\n\t}\n\n\tcallChangeBoxSize(delta: Vec2): void {\n\t\tthis.changeBoxSizeCallSource.next(delta);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { LineService } from '@app/services/tools/line.service';\nimport { Global } from '@app/shared/global';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { SelectionService } from './selection.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class LassoSelectionService extends LineService implements SelectionService {\n\tinfo: ToolInfo = new ToolInfo('lasso', 'Sélection par Lasso', 'v');\n\toptions: ToolOption = new ToolOption(undefined, false, false, Global.UNDEFINED_SIZE);\n\tshiftDown: boolean = false;\n\torigin: Vec2;\n\ttarget: Vec2;\n\trealDelta: Vec2;\n\tdeltaX: number;\n\tdeltaY: number;\n\tprivate minX: number;\n\tprivate minY: number;\n\tselection: ImageData;\n\tprivate closed: boolean;\n\tprivate pathDataCopy: Vec2[];\n\tisActiveSelection: boolean;\n\n\tplaceBoxCallSource: Subject<Vec2> = new BehaviorSubject<Vec2>(Global.DEFAULT_VECTOR);\n\tplaceBox$: Observable<Vec2> = this.placeBoxCallSource.asObservable();\n\tchangeBoxSizeCallSource: Subject<Vec2> = new BehaviorSubject<Vec2>(Global.DEFAULT_VECTOR);\n\tchangeBoxSize$: Observable<Vec2> = this.changeBoxSizeCallSource.asObservable();\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.selection = new ImageData(1, 1);\n\t\tthis.deltaX = 1;\n\t\tthis.deltaY = 1;\n\t\tthis.isActiveSelection = false;\n\t}\n\n\tredrawSelection(position: Vec2, status: number, deltas: Vec2, selection: ImageData): void {\n\t\tif (this.drawingService.previewCtx !== undefined) {\n\t\t\tif (this.isActiveSelection && position !== this.origin) {\n\t\t\t\tGlobal.IS_FLIPPED = { x: 1, y: 1 };\n\t\t\t}\n\n\t\t\tif (status === 0) {\n\t\t\t\tconst baseCtx = this.drawingService.baseCtx;\n\t\t\t\tbaseCtx.save();\n\t\t\t\tbaseCtx.beginPath();\n\t\t\t\tfor (const point of this.pathDataCopy) {\n\t\t\t\t\tbaseCtx.lineTo(point.x, point.y);\n\t\t\t\t}\n\t\t\t\tbaseCtx.closePath();\n\t\t\t\tbaseCtx.clip();\n\t\t\t\tbaseCtx.clearRect(position.x - 1, position.y - 1, deltas.x + 1, deltas.y + 1);\n\t\t\t\tbaseCtx.restore();\n\t\t\t}\n\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\t\tconst ctx = status !== 2 ? this.drawingService.previewCtx : this.drawingService.baseCtx;\n\t\t\tconst maskCanvas = document.createElement('canvas');\n\t\t\tconst imgCanvas = document.createElement('canvas');\n\t\t\tmaskCanvas.width = imgCanvas.width = ctx.canvas.width;\n\t\t\tmaskCanvas.height = imgCanvas.height = ctx.canvas.height;\n\t\t\tconst maskCtx = maskCanvas.getContext('2d') as CanvasRenderingContext2D;\n\t\t\tconst imgCtx = imgCanvas.getContext('2d') as CanvasRenderingContext2D;\n\t\t\timgCtx.putImageData(selection, 0, 0);\n\n\t\t\tctx.save();\n\n\t\t\tmaskCtx.beginPath();\n\t\t\tfor (const point of this.pathDataCopy) {\n\t\t\t\tmaskCtx.lineTo(point.x - this.minX, point.y - this.minY);\n\t\t\t}\n\t\t\tmaskCtx.closePath();\n\t\t\tmaskCtx.clip();\n\t\t\tmaskCtx.fillStyle = ctx.fillStyle = 'white';\n\t\t\tmaskCtx.fill();\n\t\t\tmaskCtx.drawImage(imgCanvas, 0, 0);\n\n\t\t\tctx.fill();\n\n\t\t\tctx.scale(deltas.x / Math.abs(this.deltaX), deltas.y / Math.abs(this.deltaY));\n\t\t\tconst divisionFactor = { x: Math.abs(deltas.x / this.deltaX), y: Math.abs(deltas.y / this.deltaY) };\n\n\t\t\tctx.drawImage(\n\t\t\t\tmaskCanvas,\n\t\t\t\tdeltas.x < 0 ? -(position.x / divisionFactor.x) - Math.abs(this.deltaX) : position.x / divisionFactor.x,\n\t\t\t\tdeltas.y < 0 ? -(position.y / divisionFactor.y) - Math.abs(this.deltaY) : position.y / divisionFactor.y,\n\t\t\t);\n\t\t\tctx.restore();\n\n\t\t\tthis.callChangeBoxSize({ x: Math.abs(deltas.x), y: Math.abs(deltas.y) });\n\t\t\tthis.callPlaceBox(position);\n\t\t\tthis.origin = position;\n\t\t\tthis.closed = false;\n\t\t\tGlobal.IS_FLIPPED = { x: Math.sign(deltas.x), y: Math.sign(deltas.y) };\n\t\t}\n\t}\n\n\tprotected click(event: MouseEvent): void {\n\t\tthis.callPlaceBox(Global.RESET_VECTOR);\n\t\tthis.pathDataCopy = [];\n\n\t\tGlobal.IS_FLIPPED = { x: 1, y: 1 };\n\n\t\tif (this.closed) {\n\t\t\tthis.closed = false;\n\t\t\tthis.isDrawing = false;\n\t\t\tthis.updatePreview();\n\t\t\treturn;\n\t\t}\n\t\tthis.mousePos = this.getPositionFromMouse(event) as Vec2;\n\t\tthis.isDrawing = true;\n\t\tif (this.shouldClosePath(this.pathData, this.mousePos)) {\n\t\t\tthis.pathData.push(this.pathData[0]);\n\t\t\tif (!this.checkLastSegment()) {\n\t\t\t\tthis.closed = true;\n\t\t\t\tthis.updatePreview();\n\t\t\t\tthis.drawRectangle();\n\t\t\t\tthis.stopDrawing(event);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.updateTip();\n\t\t\tthis.pathData.push(this.tipPos);\n\t\t\tthis.checkLastSegment();\n\t\t\tthis.updatePreview();\n\t\t}\n\t}\n\n\t// tslint:disable:no-empty\n\tonDoubleClick(event: MouseEvent): void {}\n\n\tprivate shouldClosePath(path: Vec2[], mousePos: Vec2): boolean {\n\t\treturn path.length > 1 && Math.abs(path[0].x - mousePos.x) <= Global.RAYON_MAX && Math.abs(path[0].y - mousePos.y) <= Global.RAYON_MAX;\n\t}\n\n\tprotected drawLine(ctx: CanvasRenderingContext2D, path: Vec2[], tipPosition: Vec2): void {\n\t\tif (path.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tctx.setLineDash(Global.SELECTION_LINEDASH);\n\t\tctx.lineWidth = 1;\n\t\tctx.lineCap = 'round';\n\t\tctx.lineJoin = 'round';\n\t\tctx.strokeStyle = 'grey';\n\n\t\tif (this.closed && !this.checkLastSegment()) {\n\t\t\tctx.lineWidth = 2;\n\t\t\tctx.strokeStyle = 'black';\n\t\t}\n\n\t\tctx.beginPath();\n\n\t\tfor (const point of path) {\n\t\t\tctx.lineTo(point.x, point.y);\n\t\t}\n\t\tif (this.shouldClosePath(this.pathData, this.mousePos) && !this.isGuided) {\n\t\t\ttipPosition = path[0];\n\t\t}\n\t\tctx.lineTo(tipPosition.x, tipPosition.y);\n\t\tctx.stroke();\n\t\tthis.updateTip();\n\t}\n\n\tprivate checkLastSegment(): boolean {\n\t\tif (this.pathData.length > 2) {\n\t\t\tconst isIntersection: boolean[] = [];\n\t\t\tfor (let i = 0; i < this.pathData.length - 1; i++) {\n\t\t\t\tconst segment1: Vec2[] = [this.pathData[i], this.pathData[i + 1]];\n\t\t\t\tconst segment2: Vec2[] = [this.pathData[this.pathData.length - 2], this.pathData[this.pathData.length - 1]];\n\t\t\t\tisIntersection.push(this.calculateDeterminant(segment1, segment2));\n\t\t\t}\n\n\t\t\tif (isIntersection.includes(true)) {\n\t\t\t\tthis.deleteLastSegment();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (this.pathData.length === Global.CALL_AMOUNT) {\n\t\t\t\tif (this.shouldClosePath(this.pathData, this.pathData[2])) {\n\t\t\t\t\tthis.deleteLastSegment();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate calculateDeterminant(segment1: Vec2[], segment2: Vec2[]): boolean {\n\t\tconst determinants: number[] = [];\n\n\t\tfor (let i = 0; i <= 1; i++) {\n\t\t\tconst a = segment1[0].x - segment2[i].x;\n\t\t\tconst b = segment1[1].x - segment2[i].x;\n\t\t\tconst c = segment1[0].y - segment2[i].y;\n\t\t\tconst d = segment1[1].y - segment2[i].y;\n\n\t\t\tconst determinant = Math.sign(a * d - b * c);\n\t\t\tdeterminants.push(determinant);\n\t\t}\n\n\t\tfor (let i = 0; i <= 1; i++) {\n\t\t\tconst a = segment2[0].x - segment1[i].x;\n\t\t\tconst b = segment2[1].x - segment1[i].x;\n\t\t\tconst c = segment2[0].y - segment1[i].y;\n\t\t\tconst d = segment2[1].y - segment1[i].y;\n\n\t\t\tconst determinant = Math.sign(a * d - b * c);\n\t\t\tdeterminants.push(determinant);\n\t\t}\n\t\t// tslint:disable:no-magic-numbers\n\t\tconst zeroes: boolean = determinants[0] === 0 && determinants[1] === 0 && determinants[2] === 0 && determinants[3] === 0;\n\n\t\treturn determinants[0] === -determinants[1] && determinants[2] === -determinants[3] && !zeroes;\n\t}\n\n\tprivate drawRectangle(): void {\n\t\tconst maxX = Math.max.apply(\n\t\t\tMath,\n\t\t\tthis.pathData.map((point) => {\n\t\t\t\treturn point.x;\n\t\t\t}),\n\t\t);\n\t\tconst maxY = Math.max.apply(\n\t\t\tMath,\n\t\t\tthis.pathData.map((point) => {\n\t\t\t\treturn point.y;\n\t\t\t}),\n\t\t);\n\t\tthis.minX = Math.min.apply(\n\t\t\tMath,\n\t\t\tthis.pathData.map((point) => {\n\t\t\t\treturn point.x;\n\t\t\t}),\n\t\t);\n\t\tthis.minY = Math.min.apply(\n\t\t\tMath,\n\t\t\tthis.pathData.map((point) => {\n\t\t\t\treturn point.y;\n\t\t\t}),\n\t\t);\n\n\t\tthis.deltaX = maxX - this.minX;\n\t\tthis.deltaY = maxY - this.minY;\n\t\tthis.origin = { x: this.minX, y: this.minY };\n\n\t\tthis.selection = this.drawingService.baseCtx.getImageData(this.origin.x, this.origin.y, this.deltaX, this.deltaY);\n\t}\n\n\tselectRectangle(origin: Vec2): void {\n\t\tthis.changeStrokeSettings('#014BCC', 0);\n\t\tthis.drawingService.previewCtx.strokeRect(origin.x, origin.y, this.deltaX, this.deltaY);\n\t\tthis.callChangeBoxSize({ x: this.deltaX, y: this.deltaY });\n\t\tthis.callPlaceBox(origin);\n\t\tthis.isActiveSelection = true;\n\t}\n\n\tchangeStrokeSettings(color: string, dashAmount: number): void {\n\t\tthis.drawingService.previewCtx.strokeStyle = color;\n\t\tthis.drawingService.previewCtx.lineWidth = 1;\n\t\tthis.drawingService.previewCtx.setLineDash([dashAmount]);\n\t}\n\n\tprotected stopDrawing(event: MouseEvent): void {\n\t\tthis.mousePos = this.getPositionFromMouse(event);\n\t\tthis.updateTip();\n\t\tthis.isDrawing = false;\n\t\tthis.pathDataCopy = this.pathData;\n\t\tthis.clearPath();\n\t\tthis.unlock();\n\t\tthis.selectRectangle(this.origin);\n\t}\n\n\tdeleteCurrentSelection(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.selection = new ImageData(1, 1);\n\t\tthis.callPlaceBox(Global.RESET_VECTOR);\n\t\tthis.isActiveSelection = false;\n\t}\n\n\tcallPlaceBox(origin: Vec2): void {\n\t\tthis.placeBoxCallSource.next(origin);\n\t}\n\n\tcallChangeBoxSize(delta: Vec2): void {\n\t\tthis.changeBoxSizeCallSource.next(delta);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { SelectionService } from '@app/services/selection/selection.service';\nimport { Command, Global, MouseButton } from '@app/shared/global';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { ShiftSelectionService } from './shift-selection.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class RectangleSelectionService extends Tool implements SelectionService {\n\tinfo: ToolInfo = new ToolInfo('rectangle-selection', 'Sélection en rectangle', 'r');\n\toptions: ToolOption = new ToolOption(undefined, false, false, Global.UNDEFINED_SIZE);\n\torigin: Vec2;\n\tdeltaX: number;\n\tdeltaY: number;\n\tselection: ImageData;\n\tisActiveSelection: boolean;\n\n\tprivate target: Vec2;\n\tprivate shiftDown: boolean = false;\n\n\tplaceBoxCallSource: Subject<Vec2> = new BehaviorSubject<Vec2>(Global.DEFAULT_VECTOR);\n\tplaceBox$: Observable<Vec2> = this.placeBoxCallSource.asObservable();\n\tchangeBoxSizeCallSource: Subject<Vec2> = new BehaviorSubject<Vec2>(Global.DEFAULT_VECTOR);\n\tchangeBoxSize$: Observable<Vec2> = this.changeBoxSizeCallSource.asObservable();\n\n\tconstructor(drawingService: DrawingService, public shiftSelection: ShiftSelectionService) {\n\t\tsuper(drawingService);\n\t\tthis.selection = new ImageData(1, 1);\n\t\tthis.deltaX = 1;\n\t\tthis.deltaY = 1;\n\t\tthis.isActiveSelection = false;\n\t}\n\n\thandleCommand(command: KeyboardEvent): void {\n\t\tif (!this.isDrawing) {\n\t\t\tthis.shiftDown = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (command.key === Command.SHIFT) {\n\t\t\tthis.shiftDown = !this.shiftDown;\n\t\t\tthis.updatePreview();\n\t\t} else if (command.key === Command.ESCAPE) {\n\t\t\tthis.deleteCurrentSelection();\n\t\t\tthis.isDrawing = false;\n\t\t\tthis.shiftDown = false;\n\t\t}\n\t}\n\n\tprivate updatePreview(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\tif (this.shiftDown) {\n\t\t\tthis.drawSquare(this.drawingService.previewCtx, this.origin, this.target);\n\t\t} else {\n\t\t\tthis.drawRectangle(this.drawingService.previewCtx, this.origin, this.target);\n\t\t}\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tif (this.isActiveSelection) {\n\t\t\tthis.isActiveSelection = false;\n\t\t\tthis.callPlaceBox(Global.RESET_VECTOR);\n\t\t\treturn;\n\t\t}\n\t\tthis.isActiveSelection = false;\n\t\tthis.isDrawing = event.button === MouseButton.Left;\n\t\tif (this.isDrawing) {\n\t\t\tthis.origin = this.getPagePositionFromMouse(event);\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.callPlaceBox(Global.RESET_VECTOR);\n\t\t}\n\t}\n\n\tonMouseUp(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\t\tif (!this.shiftDown) {\n\t\t\t\tthis.limitRectanglePosition(this.drawingService.previewCtx, this.origin, this.target);\n\t\t\t} else {\n\t\t\t\tthis.limitSquarePosition(this.drawingService.previewCtx, this.origin, this.target);\n\t\t\t}\n\t\t\tthis.selectRectangle(this.origin);\n\t\t\tthis.origin = { x: Math.min(this.origin.x, this.target.x), y: Math.min(this.origin.y, this.target.y) };\n\t\t}\n\n\t\tGlobal.IS_FLIPPED = { x: 1, y: 1 };\n\t\tthis.isDrawing = false;\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.updatePreview();\n\t\t}\n\t}\n\n\tprivate drawRectangle(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2): void {\n\t\tconst deltas = { x: target.x - origin.x, y: target.y - origin.y };\n\t\tthis.strokeDashLine(ctx, origin, deltas);\n\n\t\tdeltas.x = deltas.x === 0 ? 1 : deltas.x;\n\t\tdeltas.y = deltas.y === 0 ? 1 : deltas.y;\n\t\tthis.selection = this.drawingService.baseCtx.getImageData(origin.x, origin.y, deltas.x, deltas.y);\n\t}\n\n\tprivate drawSquare(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2): void {\n\t\tthis.deltaX = target.x - origin.x;\n\t\tthis.deltaY = target.y - origin.y;\n\t\tthis.strokeDashLine(ctx, origin, { x: this.deltaX, y: Math.sign(this.deltaY) * Math.abs(this.deltaX) });\n\n\t\tthis.deltaX = this.deltaX === 0 ? 1 : this.deltaX;\n\t\tthis.deltaY = this.deltaY === 0 ? 1 : this.deltaY;\n\t\tthis.selection = this.drawingService.baseCtx.getImageData(origin.x, origin.y, this.deltaX, Math.sign(this.deltaY) * Math.abs(this.deltaX));\n\t}\n\n\tprivate strokeDashLine(ctx: CanvasRenderingContext2D, origin: Vec2, deltas: Vec2): void {\n\t\tthis.changeStrokeSettings('white', 0);\n\t\tctx.strokeRect(origin.x, origin.y, deltas.x, deltas.y);\n\t\tthis.changeStrokeSettings('black', Global.DEFAULT_DASH_AMOUNT);\n\t\tctx.strokeRect(origin.x, origin.y, deltas.x, deltas.y);\n\t}\n\n\tselectRectangle(origin: Vec2): void {\n\t\tthis.callChangeBoxSize({ x: this.deltaX, y: this.deltaY });\n\t\tthis.callPlaceBox(origin);\n\t\tthis.changeStrokeSettings('black', 0);\n\t\tthis.isActiveSelection = true;\n\t}\n\n\tprivate limitRectanglePosition(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2): void {\n\t\ttarget.x = target.x > ctx.canvas.width ? ctx.canvas.width : target.x;\n\t\ttarget.y = target.y > ctx.canvas.height ? ctx.canvas.height : target.y;\n\t\ttarget.x = target.x < 0 ? 0 : target.x;\n\t\ttarget.y = target.y < 0 ? 0 : target.y;\n\t\tthis.deltaX = target.x - origin.x;\n\t\tthis.deltaY = target.y - origin.y;\n\t}\n\n\tprivate limitSquarePosition(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2): void {\n\t\tthis.deltaX = target.x - origin.x;\n\t\tthis.deltaY = Math.sign(this.target.y - this.origin.y) * Math.abs(this.deltaX);\n\t\tif (origin.x + this.deltaX > ctx.canvas.width) {\n\t\t\tthis.deltaX = ctx.canvas.width - origin.x;\n\t\t}\n\t\tif (origin.y + this.deltaY > ctx.canvas.height) {\n\t\t\tthis.deltaY = ctx.canvas.height - origin.y;\n\t\t}\n\t\tif (origin.x + this.deltaX < 0) {\n\t\t\tthis.deltaX = -origin.x;\n\t\t}\n\t\tif (origin.y + this.deltaY < 0) {\n\t\t\tthis.deltaY = -origin.y;\n\t\t}\n\t}\n\n\tprivate changeStrokeSettings(color: string, dashAmount: number): void {\n\t\tthis.drawingService.previewCtx.strokeStyle = color;\n\t\tthis.drawingService.previewCtx.lineWidth = 1;\n\t\tthis.drawingService.previewCtx.setLineDash([dashAmount]);\n\t}\n\n\tdeleteCurrentSelection(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.selection = new ImageData(1, 1);\n\t\tthis.callPlaceBox(Global.RESET_VECTOR);\n\t\tthis.isActiveSelection = false;\n\t}\n\n\tredrawSelection(position: Vec2, status: number, deltas: Vec2, selection: ImageData): void {\n\t\tif (this.drawingService.previewCtx !== undefined) {\n\t\t\tif (status === 0) {\n\t\t\t\tthis.drawingService.baseCtx.fillStyle = 'white';\n\t\t\t\tthis.drawingService.baseCtx.fillRect(position.x - 1, position.y - 1, Math.abs(deltas.x + 1), Math.abs(deltas.y + 1));\n\t\t\t}\n\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\t\tconst ctx = status !== 2 ? this.drawingService.previewCtx : this.drawingService.baseCtx;\n\t\t\tconst divisionFactor = { x: Math.abs(deltas.x / this.deltaX), y: Math.abs(deltas.y / this.deltaY) };\n\t\t\tconst maskCanvas = document.createElement('canvas');\n\t\t\tmaskCanvas.width = window.innerWidth / divisionFactor.x;\n\t\t\tmaskCanvas.height = window.innerHeight / divisionFactor.y;\n\t\t\tconst maskCtx = maskCanvas.getContext('2d') as CanvasRenderingContext2D;\n\n\t\t\tmaskCtx.putImageData(selection, position.x / divisionFactor.x, position.y / divisionFactor.y);\n\t\t\tctx.save();\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(position.x - 1, position.y - 1, Math.abs(deltas.x + 1), Math.abs(deltas.y + 1));\n\t\t\tctx.closePath();\n\n\t\t\tctx.fillStyle = 'white';\n\t\t\tctx.fill();\n\t\t\tctx.clip();\n\t\t\tctx.scale(deltas.x / Math.abs(this.deltaX), deltas.y / Math.abs(this.deltaY));\n\t\t\tctx.drawImage(\n\t\t\t\tmaskCanvas,\n\t\t\t\tdeltas.x < 0 ? deltas.x / divisionFactor.x - (2 * position.x) / divisionFactor.x : 0,\n\t\t\t\tdeltas.y < 0 ? deltas.y / divisionFactor.y - (2 * position.y) / divisionFactor.y : 0,\n\t\t\t);\n\t\t\tctx.restore();\n\n\t\t\tthis.callChangeBoxSize({ x: Math.abs(deltas.x), y: Math.abs(deltas.y) });\n\t\t\tthis.callPlaceBox(position);\n\t\t\tthis.origin = position;\n\t\t}\n\t}\n\n\tcallPlaceBox(origin: Vec2): void {\n\t\tthis.placeBoxCallSource.next(origin);\n\t}\n\n\tcallChangeBoxSize(delta: Vec2): void {\n\t\tthis.changeBoxSizeCallSource.next(delta);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global } from '@app/shared/global';\nimport { SelectionService } from './selection.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class ResizeSelectionService extends Tool {\n\tinfo: ToolInfo = new ToolInfo('resize-selection', 'Redimensionnement de sélection', 'resizeSelection');\n\toptions: ToolOption = new ToolOption(0, false, false, 0);\n\tselector: SelectionService;\n\tisFirstResize: boolean;\n\tshiftIsPressed: boolean;\n\n\tprivate size: Vec2;\n\tprivate initBoxPosition: Vec2;\n\t// tslint:disable-next-line: no-empty\n\tlastAction: CallableFunction = () => {};\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.size = { x: 1, y: 1 };\n\t\tthis.isFirstResize = true;\n\t\tthis.shiftIsPressed = false;\n\t}\n\n\tresize(newSize: Vec2, oldSize: Vec2, sign: Vec2, tag: string): Vec2 {\n\t\tlet mode = 1;\n\t\tif (this.isFirstResize) {\n\t\t\tthis.isFirstResize = false;\n\t\t\tthis.initBoxPosition = this.selector.origin;\n\t\t\tmode = 0;\n\t\t}\n\n\t\tsign.x = tag.includes('w') ? -sign.x : sign.x;\n\t\tsign.y = tag.includes('n') ? -sign.y : sign.y;\n\n\t\tnewSize = { x: Math.sign(sign.x) * newSize.x, y: Math.sign(sign.y) * newSize.y };\n\t\tthis.updateCanvas(mode, newSize, oldSize);\n\t\tGlobal.IS_FLIPPED = { x: Math.sign(sign.x), y: Math.sign(sign.y) };\n\t\treturn { x: this.size.x * Math.sign(sign.x), y: this.size.y * Math.sign(sign.y) };\n\t}\n\n\tprivate minLimitResize(position: Vec2, oldSize: Vec2): Vec2 {\n\t\tif (position.x < 0) {\n\t\t\tposition.x = 0;\n\t\t\tthis.size.x = oldSize.x;\n\t\t}\n\n\t\tif (position.y < 0) {\n\t\t\tposition.y = 0;\n\t\t\tthis.size.y = oldSize.y;\n\t\t}\n\n\t\treturn position;\n\t}\n\n\tendSelection(): void {\n\t\tthis.updateCanvas(2, this.size, this.size);\n\t\tthis.isFirstResize = true;\n\t\tthis.selector.callPlaceBox(Global.RESET_VECTOR);\n\t}\n\n\tprivate updateCanvas(mode: number, newSize: Vec2, oldSize: Vec2): void {\n\t\tconst selection = this.selector.selection;\n\t\tthis.size.x = newSize.x === 0 ? 1 : newSize.x;\n\t\tthis.size.y = newSize.y === 0 ? 1 : newSize.y;\n\t\tthis.selector.origin = this.minLimitResize(this.selector.origin, oldSize);\n\t\tthis.selector.redrawSelection(this.selector.origin, mode, this.size, selection);\n\t\tconst imageData: ImageData = new ImageData(new Uint8ClampedArray(selection.data), selection.width, selection.height);\n\t\tconst positionCopy = { ...this.selector.origin };\n\t\tconst delta: Vec2 = { ...this.size };\n\t\tconst initBoxPositionCopy = { ...this.initBoxPosition };\n\t\tconst resizeService: ResizeSelectionService = { ...this };\n\t\tconst func: CallableFunction = () => {\n\t\t\tthis.clearMethod(resizeService, initBoxPositionCopy, delta);\n\t\t\tresizeService.selector.redrawSelection(positionCopy, mode, delta, imageData);\n\t\t\tresizeService.selector.redrawSelection(positionCopy, 2, delta, imageData);\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t\t(document.getElementById('selection-box') as HTMLElement).style.display = 'none';\n\t\t};\n\t\tthis.drawingService.lastAction = func;\n\t}\n\n\tprivate clearMethod(resizeService: ResizeSelectionService, position: Vec2, deltas: Vec2): void {\n\t\tif ('drawCircle' in resizeService.selector) {\n\t\t\tconst baseCtx = this.drawingService.baseCtx;\n\t\t\tbaseCtx.save();\n\t\t\tbaseCtx.beginPath();\n\t\t\tbaseCtx.ellipse(position.x + deltas.x / 2, position.y + deltas.y / 2, deltas.x / 2, deltas.y / 2, 0, 0, 2 * Math.PI);\n\t\t\tbaseCtx.closePath();\n\t\t\tbaseCtx.clip();\n\t\t\tthis.drawingService.baseCtx.clearRect(position.x - 1, position.y - 1, Math.abs(deltas.x + 1), Math.abs(deltas.y + 1));\n\t\t\tbaseCtx.restore();\n\t\t} else {\n\t\t\tthis.drawingService.baseCtx.clearRect(position.x - 1, position.y - 1, Math.abs(deltas.x + 1), Math.abs(deltas.y + 1));\n\t\t}\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { MagnetService } from '@app/services/grid/magnet.service';\nimport { Arrows, Global, MouseButton } from '@app/shared/global';\nimport { SelectionService } from './selection.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class ShiftSelectionService extends Tool {\n\tinfo: ToolInfo = new ToolInfo('shift-selection', 'Déplacement de sélection', 'shiftSelection');\n\toptions: ToolOption = new ToolOption(0, false, false, 0);\n\tselector: SelectionService;\n\toperation: number;\n\n\tprivate position: Vec2;\n\tprivate initBoxPosition: Vec2;\n\tprivate factors: Vec2;\n\tprivate size: Vec2;\n\tprivate isShifting: boolean;\n\n\t// tslint:disable-next-line: no-empty\n\tlastAction: CallableFunction = () => {};\n\n\tconstructor(drawingService: DrawingService, private magnetService: MagnetService) {\n\t\tsuper(drawingService);\n\t\tthis.isShifting = false;\n\t\tthis.operation = 0;\n\t\tthis.factors = { x: 0, y: 0 };\n\t\tthis.size = { x: 1, y: 1 };\n\t}\n\n\thandleCommandMap(keyMap: Map<string, boolean>, size: Vec2): void {\n\t\tthis.size = size;\n\t\tif (!this.isDrawing || !this.isShifting) {\n\t\t\tif (this.operation === 0) {\n\t\t\t\tthis.initBoxPosition = this.selector.origin;\n\t\t\t}\n\t\t\tthis.changeFactors(keyMap);\n\t\t\tthis.selector.selectRectangle(this.selector.origin);\n\t\t\tconst deltas = { x: Math.abs(this.size.x), y: Math.abs(this.size.y) };\n\t\t\tthis.position = {\n\t\t\t\tx: this.selector.origin.x + this.factors.x,\n\t\t\t\ty: this.selector.origin.y + this.factors.y,\n\t\t\t};\n\t\t\tthis.minLimitMouse();\n\n\t\t\tthis.updateCanvas(this.operation, deltas, false);\n\t\t\tthis.operation = 1;\n\t\t}\n\t}\n\n\thandleMouseDown(event: MouseEvent, position: Vec2, size: Vec2): void {\n\t\tthis.initBoxPosition = position;\n\t\tthis.size = size;\n\t\tthis.onMouseDown(event);\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tthis.isDrawing = event.button === MouseButton.Left;\n\t\tif (this.isDrawing) {\n\t\t\tthis.selector.isActiveSelection = false;\n\t\t\tthis.isShifting = true;\n\t\t\tthis.mouseDownCoord = { x: event.x, y: event.y };\n\t\t\tthis.position = this.initBoxPosition;\n\t\t\tthis.updateCanvas(this.operation, { x: Math.abs(this.size.x), y: Math.abs(this.size.y) }, true);\n\t\t\tthis.operation = 1;\n\t\t}\n\t}\n\n\tonMouseUp(): void {\n\t\tif (this.isShifting) {\n\t\t\tthis.isShifting = false;\n\t\t\tthis.isDrawing = false;\n\t\t\tthis.selector.isActiveSelection = true;\n\t\t\tconst deltas = { x: Math.abs(this.size.x), y: Math.abs(this.size.y) };\n\t\t\tthis.minLimitMouse();\n\t\t\tthis.updateCanvas(this.operation, deltas, true);\n\t\t}\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tif (this.isShifting) {\n\t\t\tconst deltas = { x: Math.abs(this.size.x), y: Math.abs(this.size.y) };\n\t\t\tconst eventPos = { x: event.x, y: event.y };\n\t\t\tthis.position = {\n\t\t\t\tx: this.initBoxPosition.x + eventPos.x - this.mouseDownCoord.x,\n\t\t\t\ty: this.initBoxPosition.y + eventPos.y - this.mouseDownCoord.y,\n\t\t\t};\n\t\t\tthis.minLimitMouse();\n\t\t\tthis.updateCanvas(this.operation, deltas, true);\n\t\t}\n\t}\n\n\tprivate minLimitMouse(): void {\n\t\tif (this.position.x < -Math.abs(this.size.x) + Global.RECTANGLE_LIMIT_OFFSET) {\n\t\t\tthis.position.x = -Math.abs(this.size.x) + Global.RECTANGLE_LIMIT_OFFSET;\n\t\t}\n\n\t\tif (this.position.y < 0) {\n\t\t\tthis.position.y = 0;\n\t\t}\n\t}\n\n\tprivate actionWrapper(\n\t\tshiftService: ShiftSelectionService,\n\t\tinitBoxPositionCopy: Vec2,\n\t\tdelta: Vec2,\n\t\tpositionCopy2: Vec2,\n\t\tdeltas: Vec2,\n\t\timageData: ImageData,\n\t): void {\n\t\tthis.clearMethod(shiftService, initBoxPositionCopy, delta);\n\t\tshiftService.selector.redrawSelection(positionCopy2, 1, deltas, imageData);\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tconst htmlElement: HTMLElement = document.getElementById('selection-box') as HTMLElement;\n\t\tif (htmlElement) htmlElement.style.display = 'none';\n\t}\n\tprivate actionWrapper2(\n\t\tshiftService: ShiftSelectionService,\n\t\tinitBoxPositionCopy2: Vec2,\n\t\tdeltaCopy: Vec2,\n\t\tpositionCopy: Vec2,\n\t\tmode: number,\n\t\tdeltas: Vec2,\n\t\timageDataCopy: ImageData,\n\t): void {\n\t\tthis.clearMethod(shiftService, initBoxPositionCopy2, deltaCopy);\n\t\tshiftService.selector.redrawSelection(positionCopy, mode, deltas, imageDataCopy);\n\t\tshiftService.selector.redrawSelection(positionCopy, 2, deltas, imageDataCopy);\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tconst htmlElement = document.getElementById('selection-box') as HTMLElement;\n\t\tif (htmlElement) htmlElement.style.display = 'none';\n\t}\n\n\tprivate updateCanvas(mode: number, deltas: Vec2, isMouse: boolean): void {\n\t\tdeltas = { x: deltas.x * Global.IS_FLIPPED.x, y: deltas.y * Global.IS_FLIPPED.y };\n\t\tthis.magnetService.calculatePosition(this.position, this.size, isMouse, this.factors);\n\t\tconst selection = this.selector.selection;\n\t\tif (!isMouse && mode === 0) {\n\t\t\tthis.selector.redrawSelection(this.initBoxPosition, mode, deltas, selection);\n\t\t\tconst imageData: ImageData = new ImageData(new Uint8ClampedArray(selection.data), selection.width, selection.height);\n\t\t\tconst positionCopy2 = { ...this.position };\n\t\t\tconst delta: Vec2 = { ...deltas };\n\t\t\tconst initBoxPositionCopy = { ...this.initBoxPosition };\n\t\t\tconst shiftService2: ShiftSelectionService = { ...this };\n\t\t\tthis.drawingService.lastAction = () => {\n\t\t\t\tthis.actionWrapper(shiftService2, initBoxPositionCopy, delta, positionCopy2, delta, imageData);\n\t\t\t};\n\t\t}\n\n\t\tthis.selector.redrawSelection(this.position, mode, deltas, selection);\n\t\tconst shiftService: ShiftSelectionService = { ...this };\n\t\tconst initBoxPositionCopy2 = { ...this.initBoxPosition };\n\t\tconst imageDataCopy: ImageData = new ImageData(new Uint8ClampedArray(selection.data), selection.width, selection.height);\n\t\tconst positionCopy = { ...this.position };\n\t\tconst deltaCopy: Vec2 = { ...deltas };\n\t\tthis.drawingService.lastAction = () => {\n\t\t\tthis.actionWrapper2(shiftService, initBoxPositionCopy2, deltaCopy, positionCopy, mode, deltaCopy, imageDataCopy);\n\t\t};\n\t}\n\n\tprivate clearMethod(shiftService: ShiftSelectionService, position: Vec2, deltas: Vec2): void {\n\t\tif ('drawCircle' in shiftService.selector) {\n\t\t\tconst baseCtx = this.drawingService.baseCtx;\n\t\t\tbaseCtx.save();\n\t\t\tbaseCtx.beginPath();\n\t\t\tbaseCtx.ellipse(position.x + deltas.x / 2, position.y + deltas.y / 2, deltas.x / 2, deltas.y / 2, 0, 0, 2 * Math.PI);\n\t\t\tbaseCtx.closePath();\n\t\t\tbaseCtx.clip();\n\t\t\tbaseCtx.clearRect(position.x - 1, position.y - 1, deltas.x + 1, deltas.y + 1);\n\t\t\tbaseCtx.restore();\n\t\t} else {\n\t\t\tthis.drawingService.baseCtx.clearRect(position.x - 1, position.y - 1, deltas.x + 1, deltas.y + 1);\n\t\t}\n\t}\n\n\tprivate changeFactors(keyMap: Map<string, boolean>): void {\n\t\tthis.factors.x = keyMap.get(Arrows.ARROWLEFT) ? -Global.SHIFT_AMOUNT : 0;\n\t\tthis.factors.x = keyMap.get(Arrows.ARROWRIGHT) ? Global.SHIFT_AMOUNT : this.factors.x;\n\t\tthis.factors.y = keyMap.get(Arrows.ARROWUP) ? -Global.SHIFT_AMOUNT : 0;\n\t\tthis.factors.y = keyMap.get(Arrows.ARROWDOWN) ? Global.SHIFT_AMOUNT : this.factors.y;\n\t}\n\n\tendSelection(): void {\n\t\tif (this.selector.deltaX !== 0 && this.selector.deltaY !== 0) {\n\t\t\tthis.operation = 2;\n\t\t\tthis.updateCanvas(this.operation, { x: Math.abs(this.size.x), y: Math.abs(this.size.y) }, true);\n\t\t\tthis.selector.callPlaceBox(Global.RESET_VECTOR);\n\t\t}\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Command, Global, Shortcut } from '@app/shared/global';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { SelectionService } from './selection.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class SurfaceSelectionService extends Tool implements SelectionService {\n\tinfo: ToolInfo = new ToolInfo('surface-selection', 'Sélection de la surface', 'ctrl-a');\n\toptions: ToolOption = new ToolOption(undefined, false, false, Global.UNDEFINED_SIZE);\n\torigin: Vec2;\n\tdeltaX: number;\n\tdeltaY: number;\n\tselection: ImageData;\n\tisActiveSelection: boolean;\n\n\tplaceBoxCallSource: Subject<Vec2> = new BehaviorSubject<Vec2>(Global.DEFAULT_VECTOR);\n\tplaceBox$: Observable<Vec2> = this.placeBoxCallSource.asObservable();\n\tchangeBoxSizeCallSource: Subject<Vec2> = new BehaviorSubject<Vec2>(Global.DEFAULT_VECTOR);\n\tchangeBoxSize$: Observable<Vec2> = this.changeBoxSizeCallSource.asObservable();\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.selection = new ImageData(1, 1);\n\t\tthis.isActiveSelection = false;\n\t}\n\n\thandleCommand(event: KeyboardEvent): void {\n\t\tthis.isActiveSelection = false;\n\t\tthis.origin = { x: 0, y: 0 };\n\t\tthis.deltaX = this.drawingService.baseCtx.canvas.width;\n\t\tthis.deltaY = this.drawingService.baseCtx.canvas.height;\n\t\tif (event.key === Shortcut.SURFACE_SELECTION.charAt(Shortcut.SURFACE_SELECTION.length - 1) || event.key === Shortcut.SURFACE_SELECTION) {\n\t\t\tthis.selectRectangle();\n\t\t}\n\t\tif (event.key === Command.ESCAPE) {\n\t\t\tthis.deleteCurrentSelection();\n\t\t}\n\t}\n\n\tselectRectangle(): void {\n\t\tconst ctx = this.drawingService.baseCtx;\n\t\tthis.selection = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n\t\tthis.callChangeBoxSize({ x: this.deltaX, y: this.deltaY });\n\t\tthis.callPlaceBox(this.origin);\n\t\tthis.isActiveSelection = true;\n\t}\n\n\tdeleteCurrentSelection(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.selection = new ImageData(1, 1);\n\t\tthis.callPlaceBox(Global.RESET_VECTOR);\n\t\tthis.isActiveSelection = false;\n\t}\n\n\tredrawSelection(position: Vec2, status: number, deltas: Vec2, selection: ImageData): void {\n\t\tif (this.drawingService.previewCtx !== undefined) {\n\t\t\tif (status === 0) {\n\t\t\t\tthis.drawingService.baseCtx.fillStyle = 'white';\n\t\t\t\tthis.drawingService.baseCtx.fillRect(position.x - 1, position.y - 1, Math.abs(deltas.x + 1), Math.abs(deltas.y + 1));\n\t\t\t}\n\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\t\tconst ctx = status !== 2 ? this.drawingService.previewCtx : this.drawingService.baseCtx;\n\t\t\tconst divisionFactor = { x: Math.abs(deltas.x / this.deltaX), y: Math.abs(deltas.y / this.deltaY) };\n\t\t\tconst maskCanvas = document.createElement('canvas');\n\t\t\tmaskCanvas.width = window.innerWidth / divisionFactor.x;\n\t\t\tmaskCanvas.height = window.innerHeight / divisionFactor.y;\n\t\t\tconst maskCtx = maskCanvas.getContext('2d') as CanvasRenderingContext2D;\n\n\t\t\tmaskCtx.putImageData(selection, position.x / divisionFactor.x, position.y / divisionFactor.y);\n\t\t\tctx.save();\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(position.x - 1, position.y - 1, Math.abs(deltas.x + 1), Math.abs(deltas.y + 1));\n\t\t\tctx.closePath();\n\n\t\t\tctx.fillStyle = 'white';\n\t\t\tctx.fill();\n\t\t\tctx.clip();\n\t\t\tctx.scale(deltas.x / Math.abs(this.deltaX), deltas.y / Math.abs(this.deltaY));\n\t\t\tctx.drawImage(\n\t\t\t\tmaskCanvas,\n\t\t\t\tdeltas.x < 0 ? deltas.x / divisionFactor.x - (2 * position.x) / divisionFactor.x : 0,\n\t\t\t\tdeltas.y < 0 ? deltas.y / divisionFactor.y - (2 * position.y) / divisionFactor.y : 0,\n\t\t\t);\n\t\t\tctx.restore();\n\n\t\t\tthis.callChangeBoxSize({ x: Math.abs(deltas.x), y: Math.abs(deltas.y) });\n\t\t\tthis.callPlaceBox(position);\n\t\t\tthis.origin = position;\n\t\t}\n\t}\n\n\tcallPlaceBox(origin: Vec2): void {\n\t\tthis.placeBoxCallSource.next(origin);\n\t}\n\n\tcallChangeBoxSize(delta: Vec2): void {\n\t\tthis.changeBoxSizeCallSource.next(delta);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Command, Global, MouseButton } from '@app/shared/global';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class EllipseService extends Tool {\n\t// Le constructeur\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t}\n\tinfo: ToolInfo = new ToolInfo('ellipse', 'Ellipse', '2');\n\toptions: ToolOption = new ToolOption(0);\n\tshiftDown: boolean = false;\n\torigin: Vec2;\n\ttarget: Vec2;\n\tsign: Vec2 = {} as Vec2;\n\n\t// Méthode qui check si shift est pesé et update le previewCtx\n\thandleCommand(command: KeyboardEvent): void {\n\t\tif (!this.isDrawing) {\n\t\t\tthis.shiftDown = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (command.key === Command.SHIFT) {\n\t\t\tthis.shiftDown = !this.shiftDown;\n\t\t\tthis.updatePreview();\n\t\t} else if (command.key === Command.ESCAPE) {\n\t\t\tthis.isDrawing = false;\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t}\n\t}\n\n\t// Update du previewCtx. Dessine un cercle si shift est pesé.\n\tupdatePreview(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tif (this.shiftDown) {\n\t\t\tthis.drawCircle(\n\t\t\t\tthis.drawingService.previewCtx,\n\t\t\t\tthis.origin,\n\t\t\t\tthis.options,\n\t\t\t\tthis.isDrawing,\n\t\t\t\tthis.drawingService.primaryColor,\n\t\t\t\tthis.drawingService.secondaryColor,\n\t\t\t\tthis.target,\n\t\t\t\tthis.sign,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.drawEllipse(\n\t\t\t\tthis.drawingService.previewCtx,\n\t\t\t\tthis.origin,\n\t\t\t\tthis.options,\n\t\t\t\tthis.isDrawing,\n\t\t\t\tthis.drawingService.primaryColor,\n\t\t\t\tthis.drawingService.secondaryColor,\n\t\t\t\tthis.target,\n\t\t\t\tthis.sign,\n\t\t\t);\n\t\t}\n\t}\n\n\t// Update du baseCtx. Dessine un cercle si shift est pesé.\n\tupdateBase(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\tconst options = { ...this.options };\n\t\toptions.shapeOptions = { ...this.options.shapeOptions };\n\t\tconst origin = { ...this.origin };\n\t\tconst target = { ...this.target };\n\t\tconst sign = { ...this.sign };\n\t\tconst pColor = this.drawingService.primaryColor;\n\t\tconst sColor = this.drawingService.secondaryColor;\n\t\tconst mouseDown = this.isDrawing;\n\n\t\tconst funcEllipse: CallableFunction = () => {\n\t\t\tthis.drawEllipse(this.drawingService.baseCtx, origin, options, mouseDown, pColor, sColor, target, sign);\n\t\t};\n\n\t\tconst funcCircle: CallableFunction = () => {\n\t\t\tthis.drawCircle(this.drawingService.baseCtx, origin, options, mouseDown, pColor, sColor, target, sign);\n\t\t};\n\n\t\tif (this.shiftDown) {\n\t\t\tfuncCircle();\n\t\t\tthis.drawingService.addAction(funcCircle);\n\t\t} else {\n\t\t\tfuncEllipse();\n\t\t\tthis.drawingService.addAction(funcEllipse);\n\t\t}\n\t}\n\n\t// Mouse down function: enregistre les coordonnees du click et indique que le dessin de l'ellipse est commencé;\n\t// Donne la position de son origine et reset la position du target\n\tonMouseDown(event: MouseEvent): void {\n\t\tthis.isDrawing = event.button === MouseButton.Left;\n\n\t\tif (!this.options.shapeOptions.contour && !this.options.shapeOptions.fill) {\n\t\t\tthis.options.shapeOptions.contour = true;\n\t\t}\n\n\t\tif (this.isDrawing) {\n\t\t\tthis.origin = this.getPagePositionFromMouse(event);\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t}\n\t}\n\n\t// Mouse up function: enregistre les coordonnees du mouseUp, et dessine une ellipse sur le canvas de base.\n\tonMouseUp(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.updateBase();\n\t\t\tthis.isDrawing = false;\n\t\t}\n\t}\n\n\t// Mouse move function: update le previewCtx à chaque mouvement de la souris. Si la souris n'est pas pesée,\n\t// clear le path continuellement.\n\tonMouseMove(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.sign.y = Math.sign(this.target.y - this.origin.y);\n\t\t\tthis.sign.x = Math.sign(this.target.x - this.origin.x);\n\t\t\tthis.updatePreview();\n\t\t}\n\t}\n\n\t// Dessin de l'ellipse\n\tdrawEllipse(\n\t\tctx: CanvasRenderingContext2D,\n\t\torigin: Vec2,\n\t\toptions: ToolOption,\n\t\tmouseDown: boolean,\n\t\tprimaryColor: string,\n\t\tsecondaryColor: string,\n\t\ttarget: Vec2,\n\t\tsign: Vec2,\n\t): void {\n\t\tctx.beginPath();\n\n\t\tif (!mouseDown) {\n\t\t\treturn;\n\t\t}\n\t\t// Style du perimetre autour de l'ellipse\n\t\tctx.strokeStyle = 'grey';\n\t\tctx.lineWidth = Global.ELLIPSE_PERIM_LINEWIDTH;\n\t\tctx.setLineDash([Global.ELLIPSE_PERIM_LINEDASH]);\n\n\t\tconst contourPadding: Vec2 = { x: 0, y: 0 };\n\n\t\tif (options.shapeOptions.contour) {\n\t\t\tcontourPadding.x = sign.x * options.size;\n\t\t\tcontourPadding.y = sign.y * options.size;\n\t\t}\n\n\t\t// Dessin du perimetre autour de l'ellipse\n\t\tif (ctx === this.drawingService.previewCtx) {\n\t\t\tctx.strokeRect(origin.x, origin.y, target.x - origin.x + contourPadding.x, target.y - origin.y + contourPadding.y);\n\t\t}\n\n\t\t// Ellipse\n\t\tctx.ellipse(\n\t\t\torigin.x + (target.x - origin.x) / 2 + contourPadding.x / 2,\n\t\t\torigin.y + (target.y - origin.y) / 2 + contourPadding.y / 2,\n\t\t\tMath.abs(target.x - origin.x) / 2,\n\t\t\tMath.abs(target.y - origin.y) / 2,\n\t\t\t0,\n\t\t\t0,\n\t\t\t2 * Math.PI,\n\t\t);\n\n\t\tctx.setLineDash([]);\n\t\tctx.strokeStyle = secondaryColor;\n\t\tctx.lineWidth = options.size;\n\t\tctx.fillStyle = primaryColor;\n\n\t\tif (options.shapeOptions.fill) {\n\t\t\tctx.fill();\n\t\t}\n\n\t\tif (options.shapeOptions.contour) {\n\t\t\tctx.stroke();\n\t\t}\n\t}\n\n\t// Dessin du cercle\n\tdrawCircle(\n\t\tctx: CanvasRenderingContext2D,\n\t\torigin: Vec2,\n\t\toptions: ToolOption,\n\t\tmouseDown: boolean,\n\t\tprimaryColor: string,\n\t\tsecondaryColor: string,\n\t\ttarget: Vec2,\n\t\tsign: Vec2,\n\t): void {\n\t\tctx.beginPath();\n\n\t\tif (!mouseDown) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Style du périmètre autour du cercle\n\t\tctx.strokeStyle = 'grey';\n\t\tctx.lineWidth = Global.ELLIPSE_PERIM_LINEWIDTH;\n\t\tctx.setLineDash([Global.ELLIPSE_PERIM_LINEDASH]);\n\n\t\tconst contourPadding: Vec2 = { x: 0, y: 0 };\n\n\t\tif (options.shapeOptions.contour) {\n\t\t\tcontourPadding.x = sign.x * options.size;\n\t\t\tcontourPadding.y = sign.y * options.size;\n\t\t}\n\n\t\t// Perimetre autour du cercle\n\t\tif (ctx === this.drawingService.previewCtx) {\n\t\t\tctx.strokeRect(origin.x, origin.y, target.x - origin.x + contourPadding.x, sign.y * Math.abs(target.x - origin.x) + contourPadding.y);\n\t\t}\n\n\t\t// Cercle\n\t\tctx.ellipse(\n\t\t\torigin.x + (target.x - origin.x) / 2 + contourPadding.x / 2,\n\t\t\torigin.y + sign.y * Math.abs((target.x - origin.x) / 2) + contourPadding.y / 2,\n\t\t\tMath.abs(target.x - origin.x) / 2,\n\t\t\tMath.abs(target.x - origin.x) / 2,\n\t\t\t0,\n\t\t\t0,\n\t\t\t2 * Math.PI,\n\t\t);\n\n\t\t// Affichage du cercle sur preview context\n\t\tctx.setLineDash([]);\n\t\tctx.strokeStyle = secondaryColor;\n\t\tctx.lineWidth = options.size;\n\t\tctx.fillStyle = primaryColor;\n\t\tif (options.shapeOptions.fill) {\n\t\t\tctx.fill();\n\t\t}\n\n\t\tif (options.shapeOptions.contour) {\n\t\t\tctx.stroke();\n\t\t}\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global, MouseButton } from '@app/shared/global';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class EraserService extends Tool {\n\tprivate pathData: Vec2[];\n\n\tinfo: ToolInfo = new ToolInfo('eraser', 'Efface', 'e');\n\toptions: ToolOption = new ToolOption(undefined, false, false, Global.ERASER_MIN_TRAIL_SIZE);\n\n\tprivate cursor: Vec2;\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.clearPath();\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tthis.isDrawing = event.button === MouseButton.Left;\n\t\tif (this.isDrawing) {\n\t\t\tthis.clearPath();\n\t\t\tthis.cursor = this.getPagePositionFromMouse(event);\n\t\t\tthis.pathData.push(this.cursor);\n\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t\tthis.erase(this.drawingService.previewCtx, this.pathData, this.options);\n\t\t\tthis.drawCursor(this.drawingService.previewCtx, this.cursor);\n\t\t}\n\t}\n\n\tonMouseUp(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tconst mousePosition = this.getPagePositionFromMouse(event);\n\t\t\tthis.pathData.push(mousePosition);\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t\tthis.erase(this.drawingService.baseCtx, this.pathData, this.options);\n\t\t\tthis.isDrawing = false;\n\t\t\tconst path: Vec2[] = [...this.pathData];\n\t\t\tconst options = { ...this.options };\n\t\t\tconst funcErase: CallableFunction = () => {\n\t\t\t\tthis.erase(this.drawingService.baseCtx, path, options);\n\t\t\t};\n\t\t\tthis.drawingService.addAction(funcErase);\n\t\t}\n\t\tthis.isDrawing = false;\n\t\tthis.clearPath();\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tthis.cursor = this.getPagePositionFromMouse(event);\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tif (this.isDrawing) {\n\t\t\tthis.pathData.push(this.cursor);\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t\tthis.erase(this.drawingService.previewCtx, this.pathData, this.options);\n\t\t}\n\n\t\tthis.drawCursor(this.drawingService.previewCtx, this.cursor);\n\t}\n\n\tprivate erase(ctx: CanvasRenderingContext2D, path: Vec2[], options: ToolOption): void {\n\t\tconst strokeStyle = ctx.strokeStyle;\n\t\tctx.fillStyle = 'white';\n\t\tctx.lineWidth = options.size;\n\t\tctx.fillRect(path[0].x - options.size / 2, path[0].y - options.size / 2, options.size, options.size);\n\n\t\tfor (let i = 0; i < path.length - 1; i++) {\n\t\t\tlet point0 = { x: path[i].x, y: path[i].y };\n\t\t\tlet point1 = { x: path[i + 1].x, y: path[i + 1].y };\n\t\t\tlet deltas = { x: point1.x - point0.x, y: point1.y - point0.y };\n\t\t\tconst isYAxis = Math.abs(deltas.y) > Math.abs(deltas.x);\n\n\t\t\tif (isYAxis) {\n\t\t\t\tpoint0 = { x: path[i].y, y: path[i].x };\n\t\t\t\tpoint1 = { x: path[i + 1].y, y: path[i + 1].x };\n\t\t\t\tdeltas = { x: point1.x - point0.x, y: point1.y - point0.y };\n\t\t\t}\n\t\t\tif (point0.x > point1.x) {\n\t\t\t\tlet tmp = {} as Vec2;\n\t\t\t\ttmp = point0;\n\t\t\t\tpoint0 = point1;\n\t\t\t\tpoint1 = tmp;\n\t\t\t}\n\t\t\tthis.plotLine(ctx, point0, point1, deltas, isYAxis, options);\n\t\t}\n\t\tctx.strokeStyle = strokeStyle;\n\t}\n\n\tprivate plotLine(ctx: CanvasRenderingContext2D, point0: Vec2, point1: Vec2, deltas: Vec2, isYAxis: boolean, options: ToolOption): void {\n\t\tconst slope = deltas.y / deltas.x;\n\t\tconst abscissa = point0.y - slope * point0.x;\n\n\t\tfor (let x = point0.x; x < point1.x; x += 2) {\n\t\t\tconst y = slope * x + abscissa;\n\n\t\t\tif (isYAxis) {\n\t\t\t\tctx.fillRect(y - options.size / 2, x - options.size / 2, options.size, options.size);\n\t\t\t} else {\n\t\t\t\tctx.fillRect(x - options.size / 2, y - options.size / 2, options.size, options.size);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate clearPath(): void {\n\t\tthis.pathData = [];\n\t}\n\n\tprivate drawCursor(ctx: CanvasRenderingContext2D, cursor: Vec2): void {\n\t\tctx.strokeStyle = 'black';\n\t\tctx.lineWidth = 1;\n\t\tctx.strokeRect(cursor.x - this.options.size / 2, cursor.y - this.options.size / 2, this.options.size, this.options.size);\n\t\tctx.fillStyle = 'white';\n\t\tctx.fillRect(cursor.x - this.options.size / 2, cursor.y - this.options.size / 2, this.options.size, this.options.size);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global, MouseButton } from '@app/shared/global';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class EyeDropperService extends Tool {\n\tprivate readonly PIXEL_SCALE: number = 16;\n\tprivate readonly CURSOR_SIZE: number = 40;\n\tprivate CURSOR: HTMLImageElement = new Image();\n\n\tinfo: ToolInfo = new ToolInfo('eye-dropper', 'EyeDropper', 'i');\n\toptions: ToolOption = new ToolOption(undefined, false, false, Global.UNDEFINED_SIZE);\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.CURSOR.src = '../../assets/eye-dropper.png';\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tconst position: Vec2 = this.getPagePositionFromMouse(event);\n\t\tconst color = this.drawingService.baseCtx.getImageData(position.x, position.y, 1, 1).data;\n\n\t\tif (event.button === MouseButton.Left) {\n\t\t\tthis.drawingService.changeColor(this.drawingService.RGBToHex(color[0], color[1], color[2], color[Global.GREEN_INDEX_HEX]), true, true);\n\t\t} else {\n\t\t\tthis.drawingService.changeColor(this.drawingService.RGBToHex(color[0], color[1], color[2], color[Global.GREEN_INDEX_HEX]), false, true);\n\t\t}\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tconst canvas = document.getElementById('eye-dropper-canvas') as HTMLCanvasElement;\n\t\tconst context = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n\t\tthis.drawingService.clearCanvas(context);\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\tconst cursor: Vec2 = this.getPagePositionFromMouse(event);\n\t\tif (cursor.x >= 0 && cursor.x <= this.drawingService.canvasSize.x && cursor.y >= 0 && cursor.y <= this.drawingService.canvasSize.y) {\n\t\t\tthis.drawZoom(context, cursor);\n\t\t\tthis.drawCursor(this.drawingService.previewCtx, cursor);\n\t\t}\n\t}\n\n\tprivate drawZoom(ctx: CanvasRenderingContext2D, position: Vec2): void {\n\t\tconst radius = ctx.canvas.width / (this.PIXEL_SCALE * 2);\n\t\tconst previewCtx: CanvasRenderingContext2D = this.drawingService.previewCtx;\n\t\tconst baseCtx: CanvasRenderingContext2D = this.drawingService.baseCtx;\n\n\t\tctx.imageSmoothingQuality = 'low';\n\t\tctx.imageSmoothingEnabled = false;\n\n\t\tpreviewCtx.save();\n\n\t\tpreviewCtx.beginPath();\n\t\tpreviewCtx.ellipse(position.x, position.y, radius, radius, 0, 0, 2 * Math.PI);\n\t\tpreviewCtx.closePath();\n\t\tpreviewCtx.clip();\n\t\tpreviewCtx.drawImage(baseCtx.canvas, 0, 0);\n\t\tpreviewCtx.restore();\n\n\t\tctx.drawImage(previewCtx.canvas, position.x - radius, position.y - radius, radius * 2, radius * 2, 0, 0, ctx.canvas.width, ctx.canvas.height);\n\t\tthis.drawingService.clearCanvas(previewCtx);\n\n\t\tctx.lineWidth = 2;\n\t\tctx.globalCompositeOperation = 'difference';\n\t\tctx.strokeStyle = 'white';\n\t\tctx.strokeRect(ctx.canvas.width / 2, ctx.canvas.height / 2, this.PIXEL_SCALE, this.PIXEL_SCALE / 2);\n\t}\n\n\tprivate drawCursor(ctx: CanvasRenderingContext2D, position: Vec2): void {\n\t\tctx.drawImage(this.CURSOR, position.x, position.y - this.CURSOR_SIZE, this.CURSOR_SIZE, this.CURSOR_SIZE);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Queue } from '@app/classes/data-structures/queue';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global, MouseButton, RGB } from '@app/shared/global';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class FillService extends Tool {\n\tprivate startingPoint: Vec2;\n\tprivate fillPoints: Vec2[] = new Array<Vec2>();\n\tinfo: ToolInfo = new ToolInfo('fill', 'Fill', 'b');\n\toptions: ToolOption = new ToolOption(undefined, undefined, undefined, undefined, undefined, true);\n\tprivate baseColor: Uint8ClampedArray;\n\tprivate replacementColor: Uint8ClampedArray;\n\tprivate row: number[] = [Global.NEGATIVE_DEFAULT_DELTA, Global.NEGATIVE_DEFAULT_DELTA, Global.NEGATIVE_DEFAULT_DELTA, 0, 0, 1, 1, 1];\n\tprivate col: number[] = [Global.NEGATIVE_DEFAULT_DELTA, 0, 1, Global.NEGATIVE_DEFAULT_DELTA, 1, Global.NEGATIVE_DEFAULT_DELTA, 0, 1];\n\tprivate imageData: ImageData;\n\tprivate actionMap: Map<number, () => void> = new Map();\n\tprivate visitedMatrix: boolean[][];\n\n\tconstructor(protected drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.actionMap.set(MouseButton.Left, () => {\n\t\t\tthis.leftClickMode(\n\t\t\t\tthis.drawingService.baseCtx,\n\t\t\t\tthis.startingPoint,\n\t\t\t\tthis.baseColor,\n\t\t\t\tthis.fillPoints,\n\t\t\t\tthis.visitedMatrix,\n\t\t\t\tthis.imageData,\n\t\t\t\tthis.replacementColor,\n\t\t\t);\n\t\t});\n\t\tthis.actionMap.set(MouseButton.Right, () => {\n\t\t\tthis.rightClickMode(this.imageData, this.replacementColor, this.baseColor);\n\t\t});\n\t}\n\tprivate copyImageData(ctx: CanvasRenderingContext2D, src: ImageData): ImageData {\n\t\tconst image = ctx.createImageData(src.width, src.height);\n\t\timage.data.set(src.data);\n\t\treturn image;\n\t}\n\tprivate copyColor(color: Uint8ClampedArray): Uint8ClampedArray {\n\t\tconst col = new Uint8ClampedArray(Global.SIZE_OF_DATA);\n\t\tfor (let i = 0; i < Global.SIZE_OF_DATA; i++) {\n\t\t\tcol[i] = color[i];\n\t\t}\n\t\treturn col;\n\t}\n\tprivate deepCopyInstance(\n\t\tctx: CanvasRenderingContext2D,\n\t): {\n\t\tctx: CanvasRenderingContext2D;\n\t\tstartingPoint: Vec2;\n\t\tbaseColor: Uint8ClampedArray;\n\t\tfillPoints: Vec2[];\n\t\tvisitedMatrix: boolean[][];\n\t\timageData: ImageData;\n\t\treplacementColor: Uint8ClampedArray;\n\t} {\n\t\treturn {\n\t\t\tctx,\n\t\t\tstartingPoint: { ...this.startingPoint },\n\t\t\tbaseColor: this.copyColor(this.baseColor),\n\t\t\tfillPoints: [...this.fillPoints],\n\t\t\tvisitedMatrix: [...this.visitedMatrix],\n\t\t\timageData: this.copyImageData(ctx, this.imageData),\n\t\t\treplacementColor: this.copyColor(this.replacementColor),\n\t\t};\n\t}\n\tgetCanvasSize(): Vec2 {\n\t\tconst dimensions: Vec2 = this.drawingService.getCanvasDimensions();\n\t\tif (isNaN(dimensions.x) || isNaN(dimensions.y) || !dimensions) {\n\t\t\treturn { x: Global.DEFAULT_CANVAS_SIZE, y: Global.DEFAULT_CANVAS_SIZE };\n\t\t}\n\n\t\treturn dimensions;\n\t}\n\n\tprivate resetVisitedMatrix(visitedMatrix: boolean[][]): boolean[][] {\n\t\tconst width: number = this.getCanvasSize().x ? this.getCanvasSize().x : Global.DEFAULT_CANVAS_SIZE;\n\t\tconst height: number = this.getCanvasSize().y ? this.getCanvasSize().y : Global.DEFAULT_CANVAS_SIZE;\n\t\tif (!visitedMatrix || visitedMatrix.length !== width || visitedMatrix[0].length !== height) {\n\t\t\tvisitedMatrix = new Array(width).fill(false).map(() => new Array(height).fill(false));\n\t\t} else {\n\t\t\tfor (let i = 0; i < width; i++) {\n\t\t\t\tfor (let j = 0; j < height; j++) {\n\t\t\t\t\tvisitedMatrix[i][j] = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn visitedMatrix;\n\t}\n\n\tprivate handleClick(event: MouseEvent): void {\n\t\tif (this.actionMap.has(event.button)) {\n\t\t\t(this.actionMap.get(event.button) as () => void)();\n\t\t\tconst copy: {\n\t\t\t\tctx: CanvasRenderingContext2D;\n\t\t\t\tstartingPoint: Vec2;\n\t\t\t\tbaseColor: Uint8ClampedArray;\n\t\t\t\tfillPoints: Vec2[];\n\t\t\t\tvisitedMatrix: boolean[][];\n\t\t\t\timageData: ImageData;\n\t\t\t\treplacementColor: Uint8ClampedArray;\n\t\t\t} = this.deepCopyInstance(this.drawingService.baseCtx);\n\t\t\tlet action: CallableFunction;\n\t\t\tif (event.button === MouseButton.Left) {\n\t\t\t\taction = () => {\n\t\t\t\t\tthis.leftClickMode(\n\t\t\t\t\t\tcopy.ctx,\n\t\t\t\t\t\tcopy.startingPoint,\n\t\t\t\t\t\tcopy.baseColor,\n\t\t\t\t\t\tcopy.fillPoints,\n\t\t\t\t\t\tcopy.visitedMatrix,\n\t\t\t\t\t\tcopy.imageData,\n\t\t\t\t\t\tcopy.replacementColor,\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\taction = () => {\n\t\t\t\t\tthis.rightClickMode(copy.imageData, copy.replacementColor, copy.baseColor);\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.drawingService.addAction(action);\n\t\t}\n\t}\n\n\tprivate rightClickMode(imageData: ImageData, replacementColor: Uint8ClampedArray, baseColor: Uint8ClampedArray): void {\n\t\tthis.replaceAllColor(imageData, replacementColor, baseColor);\n\t}\n\n\tprivate leftClickMode(\n\t\tctx: CanvasRenderingContext2D,\n\t\tstartingPoint: Vec2,\n\t\tbaseColor: Uint8ClampedArray,\n\t\tfillPoints: Vec2[],\n\t\tvisitedMatrix: boolean[][],\n\t\timageData: ImageData,\n\t\treplacementColor: Uint8ClampedArray,\n\t): void {\n\t\tvisitedMatrix = this.resetVisitedMatrix(visitedMatrix);\n\t\tfillPoints = [];\n\t\tthis.getRegionPoints(startingPoint, baseColor, fillPoints, visitedMatrix, ctx, imageData);\n\t\tthis.paintBucketFill(ctx, imageData, replacementColor, fillPoints);\n\t}\n\tprivate getImageData(ctx: CanvasRenderingContext2D, point: Vec2): ImageData {\n\t\treturn ctx.getImageData(point.x, point.y, ctx.canvas.width, ctx.canvas.height);\n\t}\n\tprivate async putImageData(ctx: CanvasRenderingContext2D, imageData: ImageData): Promise<void> {\n\t\tawait ctx.putImageData(imageData, 0, 0);\n\t}\n\n\tonMouseUp(event: MouseEvent): void {\n\t\tthis.imageData = this.getImageData(this.drawingService.baseCtx, { x: 0, y: 0 });\n\t\tthis.visitedMatrix = this.resetVisitedMatrix(this.visitedMatrix);\n\t\tthis.fillPoints = [];\n\t\tthis.startingPoint = this.getPagePositionFromMouse(event);\n\t\tthis.fillPoints.push(this.startingPoint);\n\t\tthis.baseColor = this.getRGBA(this.startingPoint, this.imageData);\n\t\tthis.replacementColor = this.hexToRGB(this.drawingService.primaryColor);\n\t\tthis.handleClick(event);\n\t}\n\n\tprivate getIndex(point: Vec2): number {\n\t\treturn (point.y * this.getCanvasSize().x + point.x) * Global.SIZE_OF_DATA;\n\t}\n\tprivate getRGBA(point: Vec2, imageData: ImageData): Uint8ClampedArray {\n\t\tlet index = this.getIndex(point);\n\t\tconst data: Uint8ClampedArray = new Uint8ClampedArray(Global.SIZE_OF_DATA);\n\t\tdata[RGB.R] = imageData.data[index];\n\t\tdata[RGB.G] = imageData.data[++index];\n\t\tdata[RGB.B] = imageData.data[++index];\n\t\tdata[RGB.A] = imageData.data[++index];\n\t\treturn data;\n\t}\n\n\tprivate hexToRGB(hex: string): Uint8ClampedArray {\n\t\tconst data: Uint8ClampedArray = new Uint8ClampedArray(Global.SIZE_OF_DATA);\n\t\tlet i = 1;\n\t\tdata[RGB.R] = parseInt(hex.slice(i++, ++i), Global.HEX_BASE);\n\t\tdata[RGB.G] = parseInt(hex.slice(i++, ++i), Global.HEX_BASE);\n\t\tdata[RGB.B] = parseInt(hex.slice(i++, ++i), Global.HEX_BASE);\n\t\tdata[RGB.A] = parseInt(hex.slice(i++, ++i), Global.HEX_BASE);\n\n\t\treturn data;\n\t}\n\n\tprivate replaceColor(index: number, color: Uint8ClampedArray): void {\n\t\tthis.imageData.data[index] = color[RGB.R];\n\t\tthis.imageData.data[++index] = color[RGB.G];\n\t\tthis.imageData.data[++index] = color[RGB.B];\n\t\tthis.imageData.data[++index] = color[RGB.A];\n\t}\n\n\tprivate isValid(pixel: Vec2, imageData: ImageData, baseColor: Uint8ClampedArray): boolean {\n\t\treturn (\n\t\t\tpixel.x >= 0 &&\n\t\t\tpixel.x < this.getCanvasSize().x &&\n\t\t\tpixel.y >= 0 &&\n\t\t\tpixel.y < this.getCanvasSize().y &&\n\t\t\tthis.acceptedColor(this.getRGBA(pixel, imageData), baseColor)\n\t\t);\n\t}\n\n\tprivate replaceAllColor(imageData: ImageData, replacementColor: Uint8ClampedArray, baseColor: Uint8ClampedArray): void {\n\t\tfor (let i = 0; i < imageData.data.length; i += Global.SIZE_OF_DATA) {\n\t\t\tconst data: Uint8ClampedArray = new Uint8ClampedArray(Global.SIZE_OF_DATA);\n\t\t\tdata[RGB.R] = imageData.data[i];\n\t\t\tdata[RGB.G] = imageData.data[i + RGB.G];\n\t\t\tdata[RGB.B] = imageData.data[i + RGB.B];\n\t\t\tdata[RGB.A] = imageData.data[i + RGB.A];\n\n\t\t\tif (this.acceptedColor(data, baseColor)) {\n\t\t\t\tthis.replaceColor(i, replacementColor);\n\t\t\t}\n\t\t}\n\t\tthis.putImageData(this.drawingService.baseCtx, imageData);\n\t}\n\n\tprivate getRegionPoints(\n\t\tstartPos: Vec2,\n\t\tbaseColor: Uint8ClampedArray,\n\t\tfillPoints: Vec2[],\n\t\tvisitedMatrix: boolean[][],\n\t\tctx: CanvasRenderingContext2D,\n\t\timageData: ImageData,\n\t): void {\n\t\tconst queue: Queue<Vec2> = new Queue();\n\t\tqueue.push(startPos);\n\t\tif (fillPoints.length > 0) {\n\t\t\tfillPoints = [];\n\t\t}\n\n\t\twhile (queue.length > 0) {\n\t\t\tconst curNode: Vec2 = queue.pop() as Vec2;\n\t\t\tif (curNode.x > visitedMatrix.length || curNode.y > visitedMatrix[0].length) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (this.acceptedColor(this.getRGBA(curNode, imageData), baseColor)) {\n\t\t\t\tfillPoints.push(curNode);\n\t\t\t}\n\n\t\t\tvisitedMatrix[curNode.x][curNode.y] = true;\n\t\t\tfor (let i = 0; i < this.row.length; i++) {\n\t\t\t\tlet visitedX = curNode.x + this.row[i] > 0 ? curNode.x + this.row[i] : 0;\n\t\t\t\tlet visitedY = curNode.y + this.col[i] > 0 ? curNode.y + this.col[i] : 0;\n\t\t\t\tvisitedX = curNode.x + this.row[i] < ctx.canvas.width ? visitedX : ctx.canvas.width - 1;\n\t\t\t\tvisitedY = curNode.y + this.col[i] < ctx.canvas.height ? visitedY : ctx.canvas.height - 1;\n\t\t\t\tif (!visitedMatrix[visitedX][visitedY] && this.isValid({ x: visitedX, y: visitedY }, imageData, baseColor)) {\n\t\t\t\t\tqueue.push({ x: visitedX, y: visitedY });\n\t\t\t\t\tvisitedMatrix[visitedX][visitedY] = true;\n\t\t\t\t} else {\n\t\t\t\t\tvisitedMatrix[visitedX][visitedY] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate acceptedColor(color: Uint8ClampedArray, target: Uint8ClampedArray): boolean {\n\t\treturn this.getTolerance(target, color) <= this.options.bucketOptions.tolerance;\n\t}\n\n\tprivate getTolerance(base: Uint8ClampedArray, target: Uint8ClampedArray): number {\n\t\tconst dR = Math.abs((base[RGB.R] - target[RGB.R]) / Global.MAX_HEX_VALUE);\n\t\tconst dG = Math.abs((base[RGB.G] - target[RGB.G]) / Global.MAX_HEX_VALUE);\n\t\tconst dB = Math.abs((base[RGB.B] - target[RGB.B]) / Global.MAX_HEX_VALUE);\n\t\tconst dA = Math.abs((base[RGB.A] - target[RGB.A]) / Global.MAX_HEX_VALUE);\n\t\treturn ((dR + dG + dB + dA) / Global.SIZE_OF_DATA) * Global.PERCENTAGE_CONST;\n\t}\n\n\tprivate paintBucketFill(ctx: CanvasRenderingContext2D, imageData: ImageData, replacementColor: Uint8ClampedArray, fillPoints: Vec2[]): void {\n\t\tfor (const point of fillPoints) {\n\t\t\tthis.replaceColor(this.getIndex(point), replacementColor);\n\t\t}\n\t\tthis.putImageData(ctx, imageData);\n\t\tfillPoints = [];\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { LineOptions } from '@app/classes/line-options';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Command, EnumAngleLigne, Global } from '@app/shared/global';\n\n// Ceci est une implémentation de base de l'outil Crayon pour aider à débuter le projet\n// L'implémentation ici ne couvre pas tous les critères d'accepetation du projet\n// Vous êtes encouragés de modifier et compléter le code.\n// N'oubliez pas de regarder les tests dans le fichier spec.ts aussi!\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class LineService extends Tool {\n\tinfo: ToolInfo = new ToolInfo('line', 'Ligne', 'l');\n\toptions: ToolOption = new ToolOption(undefined, true);\n\tprotected pathData: Vec2[];\n\tprotected mousePos: Vec2;\n\tprotected isGuided: boolean = false;\n\tprivate line: number[];\n\tprivate guidedPos: Vec2;\n\ttipPos: Vec2;\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.clearPath();\n\t}\n\n\thandleCommand(command: KeyboardEvent, isDown: boolean): void {\n\t\tif (!this.isDrawing) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (command.key) {\n\t\t\tcase Command.BACKSPACE: {\n\t\t\t\tif (isDown) {\n\t\t\t\t\tthis.deleteLastSegment();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Command.SHIFT: {\n\t\t\t\tif (!this.isGuided && isDown) {\n\t\t\t\t\tthis.lock();\n\t\t\t\t} else {\n\t\t\t\t\tthis.unlock();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Command.ESCAPE: {\n\t\t\t\tif (isDown) {\n\t\t\t\t\tthis.deleteLine();\n\t\t\t\t\tthis.drawingService.previewCtx.setLineDash([0]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tthis.isDrawing = true;\n\t\tthis.click(event);\n\t}\n\tprotected deleteLastSegment(): void {\n\t\tif (this.pathData.length < 2) {\n\t\t\treturn;\n\t\t}\n\t\tthis.pathData.pop();\n\t\tthis.updateTip();\n\t\tthis.updatePreview();\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tthis.drawingService.previewCtx.canvas.style.cursor = 'crosshair';\n\t\tif (this.isDrawing) {\n\t\t\tthis.mousePos = this.getPagePositionFromMouse(event);\n\t\t\tthis.updateTip();\n\t\t\tthis.updatePreview();\n\t\t}\n\t}\n\tprotected stopDrawing(event: MouseEvent): void {\n\t\tthis.mousePos = this.getPositionFromMouse(event);\n\t\tthis.updateTip();\n\t\tconst initialPoint = this.pathData[0];\n\t\tconst distance = this.distanceBetweenPoints(initialPoint, this.tipPos);\n\t\tif (distance < Global.RAYON_MAX) {\n\t\t\tthis.pathData.length -= 2;\n\n\t\t\tthis.pathData.push(initialPoint);\n\t\t} else {\n\t\t\tthis.pathData.length -= 1;\n\t\t}\n\n\t\tthis.isDrawing = false;\n\t\tthis.tipPos = this.pathData[this.pathData.length - 1];\n\n\t\tconst path: Vec2[] = [...this.pathData];\n\t\tconst options = { ...this.options };\n\t\toptions.lineOptions = new LineOptions();\n\t\toptions.lineOptions.connectionDotSize = this.options.lineOptions.connectionDotSize;\n\t\toptions.lineOptions.hasConnectionDots = this.options.lineOptions.hasConnectionDots;\n\t\tconst info = {\n\t\t\tctx: this.drawingService.baseCtx,\n\t\t\tpointsPath: path,\n\t\t\tcolor: this.drawingService.primaryColor,\n\t\t\toptions,\n\t\t\tlineOption: { ...options.lineOptions },\n\t\t};\n\n\t\tconst func: CallableFunction = () => {\n\t\t\tthis.drawLine(this.drawingService.baseCtx, info.pointsPath, {} as Vec2, info.color, info.options);\n\t\t};\n\t\tfunc();\n\t\tthis.drawingService.addAction(func);\n\t\tthis.clearPath();\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.unlock();\n\t}\n\n\tprotected updatePreview(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.drawLine(this.drawingService.previewCtx, this.pathData, this.tipPos, this.drawingService.primaryColor, this.options);\n\t}\n\n\tprivate drawConnectDots(ctx: CanvasRenderingContext2D, path: Vec2[], lineOptions: LineOptions): void {\n\t\tfor (const point of path) {\n\t\t\tthis.drawCircle(point.x, point.y, ctx, lineOptions);\n\t\t}\n\t}\n\tprivate drawCircle(x: number, y: number, ctx: CanvasRenderingContext2D, lineOptions: LineOptions): void {\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, lineOptions.connectionDotSize, 0, 2 * Math.PI, true);\n\t\tctx.fill();\n\t}\n\n\tprotected lock(): void {\n\t\tif (this.pathData.length > 0) {\n\t\t\tthis.line = this.getClosestLine(this.mousePos, this.pathData[this.pathData.length - 1]);\n\t\t\tthis.toggleGuidingMode(true);\n\t\t\tthis.updateTip();\n\t\t\tthis.updatePreview();\n\t\t}\n\t}\n\tprotected unlock(): void {\n\t\tthis.toggleGuidingMode(false);\n\t\tif (this.pathData.length > 0) {\n\t\t\tthis.updateTip();\n\t\t\tthis.updatePreview();\n\t\t}\n\t}\n\n\tprotected calculateGuidedPosition(oldPoint: Vec2, line: number[], mousePos: Vec2): Vec2 {\n\t\tconst a = line[0]; // ax + by + c = 0\n\t\tconst b = line[1];\n\t\tconst c = line[2];\n\n\t\tlet xFormula;\n\t\tlet formula;\n\t\tif (a === 0) {\n\t\t\txFormula = mousePos.x;\n\t\t\tformula = oldPoint.y;\n\t\t} else if (b === 0) {\n\t\t\txFormula = oldPoint.x;\n\t\t\tformula = mousePos.y;\n\t\t} else {\n\t\t\txFormula = mousePos.x;\n\t\t\tformula = -(a * mousePos.x + c) * b;\n\t\t}\n\t\treturn { x: xFormula, y: formula } as Vec2;\n\t}\n\n\tprotected drawLine(ctx: CanvasRenderingContext2D, path: Vec2[], tipPosition: Vec2, color: string, /*alpha: number, */ options: ToolOption): void {\n\t\tif (path.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tctx.lineWidth = options.size;\n\t\tctx.lineCap = 'round';\n\t\tctx.lineJoin = 'round';\n\t\tctx.strokeStyle = color;\n\t\tctx.fillStyle = color;\n\t\tctx.beginPath();\n\t\tfor (const point of path) {\n\t\t\tctx.lineTo(point.x, point.y);\n\t\t}\n\t\tctx.lineTo(tipPosition.x, tipPosition.y);\n\t\tctx.stroke();\n\t\tif (options.lineOptions.hasConnectionDots) {\n\t\t\tthis.drawConnectDots(ctx, path, options.lineOptions);\n\t\t}\n\t}\n\tprotected toggleGuidingMode(isGuide: boolean): void {\n\t\tthis.isGuided = isGuide;\n\t}\n\tprotected deleteLine(): void {\n\t\tthis.clearPath();\n\t\tthis.updatePreview();\n\t\tthis.isDrawing = false;\n\t}\n\n\tprivate distanceBetweenPoints(point1: Vec2, point2: Vec2): number {\n\t\tconst a: number = Math.pow(point1.x - point2.x, 2);\n\t\tconst b: number = Math.pow(point1.y - point2.y, 2);\n\t\treturn Math.sqrt(a + b);\n\t}\n\n\tprotected clearPath(): void {\n\t\tthis.pathData = [];\n\t}\n\n\tprotected updateTip(): void {\n\t\tif (this.isGuided && this.pathData.length > 0) {\n\t\t\tthis.guidedPos = this.calculateGuidedPosition(this.pathData[this.pathData.length - 1], this.line, this.mousePos);\n\t\t\tthis.tipPos = this.guidedPos;\n\t\t} else {\n\t\t\tthis.tipPos = this.mousePos;\n\t\t}\n\t}\n\tonDoubleClick(event: MouseEvent): void {\n\t\tthis.stopDrawing(event);\n\t}\n\tprotected click(event: MouseEvent): void {\n\t\tthis.mousePos = this.getPositionFromMouse(event) as Vec2;\n\t\tthis.updateTip();\n\t\tthis.pathData.push(this.tipPos);\n\t\tthis.updatePreview();\n\t}\n\tprivate getDistanceFromPointToLine(point: Vec2, line: number[]): number {\n\t\tconst val = Math.abs(line[0] * point.x + line[1] * point.y + line[2]);\n\t\tconst divider = Math.sqrt(line[0] * line[0] + line[1] * line[1]);\n\t\treturn val / divider;\n\t}\n\n\tprotected getClosestLine(currentPoint: Vec2, lastPoint: Vec2): number[] {\n\t\tconst lineList = [...Global.LINE_LIST];\n\t\tlineList[EnumAngleLigne.CENTTRENTECINQ].pop();\n\t\tlineList[EnumAngleLigne.QUARANTECINQ].pop();\n\t\tlineList[EnumAngleLigne.VERTICAL].pop();\n\t\tlineList[EnumAngleLigne.HORIZONTAL].pop();\n\t\tlineList[EnumAngleLigne.CENTTRENTECINQ].push(-(lastPoint.x + lastPoint.y));\n\t\tlineList[EnumAngleLigne.QUARANTECINQ].push(-(lastPoint.x - lastPoint.y));\n\t\tlineList[EnumAngleLigne.VERTICAL].push(-lastPoint.x);\n\t\tlineList[EnumAngleLigne.HORIZONTAL].push(-lastPoint.y);\n\n\t\tconst distance = lineList.map((line) => this.getDistanceFromPointToLine(currentPoint, line));\n\t\tconst maxDistance = Math.min(...distance);\n\t\tconst maxIndex = distance.indexOf(maxDistance);\n\t\treturn lineList[maxIndex];\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { MouseButton } from '@app/shared/global';\n\n// Ceci est une implémentation de base de l'outil Crayon pour aider à débuter le projet\n// L'implémentation ici ne couvre pas tous les critères d'accepetation du projet\n// Vous êtes encouragés de modifier et compléter le code.\n// N'oubliez pas de regarder les tests dans le fichier spec.ts aussi!\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class PencilService extends Tool {\n\tprivate pathData: Vec2[];\n\tinfo: ToolInfo = new ToolInfo('pencil', 'Crayon', 'c');\n\toptions: ToolOption = new ToolOption();\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.clearPath();\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tthis.isDrawing = event.button === MouseButton.Left;\n\t\tif (this.isCanvasReady()) {\n\t\t\tthis.mouseDownCoord = this.getPagePositionFromMouse(event);\n\t\t\tthis.updateView(this.mouseDownCoord, this.drawingService.previewCtx, this.pathData);\n\t\t}\n\t}\n\tprivate updateView(lastPoint: Vec2, ctx: CanvasRenderingContext2D, path: Vec2[]): void {\n\t\tpath.push(lastPoint);\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.drawLine(ctx, path, new ToolOption(undefined, false, false, this.options.size), this.drawingService.primaryColor);\n\t}\n\n\tonMouseUp(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tconst mousePosition = this.getPagePositionFromMouse(event);\n\t\t\tthis.updateView(mousePosition, this.drawingService.baseCtx, this.pathData);\n\t\t\tconst path: Vec2[] = [...this.pathData];\n\t\t\tconst info = { options: { ...this.options }, color: this.drawingService.primaryColor };\n\t\t\tconst func: CallableFunction = () => {\n\t\t\t\tthis.drawLine(this.drawingService.baseCtx, path, info.options, info.color);\n\t\t\t};\n\t\t\tthis.drawingService.addAction(func);\n\t\t}\n\t\tthis.isDrawing = false;\n\n\t\tthis.clearPath();\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tif (this.isCanvasReady()) {\n\t\t\tconst mousePosition = this.getPagePositionFromMouse(event);\n\t\t\tthis.updateView(mousePosition, this.drawingService.previewCtx, this.pathData);\n\t\t}\n\t}\n\n\tprivate isCanvasReady(): boolean {\n\t\treturn this.isDrawing;\n\t}\n\n\tprivate drawLine(ctx: CanvasRenderingContext2D, path: Vec2[], options: ToolOption, color: string /*, alpha: number*/): void {\n\t\tctx.lineWidth = options.size;\n\t\tctx.lineCap = 'round';\n\t\tctx.lineJoin = 'round';\n\t\tctx.strokeStyle = color;\n\t\tctx.beginPath();\n\t\tfor (const point of path) {\n\t\t\tctx.lineTo(point.x, point.y);\n\t\t}\n\t\tctx.stroke();\n\t}\n\n\tprivate clearPath(): void {\n\t\tthis.pathData = [];\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Line } from '@app/classes/math-line';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Command, Global, MouseButton } from '@app/shared/global';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class PolygoneService extends Tool {\n\tinfo: ToolInfo = new ToolInfo('polygone', 'Polygone', '3');\n\toptions: ToolOption = new ToolOption(Global.DEFAULT_VERTICES_NUMBER);\n\torigin: Vec2;\n\ttarget: Vec2;\n\tcenter: Vec2 = { x: 0, y: 0 };\n\tverticesCoords: Vec2[] = new Array<Vec2>(this.options.shapeOptions.nbVertices + 1);\n\tradius: number;\n\tcircleRadius: number;\n\tbreakPointRadius: number = -1;\n\n\t// Le constructeur\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t}\n\n\thandleCommand(command: KeyboardEvent): void {\n\t\tif (command.key === Command.ESCAPE) {\n\t\t\tthis.isDrawing = false;\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t}\n\t}\n\n\t// Update du previewCtx.\n\tupdatePreview(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\tthis.drawCircularPerimeter();\n\t\tthis.drawPolygone(\n\t\t\tthis.drawingService.previewCtx,\n\t\t\tthis.options.shapeOptions.nbVertices,\n\t\t\tthis.verticesCoords,\n\t\t\tthis.options.shapeOptions.fill,\n\t\t\tthis.options.shapeOptions.contour,\n\t\t\tthis.options.size,\n\t\t\tthis.drawingService.primaryColor,\n\t\t\tthis.drawingService.secondaryColor,\n\t\t);\n\t}\n\n\t// Update du baseCtx.\n\tupdateBase(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tconst option = {\n\t\t\tnbVertices: this.options.shapeOptions.nbVertices,\n\t\t\tverticesCoord: [...this.verticesCoords],\n\t\t\tfill: this.options.shapeOptions.fill,\n\t\t\tcontour: this.options.shapeOptions.contour,\n\t\t\tsize: this.options.size,\n\t\t\tprimaryColor: this.drawingService.primaryColor,\n\t\t\tsecondaryColor: this.drawingService.secondaryColor,\n\t\t};\n\t\tconst func: CallableFunction = () => {\n\t\t\tthis.drawPolygone(\n\t\t\t\tthis.drawingService.baseCtx,\n\t\t\t\toption.nbVertices,\n\t\t\t\toption.verticesCoord,\n\t\t\t\toption.fill,\n\t\t\t\toption.contour,\n\t\t\t\toption.size,\n\t\t\t\toption.primaryColor,\n\t\t\t\toption.secondaryColor,\n\t\t\t);\n\t\t};\n\t\tthis.drawingService.addAction(func);\n\t\tthis.drawPolygone(\n\t\t\tthis.drawingService.baseCtx,\n\t\t\tthis.options.shapeOptions.nbVertices,\n\t\t\tthis.verticesCoords,\n\t\t\tthis.options.shapeOptions.fill,\n\t\t\tthis.options.shapeOptions.contour,\n\t\t\tthis.options.size,\n\t\t\tthis.drawingService.primaryColor,\n\t\t\tthis.drawingService.secondaryColor,\n\t\t);\n\t}\n\n\t// Mouse down function: enregistre les coordonnees du click et indique que le dessin du polygone est commencé;\n\t// Donne la position de son origine et reset la position du target\n\tonMouseDown(event: MouseEvent): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tthis.isDrawing = event.button === MouseButton.Left;\n\n\t\tif (!this.options.shapeOptions.contour && !this.options.shapeOptions.fill) {\n\t\t\tthis.options.shapeOptions.contour = true;\n\t\t}\n\n\t\tif (this.isDrawing) {\n\t\t\tthis.origin = this.getPagePositionFromMouse(event);\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t}\n\t}\n\n\t// Mouse up function: enregistre les coordonnees du mouseUp, et update le canvas de base.\n\tonMouseUp(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t\tthis.isDrawing = false;\n\t\t\tthis.updateBase();\n\t\t}\n\t}\n\n\t// Update le previewCtx et le target à chaque mouvement si le dessin d'un rectangle est commencé\n\tonMouseMove(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\n\t\t\tthis.center.x = this.origin.x + (this.target.x - this.origin.x) / 2;\n\t\t\tthis.center.y = this.origin.y + Math.sign(this.target.y - this.origin.y) * this.radius;\n\n\t\t\tthis.verticesCoords = [];\n\t\t\tthis.calculateRadius();\n\t\t\tthis.getPolygonePoints();\n\t\t\tthis.updatePreview();\n\t\t}\n\t}\n\n\t// Calcul du rayon du cercle\n\tcalculateRadius(): void {\n\t\tthis.radius = Math.abs((this.target.x - this.origin.x) / 2);\n\n\t\tif (this.options.shapeOptions.contour) {\n\t\t\tthis.circleRadius = this.radius + this.options.size / 2;\n\t\t} else {\n\t\t\tthis.circleRadius = this.radius;\n\t\t}\n\t}\n\n\t// update la liste des coordonnees des sommets du polygone\n\tgetPolygonePoints(): void {\n\t\tconst angleDiff: number = (2 * Math.PI) / this.options.shapeOptions.nbVertices;\n\t\tlet currentCoordsX: number;\n\t\tlet currentCoordsY: number;\n\n\t\tfor (let i = 0; i < this.options.shapeOptions.nbVertices + 1; i++) {\n\t\t\tlet currentAngle: number;\n\n\t\t\tif (this.target.y - this.origin.y < 0) {\n\t\t\t\tcurrentAngle = angleDiff * i - Math.PI / 2;\n\t\t\t} else {\n\t\t\t\tcurrentAngle = angleDiff * i + Math.PI / 2;\n\t\t\t}\n\n\t\t\tcurrentCoordsX = this.center.x + this.radius * Math.cos(currentAngle);\n\t\t\tcurrentCoordsY = this.center.y + this.radius * Math.sin(currentAngle);\n\n\t\t\tthis.verticesCoords[i] = { x: currentCoordsX, y: currentCoordsY };\n\t\t}\n\t}\n\n\tdrawPolygone(\n\t\tctx: CanvasRenderingContext2D,\n\t\tnbVertices: number,\n\t\tverticesCoords: Vec2[],\n\t\tfill: boolean,\n\t\tcontour: boolean,\n\t\tsize: number,\n\t\tprimaryColor: string,\n\t\tsecondaryColor: string,\n\t): void {\n\t\tctx.lineWidth = size;\n\t\tctx.lineJoin = 'round';\n\t\tctx.fillStyle = primaryColor;\n\t\tctx.strokeStyle = secondaryColor;\n\t\tctx.setLineDash([]);\n\n\t\tif (nbVertices >= Global.DEFAULT_VERTICES_NUMBER && nbVertices <= Global.MAX_VERTICES_NUMBER) {\n\t\t\tconst shape = new Path2D();\n\t\t\tconst shapeFill = new Path2D();\n\t\t\tconst vertices: Vec2[] = contour ? this.findIntersectionPoints(verticesCoords, size) : verticesCoords;\n\n\t\t\tctx.beginPath();\n\n\t\t\tif (fill) {\n\t\t\t\tif (vertices.length > 1) {\n\t\t\t\t\tfor (const point of vertices) {\n\t\t\t\t\t\tshapeFill.lineTo(point.x, point.y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshapeFill.closePath();\n\t\t\t\tctx.fill(shapeFill, 'evenodd');\n\t\t\t\tif (!contour) {\n\t\t\t\t\tctx.fill(shape, 'evenodd');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (contour) {\n\t\t\t\tfor (const point of verticesCoords) {\n\t\t\t\t\tshape.lineTo(point.x, point.y);\n\t\t\t\t}\n\t\t\t\tshape.closePath();\n\t\t\t\tctx.stroke(shape);\n\t\t\t}\n\t\t}\n\t}\n\n\t// dessin du perimetre circulaire\n\tdrawCircularPerimeter(): void {\n\t\tthis.drawingService.previewCtx.beginPath();\n\n\t\tif (this.isDrawing) {\n\t\t\tthis.drawingService.previewCtx.strokeStyle = 'grey';\n\t\t\tthis.drawingService.previewCtx.lineWidth = Global.PERIM_LINEWIDTH;\n\t\t\tthis.drawingService.previewCtx.setLineDash([Global.PERIM_LINEDASH]);\n\n\t\t\t// Cercle\n\t\t\tthis.drawingService.previewCtx.ellipse(this.center.x, this.center.y, this.circleRadius, this.circleRadius, 0, 0, 2 * Math.PI);\n\t\t\tthis.drawingService.previewCtx.stroke();\n\t\t}\n\t\tthis.drawingService.previewCtx.closePath();\n\t}\n\n\tprivate distanceBetweenPoints(point1: Vec2, point2: Vec2): number {\n\t\tconst a: number = Math.pow(point1.x - point2.x, 2);\n\t\tconst b: number = Math.pow(point1.y - point2.y, 2);\n\t\treturn Math.sqrt(a + b);\n\t}\n\n\tisInverted(vertices2: Vec2[]): boolean {\n\t\tconst newDist = this.distanceBetweenPoints(vertices2[0], vertices2[1]);\n\t\tif (Math.round(newDist) === 0) {\n\t\t\tthis.breakPointRadius = this.circleRadius;\n\t\t}\n\t\treturn this.breakPointRadius >= this.circleRadius;\n\t}\n\n\tfindIntersectionPoints(vertices: Vec2[], size: number): Vec2[] {\n\t\tconst lineArray: Line[] = [] as Line[];\n\t\tlet verticesPoints: Vec2[] = [];\n\n\t\tfor (let i = 0; i < vertices.length - 1; i++) {\n\t\t\tlineArray.push(new Line(vertices[i], vertices[i + 1], size / 2));\n\t\t}\n\t\tlet point1;\n\t\tlet point2;\n\t\tlet point3;\n\t\tlet point4;\n\n\t\tfor (let i = 0; i < lineArray.length; i++) {\n\t\t\tpoint1 = lineArray[i].getNewPoint(lineArray[i].initPoint);\n\t\t\tpoint2 = lineArray[i].getNewPoint(lineArray[i].finalPoint);\n\n\t\t\tlet intersectPoint: Vec2 = {} as Vec2;\n\t\t\tif (i === lineArray.length - 1) {\n\t\t\t\tpoint3 = lineArray[0].getNewPoint(lineArray[0].initPoint);\n\t\t\t\tpoint4 = lineArray[0].getNewPoint(lineArray[0].finalPoint);\n\t\t\t\tconst intersectP = lineArray[0].intersection(point1, point2, point3, point4);\n\n\t\t\t\tverticesPoints.push(intersectP);\n\t\t\t} else {\n\t\t\t\tpoint3 = lineArray[i + 1].getNewPoint(lineArray[i + 1].initPoint);\n\t\t\t\tpoint4 = lineArray[i + 1].getNewPoint(lineArray[i + 1].finalPoint);\n\t\t\t}\n\t\t\tintersectPoint = lineArray[0].intersection(point1, point2, point3, point4);\n\t\t\tverticesPoints.push(intersectPoint);\n\t\t}\n\n\t\tif (this.isInverted(verticesPoints)) {\n\t\t\tverticesPoints = [];\n\t\t} else {\n\t\t\tverticesPoints.push(verticesPoints[0]);\n\t\t}\n\n\t\treturn verticesPoints;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Command, MouseButton } from '@app/shared/global';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class RectangleService extends Tool {\n\tinfo: ToolInfo = new ToolInfo('rectangle', 'Rectangle', '1');\n\toptions: ToolOption = new ToolOption(0);\n\tshiftDown: boolean = false;\n\torigin: Vec2;\n\ttarget: Vec2;\n\n\t// Le constructeur\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t}\n\n\t// Méthode qui check si shift est pesé et update le previewCtx\n\thandleCommand(command: KeyboardEvent): void {\n\t\tif (!this.isDrawing) {\n\t\t\tthis.shiftDown = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (command.key === Command.SHIFT) {\n\t\t\tthis.shiftDown = !this.shiftDown;\n\t\t\tthis.updatePreview();\n\t\t} else if (command.key === Command.ESCAPE) {\n\t\t\tthis.isDrawing = false;\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t}\n\t}\n\n\t// Update du previewCtx. Dessine un carré si shift est pesé.\n\tupdatePreview(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\tif (this.shiftDown) {\n\t\t\tthis.drawSquare(\n\t\t\t\tthis.drawingService.previewCtx,\n\t\t\t\tthis.origin,\n\t\t\t\tthis.target,\n\t\t\t\tthis.options,\n\t\t\t\tthis.drawingService.primaryColor,\n\t\t\t\tthis.drawingService.secondaryColor,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.drawRectangle(\n\t\t\t\tthis.drawingService.previewCtx,\n\t\t\t\tthis.origin,\n\t\t\t\tthis.target,\n\t\t\t\tthis.options,\n\t\t\t\tthis.drawingService.primaryColor,\n\t\t\t\tthis.drawingService.secondaryColor,\n\t\t\t);\n\t\t}\n\t}\n\n\t// Update du baseCtx. Dessine un carré si shift est pesé.\n\tupdateBase(): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tconst options = { ...this.options };\n\t\toptions.shapeOptions = { ...this.options.shapeOptions };\n\t\tconst target = { ...this.target };\n\t\tconst origin = { ...this.origin };\n\t\tconst pColor = this.drawingService.primaryColor;\n\t\tconst sColor = this.drawingService.secondaryColor;\n\t\tconst funcSquare: CallableFunction = () => {\n\t\t\tthis.drawSquare(this.drawingService.baseCtx, origin, target, options, pColor, sColor);\n\t\t};\n\n\t\tconst funcRect: CallableFunction = () => {\n\t\t\tthis.drawRectangle(this.drawingService.baseCtx, origin, target, options, pColor, sColor);\n\t\t};\n\t\tif (this.shiftDown) {\n\t\t\tfuncSquare();\n\t\t\tthis.drawingService.addAction(funcSquare);\n\t\t} else {\n\t\t\tfuncRect();\n\t\t\tthis.drawingService.addAction(funcRect);\n\t\t}\n\t}\n\n\t// Mouse down function: enregistre les coordonnees du click et indique que le dessin du rectangle est commencé;\n\t// Donne la position de son origine et reset la position du target\n\tonMouseDown(event: MouseEvent): void {\n\t\tthis.isDrawing = event.button === MouseButton.Left;\n\n\t\tif (!this.options.shapeOptions.contour && !this.options.shapeOptions.fill) {\n\t\t\tthis.options.shapeOptions.contour = true;\n\t\t}\n\n\t\tif (this.isDrawing) {\n\t\t\tthis.origin = this.getPagePositionFromMouse(event);\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t}\n\t}\n\n\t// Mouse up function: enregistre les coordonnees du mouseUp, et update le canvas de base.\n\tonMouseUp(event: MouseEvent): void {\n\t\tevent.preventDefault();\n\t\tif (this.isDrawing) {\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.updateBase();\n\t\t}\n\n\t\tthis.isDrawing = false;\n\t}\n\n\t// Update le previewCtx et le target à chaque mouvement si le dessin d'un rectangle est commencé\n\tonMouseMove(event: MouseEvent): void {\n\t\tif (this.isDrawing) {\n\t\t\tthis.target = this.getPagePositionFromMouse(event);\n\t\t\tthis.updatePreview();\n\t\t}\n\t}\n\n\tgetRectangleCenterCoord(origin: Vec2, target: Vec2): Vec2 {\n\t\tlet y = 0;\n\t\tlet x = 0;\n\t\tif (origin.y > target.y) {\n\t\t\ty = (origin.y - target.y) / 2 + target.y;\n\t\t} else {\n\t\t\ty = (target.y - origin.y) / 2 + origin.y;\n\t\t}\n\t\tif (origin.x > target.x) {\n\t\t\tx = (origin.x - target.x) / 2 + target.x;\n\t\t} else {\n\t\t\tx = (target.x - origin.x) / 2 + origin.x;\n\t\t}\n\t\treturn { x, y };\n\t}\n\n\tgetFillPoints(origin: Vec2, target: Vec2, options: ToolOption): Vec2[] {\n\t\tconst center = this.getRectangleCenterCoord(origin, target);\n\t\tconst newOrigin = {} as Vec2;\n\t\tconst newTarget = {} as Vec2;\n\t\tif (Math.abs(origin.x - target.x) <= options.size || Math.abs(origin.y - target.y) <= options.size) {\n\t\t\treturn {} as Vec2[];\n\t\t}\n\t\tif (origin.x > center.x) {\n\t\t\tnewOrigin.x = origin.x - options.size / 2;\n\t\t\tnewTarget.x = target.x + options.size / 2;\n\t\t} else {\n\t\t\tnewOrigin.x = origin.x + options.size / 2;\n\t\t\tnewTarget.x = target.x - options.size / 2;\n\t\t}\n\t\tif (origin.y > center.y) {\n\t\t\tnewOrigin.y = origin.y - options.size / 2;\n\t\t\tnewTarget.y = target.y + options.size / 2;\n\t\t} else {\n\t\t\tnewOrigin.y = origin.y + options.size / 2;\n\t\t\tnewTarget.y = target.y - options.size / 2;\n\t\t}\n\t\treturn [newOrigin, newTarget];\n\t}\n\n\t// Dessin du rectangle sur le preview durant le drag and drop\n\tdrawRectangle(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2, options: ToolOption, color: string, colorSec: string): void {\n\t\t// Dessin du preview en fonction du style désiré\n\t\tctx.strokeStyle = colorSec;\n\t\tctx.lineWidth = options.size;\n\t\tctx.lineCap = 'square';\n\t\tctx.lineJoin = 'miter';\n\n\t\tctx.fillStyle = color;\n\t\tif (options.shapeOptions.contour) {\n\t\t\tctx.strokeRect(origin.x, origin.y, target.x - origin.x, target.y - origin.y);\n\t\t}\n\n\t\tctx.fillStyle = color;\n\t\tif (options.shapeOptions.fill) {\n\t\t\tlet newOrigin = {} as Vec2;\n\t\t\tlet newTarget = {} as Vec2;\n\t\t\tconst pointsVec: Vec2[] = this.getFillPoints(origin, target, options);\n\t\t\tnewOrigin = pointsVec.length === 2 ? pointsVec[0] : ({} as Vec2);\n\t\t\tnewTarget = pointsVec.length === 2 ? pointsVec[1] : ({} as Vec2);\n\t\t\tctx.fillRect(newOrigin.x, newOrigin.y, newTarget.x - newOrigin.x, newTarget.y - newOrigin.y);\n\t\t}\n\t}\n\n\t// Dessin du carré sur le preview durant le drag and drop\n\tdrawSquare(ctx: CanvasRenderingContext2D, origin: Vec2, target: Vec2, options: ToolOption, color: string, colorSec: string): void {\n\t\t// Dessin du preview durant le drag and drop\n\t\tctx.fillStyle = color;\n\t\tctx.lineCap = 'square';\n\t\tctx.lineJoin = 'miter';\n\t\tctx.strokeStyle = colorSec;\n\t\tctx.lineWidth = options.size;\n\t\tctx.strokeStyle = colorSec;\n\t\tctx.lineWidth = options.size;\n\t\tif (options.shapeOptions.contour) {\n\t\t\tctx.strokeRect(origin.x, origin.y, target.x - origin.x, Math.sign(target.y - origin.y) * Math.abs(target.x - origin.x));\n\t\t}\n\t\tif (options.shapeOptions.fill) {\n\t\t\tlet newOrigin = {} as Vec2;\n\t\t\tlet newTarget = {} as Vec2;\n\t\t\tconst pointsVec: Vec2[] = this.getFillPoints(origin, target, options);\n\t\t\tnewOrigin = pointsVec.length === 2 ? pointsVec[0] : ({} as Vec2);\n\t\t\tnewTarget = pointsVec.length === 2 ? pointsVec[1] : ({} as Vec2);\n\t\t\tctx.fillRect(\n\t\t\t\tnewOrigin.x,\n\t\t\t\tnewOrigin.y,\n\t\t\t\tnewTarget.x - newOrigin.x,\n\t\t\t\tMath.sign(newTarget.y - newOrigin.y) * Math.abs(newTarget.x - newOrigin.x),\n\t\t\t);\n\t\t}\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { Global, MouseButton } from '@app/shared/global';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class SprayService extends Tool {\n\tprivate pathData: Vec2[];\n\tprivate pointPath: Vec2[] = [];\n\n\tinfo: ToolInfo = new ToolInfo('spray', 'Aérosol', 'a');\n\toptions: ToolOption = new ToolOption(undefined, false, true);\n\tspray: ReturnType<typeof setInterval>;\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.clearPath();\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tthis.isDrawing = event.button === MouseButton.Left;\n\t\tif (this.isCanvasReady()) {\n\t\t\tthis.mouseDownCoord = this.getPagePositionFromMouse(event);\n\t\t\tthis.spray = setInterval(() => {\n\t\t\t\tthis.updateView(this.mouseDownCoord, this.drawingService.previewCtx, this.pathData);\n\t\t\t}, Global.TIME_DELAY);\n\t\t}\n\t}\n\n\tprivate updateView(lastPoint: Vec2, ctx: CanvasRenderingContext2D, path: Vec2[]): void {\n\t\tpath.push(lastPoint);\n\t\tthis.generateSpray(lastPoint);\n\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tconst options: ToolOption = new ToolOption(undefined, false, true);\n\t\toptions.sprayOptions = { ...this.options.sprayOptions };\n\t\toptions.size = this.options.size;\n\t\tthis.drawLine(ctx, this.pointPath, options, this.drawingService.primaryColor);\n\t}\n\n\tprivate generateSpray(point: Vec2): void {\n\t\tconst radius = this.options.sprayOptions.spraySize;\n\t\tconst dotsPerTick = (this.options.sprayOptions.sprayTime * Global.TIME_DELAY) / Global.SECOND_MS;\n\t\tfor (let i = 0; i < dotsPerTick; i++) {\n\t\t\tconst offSet: Vec2 = this.randomPoint(radius, point);\n\t\t\tthis.pointPath.push(offSet);\n\t\t}\n\t}\n\n\tprivate randomPoint(radius: number, origin: Vec2): Vec2 {\n\t\tfor (;;) {\n\t\t\tconst x: number = Math.random() * 2 - 1;\n\t\t\tconst y: number = Math.random() * 2 - 1;\n\t\t\tif (x * x + y * y <= 1) {\n\t\t\t\treturn { x: radius * x + origin.x, y: radius * y + origin.y } as Vec2;\n\t\t\t}\n\t\t}\n\t}\n\n\tonMouseUp(event: MouseEvent): void {\n\t\tclearInterval(this.spray);\n\t\tif (this.isDrawing) {\n\t\t\tconst mousePosition = this.getPagePositionFromMouse(event);\n\t\t\tthis.updateView(mousePosition, this.drawingService.baseCtx, this.pathData);\n\t\t\tconst path: Vec2[] = [...this.pointPath];\n\t\t\tconst info = { options: { ...this.options }, color: this.drawingService.primaryColor };\n\t\t\tinfo.options.sprayOptions = { ...this.options.sprayOptions };\n\t\t\tconst func: CallableFunction = () => {\n\t\t\t\tthis.drawLine(this.drawingService.baseCtx, path, info.options, info.color);\n\t\t\t};\n\t\t\tthis.drawingService.addAction(func);\n\t\t}\n\t\tthis.isDrawing = false;\n\n\t\tthis.clearPath();\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tthis.drawingService.previewCtx.canvas.style.cursor = 'crosshair';\n\t\tif (this.isCanvasReady()) {\n\t\t\tconst mousePosition = this.getPagePositionFromMouse(event);\n\t\t\tthis.mouseDownCoord = mousePosition;\n\t\t}\n\t}\n\n\tprivate isCanvasReady(): boolean {\n\t\treturn this.isDrawing;\n\t}\n\n\tprivate drawLine(ctx: CanvasRenderingContext2D, path: Vec2[], options: ToolOption, color: string): void {\n\t\tctx.lineCap = 'round';\n\t\tctx.lineJoin = 'round';\n\t\tctx.fillStyle = color;\n\t\tctx.beginPath();\n\t\tfor (const pts of path) {\n\t\t\tctx.fillRect(pts.x, pts.y, options.sprayOptions.dropletSize, options.sprayOptions.dropletSize);\n\t\t}\n\t}\n\n\tprivate clearPath(): void {\n\t\tthis.pathData = [];\n\t\tthis.pointPath = [];\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { Global, MouseButton } from '@app/shared/global';\nimport { DrawingService } from 'src/app/services/drawing/drawing.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class StampService extends Tool {\n\tprivate readonly DEFAULT_ORIENTATION_INCREMENT: number = 15;\n\tprivate readonly MAX_ORIENTATION: number = 360;\n\n\tinfo: ToolInfo = new ToolInfo('stamp', 'Stamp', 'd');\n\toptions: ToolOption = new ToolOption(undefined, false, false, Global.UNDEFINED_SIZE, false, false, false, true);\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t}\n\n\tonMouseMove(event: MouseEvent): void {\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\n\t\tconst pos: Vec2 = this.getPagePositionFromMouse(event);\n\t\tif (pos.x < 0 || pos.x >= this.drawingService.canvasSize.x || pos.y < 0 || pos.y >= this.drawingService.canvasSize.y) return;\n\n\t\tconst [image, size] = this.getImageInfo();\n\t\tthis.drawImage(this.drawingService.previewCtx, image, pos, size, this.options.stampOptions.orientation);\n\t}\n\n\tonMouseDown(event: MouseEvent): void {\n\t\tif (event.button !== MouseButton.Left) return;\n\n\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\tconst [image, size] = this.getImageInfo();\n\t\tconst pos: Vec2 = this.getPagePositionFromMouse(event);\n\t\tconst orientation = this.options.stampOptions.orientation;\n\t\tconst drawImageCallable: CallableFunction = () => {\n\t\t\tthis.drawImage(this.drawingService.baseCtx, image, pos, size, orientation);\n\t\t};\n\t\tdrawImageCallable();\n\t\tthis.drawingService.addAction(drawImageCallable);\n\t}\n\n\tonWheel(event: WheelEvent): void {\n\t\tlet incrementFactor = event.altKey ? 1 : this.DEFAULT_ORIENTATION_INCREMENT;\n\t\t// tslint:disable-next-line:no-magic-numbers\n\t\tincrementFactor *= event.deltaY > 0 ? 1 : -1;\n\n\t\tconst oldOrientation = this.options.stampOptions.orientation;\n\t\tconst newOrientation = oldOrientation - incrementFactor;\n\t\tif (newOrientation < 0) {\n\t\t\tthis.options.stampOptions.orientation = 0;\n\t\t} else if (newOrientation > this.MAX_ORIENTATION) {\n\t\t\tthis.options.stampOptions.orientation = this.MAX_ORIENTATION;\n\t\t} else {\n\t\t\tthis.options.stampOptions.orientation = newOrientation;\n\t\t}\n\n\t\tif (this.options.stampOptions.orientation !== oldOrientation) this.onMouseMove(event);\n\t}\n\n\tprivate getImageInfo(): [HTMLImageElement, Vec2] {\n\t\tconst image = new Image();\n\t\timage.src = this.options.stampOptions.stampSrc;\n\t\tconst size: Vec2 = {\n\t\t\tx: image.width * this.options.stampOptions.scalingFactor,\n\t\t\ty: image.height * this.options.stampOptions.scalingFactor,\n\t\t};\n\n\t\treturn [image, size];\n\t}\n\n\tprivate drawImage(ctx: CanvasRenderingContext2D, image: HTMLImageElement, pos: Vec2, size: Vec2, orientation: number): void {\n\t\tctx.save();\n\t\tctx.translate(pos.x, pos.y);\n\t\t// disable pour ecrire 180 degres qui ne changera jamais\n\t\t// tslint:disable-next-line:no-magic-numbers\n\t\tctx.rotate((orientation * Math.PI) / 180);\n\t\tctx.drawImage(image, -size.x / 2, -size.y / 2, size.x, size.y);\n\t\tctx.restore();\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { TextOptions } from '@app/classes/text-options';\nimport { ToolInfo } from '@app/classes/tool-info';\nimport { ToolOption } from '@app/classes/tool-option';\nimport { Vec2 } from '@app/classes/vec2';\nimport { Global } from '@app/shared/global';\nimport { Tool } from 'src/app/classes/tool';\nimport { DrawingService } from 'src/app/services/drawing/drawing.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class TextService extends Tool {\n\tprivate readonly DEFAULT_INDICATOR_SIZE: number = 4;\n\t// tslint:disable-next-line:no-magic-numbers\n\tprivate readonly CURSOR_HEIGHT_FACTOR: number = 2 / 3;\n\n\tinfo: ToolInfo = new ToolInfo('text', 'Texte', 't');\n\toptions: ToolOption = new ToolOption(undefined, false, false, Global.UNDEFINED_SIZE, false, false, true);\n\tisDrawing: boolean = false;\n\n\tprivate currentPos: number = 0;\n\tprivate textPos: Vec2;\n\tprivate text: string = '';\n\n\tprivate commandMap: Map<string, () => void> = new Map<string, () => void>();\n\n\tconstructor(drawingService: DrawingService) {\n\t\tsuper(drawingService);\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.handleKeyDown = this.handleKeyDown.bind(this);\n\t\tthis.fontChanged = this.fontChanged.bind(this);\n\n\t\tthis.commandMap.set('Backspace', () => {\n\t\t\tthis.backspaceEvent();\n\t\t});\n\t\tthis.commandMap.set('Delete', () => {\n\t\t\tthis.deleteEvent();\n\t\t});\n\t\tthis.commandMap.set('ArrowRight', () => {\n\t\t\tthis.arrowRightEvent();\n\t\t});\n\t\tthis.commandMap.set('ArrowLeft', () => {\n\t\t\tthis.arrowLeftEvent();\n\t\t});\n\t\tthis.commandMap.set('ArrowUp', () => {\n\t\t\tthis.arrowUpEvent();\n\t\t});\n\t\tthis.commandMap.set('ArrowDown', () => {\n\t\t\tthis.arrowDownEvent();\n\t\t});\n\t\tthis.commandMap.set('Escape', () => {\n\t\t\tthis.escapeEvent();\n\t\t});\n\t}\n\n\tonMouseDown(event: MouseEvent, preventDrawing?: boolean): void {\n\t\tif (!this.isDrawing) {\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.isDrawing = true;\n\t\t\tthis.textPos = super.getPagePositionFromMouse(event);\n\t\t\tthis.drawPreview();\n\n\t\t\tdocument.body.addEventListener('keydown', this.handleKeyDown);\n\t\t\tdocument.body.addEventListener('mousedown', this.onMouseDown);\n\t\t} else if (this.shouldEndEditing(event)) {\n\t\t\tif (!preventDrawing && this.text.length > 0) {\n\t\t\t\tconst text = this.text;\n\t\t\t\tconst textPos = this.textPos;\n\t\t\t\tconst textOptions = { ...this.options.textOptions };\n\t\t\t\tconst color = this.drawingService.primaryColor;\n\t\t\t\tconst drawTextCallable: CallableFunction = () => {\n\t\t\t\t\tthis.drawText(this.drawingService.baseCtx, text, textPos, textOptions, color);\n\t\t\t\t};\n\t\t\t\tdrawTextCallable();\n\t\t\t\tthis.drawingService.addAction(drawTextCallable);\n\t\t\t}\n\n\t\t\tthis.isDrawing = false;\n\t\t\tthis.drawingService.clearCanvas(this.drawingService.previewCtx);\n\t\t\tthis.text = '';\n\t\t\tthis.currentPos = 0;\n\n\t\t\tdocument.body.removeEventListener('keydown', this.handleKeyDown);\n\t\t\tdocument.body.removeEventListener('mousedown', this.onMouseDown);\n\t\t} else {\n\t\t\tdocument.body.addEventListener('mouseup', this.fontChanged);\n\t\t}\n\t}\n\n\tprivate fontChanged(): void {\n\t\tsetTimeout(() => {\n\t\t\tthis.drawPreview();\n\t\t});\n\t\tdocument.body.removeEventListener('mouseup', this.fontChanged);\n\t}\n\n\tprivate shouldEndEditing(event: MouseEvent): boolean {\n\t\tlet shouldEnd = true;\n\n\t\tconst attributesPanel = document.getElementById('attributes-panel') as HTMLDivElement;\n\t\tconst colorPicker = document.getElementsByClassName('color-picker')[0] as HTMLDivElement;\n\t\tshouldEnd =\n\t\t\t!(\n\t\t\t\tevent.x >= attributesPanel.offsetLeft &&\n\t\t\t\tevent.x <= attributesPanel.offsetLeft + attributesPanel.offsetWidth &&\n\t\t\t\tevent.y >= attributesPanel.offsetTop &&\n\t\t\t\tevent.y <= attributesPanel.offsetTop + attributesPanel.offsetHeight\n\t\t\t) && colorPicker === undefined;\n\n\t\treturn shouldEnd;\n\t}\n\n\thandleKeyDown(event: KeyboardEvent): void {\n\t\tif (this.commandMap.has(event.key)) {\n\t\t\t(this.commandMap.get(event.key) as () => void)();\n\t\t} else if (!this.isPreventedKey(event)) {\n\t\t\tconst char: string = event.key === 'Enter' ? '\\n' : event.key;\n\t\t\tthis.text = this.text.slice(0, this.currentPos) + char + this.text.slice(this.currentPos, this.text.length);\n\t\t\tthis.currentPos++;\n\t\t}\n\n\t\tthis.drawPreview();\n\t}\n\n\tprivate isPreventedKey(event: KeyboardEvent): boolean {\n\t\tconst preventedKeys: string[] = [\n\t\t\t'CapsLock',\n\t\t\t'Shift',\n\t\t\t'Meta',\n\t\t\t'Alt',\n\t\t\t'Control',\n\t\t\t'Tab',\n\t\t\t'AltGraph',\n\t\t\t'ContextMenu',\n\t\t\t'Dead',\n\t\t\t'F1',\n\t\t\t'F2',\n\t\t\t'F3',\n\t\t\t'F4',\n\t\t\t'F5',\n\t\t\t'F6',\n\t\t\t'F7',\n\t\t\t'F8',\n\t\t\t'F9',\n\t\t\t'F10',\n\t\t\t'F11',\n\t\t\t'F12',\n\t\t];\n\t\treturn preventedKeys.includes(event.key);\n\t}\n\n\tprivate backspaceEvent(): void {\n\t\tconst newText = this.text.slice(0, this.currentPos - 1) + this.text.slice(this.currentPos, this.text.length);\n\t\tif (newText.length < this.text.length) {\n\t\t\tthis.text = newText;\n\t\t\tthis.currentPos--;\n\t\t}\n\t}\n\n\tprivate deleteEvent(): void {\n\t\tthis.text = this.text.slice(0, this.currentPos) + this.text.slice(this.currentPos + 1, this.text.length);\n\t}\n\n\tprivate arrowRightEvent(): void {\n\t\tif (this.currentPos + 1 <= this.text.length) this.currentPos++;\n\t}\n\n\tprivate arrowLeftEvent(): void {\n\t\tif (this.currentPos - 1 >= 0) this.currentPos--;\n\t}\n\n\tprivate arrowUpEvent(): void {\n\t\tconst lines = this.text.split('\\n');\n\t\tconst pos = this.getLinePos();\n\t\tif (pos.x - 1 >= 0) {\n\t\t\tswitch (this.options.textOptions.alignment) {\n\t\t\t\tcase 'left':\n\t\t\t\t\tthis.currentPos = this.currentPos - (pos.y + Math.max(lines[pos.x - 1].slice(pos.y).length, 0) + 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'center':\n\t\t\t\t\tconst offset = pos.y - Math.floor(lines[pos.x].length / 2);\n\t\t\t\t\tthis.currentPos =\n\t\t\t\t\t\tthis.currentPos -\n\t\t\t\t\t\t(lines[pos.x].slice(0, lines[pos.x].length / 2 + offset).length +\n\t\t\t\t\t\t\tlines[pos.x - 1].slice(Math.max(Math.floor(lines[pos.x - 1].length / 2) + offset, 0)).length +\n\t\t\t\t\t\t\t1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\tthis.currentPos = this.currentPos - (pos.y + Math.min(lines[pos.x].slice(pos.y).length, lines[pos.x - 1].length) + 1);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate arrowDownEvent(): void {\n\t\tconst lines = this.text.split('\\n');\n\t\tconst pos = this.getLinePos();\n\t\tif (pos.x + 1 < lines.length)\n\t\t\tswitch (this.options.textOptions.alignment) {\n\t\t\t\tcase 'left':\n\t\t\t\t\tthis.currentPos = this.currentPos + (Math.max(lines[pos.x].slice(pos.y).length, 0) + lines[pos.x + 1].slice(0, pos.y).length + 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'center':\n\t\t\t\t\tconst offset = pos.y - Math.floor(lines[pos.x].length / 2);\n\t\t\t\t\tthis.currentPos =\n\t\t\t\t\t\tthis.currentPos +\n\t\t\t\t\t\tlines[pos.x].slice(lines[pos.x].length / 2 + offset).length +\n\t\t\t\t\t\tlines[pos.x + 1].slice(0, Math.max(Math.floor(lines[pos.x + 1].length / 2) + offset, 0)).length +\n\t\t\t\t\t\t1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\tthis.currentPos =\n\t\t\t\t\t\tthis.currentPos +\n\t\t\t\t\t\tlines[pos.x].slice(pos.y).length +\n\t\t\t\t\t\tMath.max(lines[pos.x + 1].length - lines[pos.x].slice(pos.y).length, 0) +\n\t\t\t\t\t\t1;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t}\n\n\tprivate escapeEvent(): void {\n\t\tthis.onMouseDown(new MouseEvent('mousedown'), true);\n\t}\n\n\tprivate getLinePos(): Vec2 {\n\t\tconst lines: string[] = this.text.split('\\n');\n\n\t\tlet returnValues = { x: Global.UNDEFINED_SIZE, y: Global.UNDEFINED_SIZE };\n\t\tlet linePos = 0;\n\t\tlines.forEach((line, index) => {\n\t\t\tconst lineLength = line.length;\n\t\t\tif (this.currentPos >= linePos && this.currentPos <= linePos + lineLength) {\n\t\t\t\treturnValues = { x: index, y: this.currentPos - linePos };\n\t\t\t}\n\n\t\t\tlinePos += lineLength + 1;\n\t\t});\n\t\treturn returnValues;\n\t}\n\n\tprivate drawPreview(): void {\n\t\tconst ctx: CanvasRenderingContext2D = this.drawingService.previewCtx;\n\t\tthis.drawingService.clearCanvas(ctx);\n\n\t\tctx.fillStyle = 'black';\n\t\tctx.fillRect(\n\t\t\tthis.textPos.x - this.DEFAULT_INDICATOR_SIZE / 2,\n\t\t\tthis.textPos.y - this.DEFAULT_INDICATOR_SIZE / 2,\n\t\t\tthis.DEFAULT_INDICATOR_SIZE,\n\t\t\tthis.DEFAULT_INDICATOR_SIZE,\n\t\t);\n\n\t\tconst cursorPos = this.getLinePos();\n\t\tthis.drawText(ctx, this.text, this.textPos, this.options.textOptions, this.drawingService.primaryColor, cursorPos);\n\t}\n\n\tprivate drawText(ctx: CanvasRenderingContext2D, text: string, pos: Vec2, textOptions: TextOptions, color: string, cursorPos?: Vec2): void {\n\t\tctx.fillStyle = color;\n\t\tctx.textAlign = textOptions.alignment as CanvasTextAlign;\n\n\t\tlet boldItalic = textOptions.isItalic ? 'italic ' : '';\n\t\tboldItalic += textOptions.isBold ? 'bold ' : '';\n\t\tctx.font = boldItalic + ' ' + textOptions.fontSize + 'px ' + textOptions.font;\n\n\t\tconst lines: string[] = text.split('\\n');\n\n\t\tlet totalHeight = 0;\n\t\tlet alignmentX = 0;\n\n\t\tif (textOptions.alignment !== 'left') {\n\t\t\tlines.forEach((line) => {\n\t\t\t\tconst textWidth = ctx.measureText(line).width;\n\t\t\t\tif (textWidth > alignmentX) alignmentX = textWidth;\n\t\t\t});\n\n\t\t\tif (textOptions.alignment === 'center') alignmentX = alignmentX / 2;\n\t\t}\n\n\t\tlines.forEach((line, index) => {\n\t\t\tconst fontMetrics = ctx.measureText(line);\n\t\t\tconst lineHeight = fontMetrics.fontBoundingBoxAscent + fontMetrics.fontBoundingBoxDescent;\n\n\t\t\tif (index > 0) {\n\t\t\t\ttotalHeight += lineHeight;\n\t\t\t}\n\n\t\t\tif (cursorPos !== undefined && cursorPos.x === index) {\n\t\t\t\tconst cursor: Vec2 = { x: 0, y: pos.y + totalHeight };\n\t\t\t\tswitch (textOptions.alignment) {\n\t\t\t\t\tcase 'left':\n\t\t\t\t\t\tcursor.x = pos.x + alignmentX + ctx.measureText(line.slice(0, cursorPos.y)).width;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'center':\n\t\t\t\t\t\tcursor.x = pos.x + alignmentX + ctx.measureText(line.slice(0, cursorPos.y)).width - ctx.measureText(line).width / 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'right':\n\t\t\t\t\t\tcursor.x = pos.x + alignmentX - ctx.measureText(line.slice(cursorPos.y)).width;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tctx.save();\n\t\t\t\tctx.fillStyle = 'black';\n\t\t\t\tctx.fillRect(cursor.x, cursor.y, 1, -lineHeight * this.CURSOR_HEIGHT_FACTOR);\n\t\t\t\tctx.restore();\n\t\t\t}\n\n\t\t\tctx.fillText(line, pos.x + alignmentX, pos.y + totalHeight);\n\t\t});\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Tool } from '@app/classes/tool';\nimport { SurfaceSelectionService } from '@app/services//selection/surface-selection.service';\nimport { ClipboardService } from '@app/services/clipboard/clipboard.service';\nimport { CommandManagerService } from '@app/services/commands/command-manager.service';\nimport { DrawingService } from '@app/services/drawing/drawing.service';\nimport { GridService } from '@app/services/grid/grid.service';\nimport { MagnetService } from '@app/services/grid/magnet.service';\nimport { EllipseSelectionService } from '@app/services/selection/ellipse-selection.service';\nimport { LassoSelectionService } from '@app/services/selection/lasso-selection.service';\nimport { RectangleSelectionService } from '@app/services/selection/rectangle-selection.service';\nimport { ResizeSelectionService } from '@app/services/selection/resize-selection.service';\nimport { SelectionService } from '@app/services/selection/selection.service';\nimport { ShiftSelectionService } from '@app/services/selection/shift-selection.service';\nimport { Global } from '@app/shared/global';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { EllipseService } from './ellipse.service';\nimport { EraserService } from './eraser.service';\nimport { EyeDropperService } from './eye-dropper.service';\nimport { FillService } from './fill-bucket.service';\nimport { LineService } from './line.service';\nimport { PencilService } from './pencil.service';\nimport { PolygoneService } from './polygone.service';\nimport { RectangleService } from './rectangle.service';\nimport { SprayService } from './spray.service';\nimport { StampService } from './stamp.service';\nimport { TextService } from './text.service';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class ToolService {\n\tcurrentTool: Tool;\n\tprivate toolMap: Map<string, Tool> = new Map();\n\n\tchangeLimitSizeCallSource: BehaviorSubject<number> = new BehaviorSubject<number>(0);\n\tchangeLimitSize$: Observable<number> = this.changeLimitSizeCallSource.asObservable();\n\tchangeCurrentSelectionModeCallSource: Subject<SelectionService> = new BehaviorSubject<SelectionService>(\n\t\tnew RectangleSelectionService(\n\t\t\tnew DrawingService(new CommandManagerService()),\n\t\t\tnew ShiftSelectionService(\n\t\t\t\tnew DrawingService(new CommandManagerService()),\n\t\t\t\tnew MagnetService(new GridService(new DrawingService(new CommandManagerService()))),\n\t\t\t),\n\t\t),\n\t);\n\tchangeCurrentSelectionMode$: Observable<SelectionService> = this.changeCurrentSelectionModeCallSource.asObservable();\n\n\tconstructor(\n\t\tprivate pencilService: PencilService,\n\t\tprivate lineService: LineService,\n\t\tprivate eraserService: EraserService,\n\t\tprivate rectangleService: RectangleService,\n\t\tprivate ellipseService: EllipseService,\n\t\tprivate polygoneService: PolygoneService,\n\t\tprivate rectangleSelectionService: RectangleSelectionService,\n\t\tprivate ellipseSelectionService: EllipseSelectionService,\n\t\tprivate surfaceSelectionService: SurfaceSelectionService,\n\t\tprivate shiftSelectionService: ShiftSelectionService,\n\t\tprivate resizeSelectionService: ResizeSelectionService,\n\t\tprivate sprayService: SprayService,\n\t\tprivate eyeDropperService: EyeDropperService,\n\t\tprivate fillService: FillService,\n\t\tprivate gridService: GridService,\n\t\tprivate lassoSelectionService: LassoSelectionService,\n\t\tprivate textService: TextService,\n\t\tpublic clipboardService: ClipboardService,\n\t\tprivate stampService: StampService,\n\t\tpublic magnetService: MagnetService,\n\t) {\n\t\tthis.toolMap.set(this.pencilService.info.shortcut, this.pencilService);\n\t\tthis.toolMap.set(this.lineService.info.shortcut, this.lineService);\n\t\tthis.toolMap.set(this.eraserService.info.shortcut, this.eraserService);\n\t\tthis.toolMap.set(this.rectangleService.info.shortcut, this.rectangleService);\n\t\tthis.toolMap.set(this.ellipseService.info.shortcut, this.ellipseService);\n\t\tthis.toolMap.set(this.polygoneService.info.shortcut, this.polygoneService);\n\t\tthis.toolMap.set(this.rectangleSelectionService.info.shortcut, this.rectangleSelectionService);\n\t\tthis.toolMap.set(this.ellipseSelectionService.info.shortcut, this.ellipseSelectionService);\n\t\tthis.toolMap.set(this.surfaceSelectionService.info.shortcut, this.surfaceSelectionService);\n\t\tthis.toolMap.set(Global.SHIFT_SELECTION_SHORTCUT, this.shiftSelectionService);\n\t\tthis.toolMap.set(Global.RESIZE_SELECTION_SHORTCUT, this.resizeSelectionService);\n\t\tthis.toolMap.set(this.sprayService.info.shortcut, this.sprayService);\n\t\tthis.toolMap.set(this.eyeDropperService.info.shortcut, this.eyeDropperService);\n\t\tthis.toolMap.set(this.fillService.info.shortcut, this.fillService);\n\t\tthis.toolMap.set(this.gridService.info.shortcut, this.gridService);\n\t\tthis.toolMap.set(this.lassoSelectionService.info.shortcut, this.lassoSelectionService);\n\t\tthis.toolMap.set(this.textService.info.shortcut, this.textService);\n\t\tthis.toolMap.set(this.stampService.info.shortcut, this.stampService);\n\n\t\tthis.currentTool = pencilService;\n\t}\n\n\tchangeTool(toolKey: string): void {\n\t\tif (toolKey === 'g') {\n\t\t\tif (this.isToolActive(toolKey)) {\n\t\t\t\tthis.gridService.toggleGrid();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.gridService.toggleGrid();\n\t\t} else if (toolKey === 'm') {\n\t\t\tthis.magnetService.toggleIsActive();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.currentTool.info.shortcut === toolKey || !this.toolMap.has(toolKey)) return;\n\n\t\tif (toolKey !== Global.SHIFT_SELECTION_SHORTCUT && toolKey !== Global.RESIZE_SELECTION_SHORTCUT) {\n\t\t\tif (this.currentTool.info.name === 'shift-selection') {\n\t\t\t\t(this.currentTool as ShiftSelectionService).endSelection();\n\t\t\t} else if (this.currentTool.info.name === 'resize-selection') {\n\t\t\t\t(this.currentTool as ResizeSelectionService).endSelection();\n\t\t\t} else if ('placeBox$' in this.currentTool) {\n\t\t\t\t(this.currentTool as SelectionService).callPlaceBox(Global.RESET_VECTOR);\n\t\t\t}\n\t\t}\n\t\tthis.currentTool = this.toolMap.get(toolKey) as Tool;\n\t\tthis.currentTool.info.name === 'eraser'\n\t\t\t? this.callChangeLimitSize(Global.ERASER_MIN_TRAIL_SIZE)\n\t\t\t: this.callChangeLimitSize(Global.MIN_TOOL_SIZE);\n\n\t\tif ('placeBox$' in this.currentTool) {\n\t\t\t(this.currentTool as SelectionService).callPlaceBox(Global.RESET_VECTOR);\n\t\t\tthis.callChangeCurrentSelectionMode(this.currentTool);\n\t\t}\n\t\t// Encapsulation à revoir\n\t\tthis.currentTool.getDrawingService().resetCursor(this.currentTool);\n\t}\n\n\tisToolActive(shortcut: string): boolean {\n\t\tif (shortcut === 'g') {\n\t\t\treturn this.gridService.options.gridOptions.isActive as boolean;\n\t\t} else {\n\t\t\treturn this.currentTool.info.shortcut === shortcut;\n\t\t}\n\t}\n\n\tgetService(shortcut: string): Tool {\n\t\treturn this.toolMap.get(shortcut) as Tool;\n\t}\n\n\tupdateGridSize(size: number): void {\n\t\tthis.gridService.updateSize(size);\n\t}\n\n\tisValidToolKey(key: string): boolean {\n\t\treturn this.toolMap.has(key);\n\t}\n\n\thandleCommand(command: KeyboardEvent, isDown: boolean): void {\n\t\tthis.currentTool.handleCommand(command, isDown);\n\t}\n\tcallChangeLimitSize(minSize: number): void {\n\t\tthis.changeLimitSizeCallSource.next(minSize);\n\t}\n\n\tcallChangeCurrentSelectionMode(mode: SelectionService): void {\n\t\tthis.changeCurrentSelectionModeCallSource.next(mode);\n\t}\n\n\thasBegunDrawing(): boolean {\n\t\treturn this.currentTool.isDrawing;\n\t}\n\n\tmagnetIsActive(): boolean {\n\t\treturn this.magnetService.isActive;\n\t}\n}\n","import { Vec2 } from '@app/classes/vec2';\nimport { Dessin } from '@common/communication/dessin';\n\nexport class Global {\n\tstatic readonly MAX_TOOL_SIZE: number = 40;\n\tstatic readonly MIN_TOOL_SIZE: number = 4;\n\tstatic readonly ONE: number = 1;\n\tstatic readonly DEFAULT_WIDTH: number = 1000;\n\tstatic readonly DEFAULT_HEIGHT: number = 800;\n\tstatic readonly NUMBER_OF_TOOLS: number = 10;\n\tstatic readonly DUMMY_PATH: Vec2[] = [\n\t\t{\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t},\n\t\t{\n\t\t\tx: 5,\n\t\t\ty: 0,\n\t\t},\n\t\t{\n\t\t\tx: 5,\n\t\t\ty: 5,\n\t\t},\n\t\t{\n\t\t\tx: 0,\n\t\t\ty: 5,\n\t\t},\n\t];\n\tstatic readonly DUMMY_SIZE: number = 10;\n\tstatic readonly DRAWING_CONTAINER_SIZE_BUFFER: number = 5;\n\tstatic readonly NEW_SIZE: number = 300;\n\tstatic readonly WRONG_NEW_SIZE: number = 100;\n\tstatic readonly WRONG_NEW_MOUSE_POSITION: number = -1000;\n\tstatic readonly NEW_WIDTH: number = 300;\n\tstatic readonly NEW_HEIGHT: number = 400;\n\tstatic readonly MIN_SIZE_CONDITION: number = 500;\n\tstatic readonly RAYON_MAX: number = 20;\n\tstatic readonly MIN_SIZE: number = 250;\n\tstatic readonly MIN_SIZE_WITH_PADDING: number = 254;\n\tstatic readonly PADDING_SIZE: number = 1;\n\tstatic readonly HALF_CP_SIZE: number = 5;\n\tstatic readonly END_OF_PROPERTY_NUMBER: number = 4;\n\tstatic readonly LINE_LIST: number[][] = [\n\t\t[1, 1, 0], // -45\n\t\t[1, -Global.ONE, 0], // 45\n\t\t[1, 0, 0], // 0\n\t\t[0, 1, 0], // 90\n\t];\n\tstatic readonly SCROLLBAR_WIDTH: number = 10;\n\tstatic readonly INCORRECT_MOUSE_EVENT_INDEX: number = 4;\n\tstatic readonly mouseMoveEvent: MouseEvent = new MouseEvent('mousemove', {\n\t\tcancelable: false,\n\t\tview: window,\n\t\tdetail: 1,\n\t\tscreenX: 450,\n\t\tscreenY: 50,\n\t\tclientX: 450,\n\t\tclientY: 50,\n\t\tctrlKey: false,\n\t\taltKey: false,\n\t\tshiftKey: false,\n\t\tmetaKey: false,\n\t\tbutton: 0,\n\t\tbubbles: true,\n\t});\n\t// Constantes pour drawing component\n\tstatic readonly TIMEOUT: number = 100;\n\tstatic readonly PERIM_LINEWIDTH: number = 2;\n\tstatic readonly PERIM_LINEDASH: number = 6;\n\t// tslint:disable:no-magic-numbers\n\tstatic readonly SELECTION_LINEDASH: number[] = [5, 15];\n\tstatic readonly MIN_EDGES: number = 3;\n\tstatic readonly DEFAULT_RADIUS: number = 100;\n\tstatic readonly TEST_NBVERTICES: number = 4;\n\tstatic readonly DEFAULT_CENTER: Vec2 = { x: 150, y: 150 };\n\tstatic readonly TEST_RADIUS: number = 14.5;\n\tstatic readonly TEST_VERTICES: Vec2[] = [\n\t\t{ x: 200, y: 300 },\n\t\t{ x: 100, y: 200 },\n\t\t{ x: 200, y: 100 },\n\t\t{ x: 300, y: 200 },\n\t\t{ x: 200, y: 300 },\n\t];\n\t// constantes pour shape-options\n\tstatic readonly DEFAULT_VERTICES_NUMBER: number = 3;\n\tstatic readonly MAX_VERTICES_NUMBER: number = 12;\n\t// constantes pour ellipse-service\n\tstatic readonly ELLIPSE_PERIM_LINEWIDTH: number = 2;\n\tstatic readonly ELLIPSE_PERIM_LINEDASH: number = 6;\n\t// constantes pour la sélection rectange/ellipse\n\tstatic readonly UNDEFINED_SIZE: number = -1;\n\tstatic readonly DEFAULT_DASH_AMOUNT: number = 5;\n\tstatic readonly BOX_CP_SIZE: number = 5;\n\tstatic readonly NEGATIVE_DEFAULT_DELTA: number = -1;\n\tstatic readonly SHIFT_FACTOR: number = 1.5;\n\tstatic readonly TEST_DELTA: number = 25;\n\tstatic readonly DEFAULT_CANVAS_SIZE: number = 500;\n\tstatic readonly DEFAULT_VECTOR: Vec2 = { x: 0, y: 0 };\n\tstatic readonly RESET_VECTOR: Vec2 = { x: -1, y: -1 };\n\tstatic readonly TEST_VECTOR: Vec2 = { x: 100, y: 100 };\n\tstatic readonly TEST_TARGET_VECTOR: Vec2 = { x: 125, y: 125 };\n\tstatic readonly NEGATIVE_TEST_VECTOR: Vec2 = { x: -100, y: -100 };\n\tstatic readonly ARROW_SUBSTRING_LENGTH: number = 5;\n\tstatic readonly ARROW_NUMBER: number = 4;\n\tstatic readonly TEST_EVENT_INDEX: number = 11;\n\tstatic readonly TEST_DISTANCE: number = 50;\n\tstatic readonly N_ONE: number = -1;\n\tstatic readonly N_TWO: number = -2;\n\tstatic readonly MINUS_ONE: number = -1;\n\tstatic readonly MINUS_TWO: number = -2;\n\n\tstatic IS_FLIPPED: Vec2 = { x: 1, y: 1 };\n\tstatic readonly UNITARY_VECTOR: Vec2 = { x: 1, y: 1 };\n\tstatic readonly SHIFT_AMOUNT: number = 3;\n\tstatic readonly CALL_AMOUNT: number = 3;\n\tstatic readonly DUMMY_POSITION: Vec2 = { x: 3, y: 3 };\n\tstatic readonly INIT_TIMER: number = 500;\n\tstatic readonly OTHER_TIMER: number = 100;\n\tstatic readonly SHIFT_SELECTION_SHORTCUT: string = 'shiftSelection';\n\tstatic readonly RESIZE_SELECTION_SHORTCUT: string = 'resizeSelection';\n\tstatic readonly COPY_SHORTCUT: string = 'c';\n\tstatic readonly CUT_SHORTCUT: string = 'x';\n\tstatic readonly PASTE_SHORTCUT: string = 'v';\n\tstatic readonly RECTANGLE_LIMIT_OFFSET: number = 10;\n\t// constante pour eraser-service\n\tstatic readonly ERASER_MIN_TRAIL_SIZE: number = 5;\n\tstatic readonly NUMBER_OF_INTERPOLATION: number = 5;\n\tstatic readonly EXTREME_NB_OF_INTERPOLATION: number = 500;\n\tstatic readonly NUMBER_OF_PLOTLINE_CALLS: number = 4;\n\tstatic readonly TEST_PATH: Vec2[] = [\n\t\t{ x: 0, y: 0 },\n\t\t{ x: 10, y: 1 },\n\t\t{ x: 5, y: 1 },\n\t\t{ x: 5, y: 6 },\n\t\t{ x: 5, y: 3 },\n\t];\n\tstatic readonly Y_AXIS_TEST_PATH: Vec2[] = [\n\t\t{ x: 0, y: 0 },\n\t\t{ x: 0, y: 5 },\n\t];\n\tstatic readonly INVERTED_TEST_PATH: Vec2[] = [\n\t\t{ x: 5, y: 0 },\n\t\t{ x: 0, y: 0 },\n\t];\n\tstatic readonly FAR_INTERPOLATION_POINTS: Vec2[] = [\n\t\t{ x: 0, y: 0 },\n\t\t{ x: 1000, y: 0 },\n\t];\n\tstatic readonly MOUSE_EVENTS: MouseEvent[] = [\n\t\t{ offsetX: 25, offsetY: 25, button: 0, buttons: 0 } as MouseEvent,\n\t\t{ offsetX: 25, offsetY: 25, button: 0, buttons: 1 } as MouseEvent,\n\t\t{ offsetX: 0, offsetY: 0, button: 0, buttons: 0 } as MouseEvent,\n\t\t{ offsetX: 1, offsetY: 0, button: 0 } as MouseEvent,\n\t\t{ offsetX: 25, offsetY: 25, button: 1 } as MouseEvent,\n\t\t{ offsetX: 44, offsetY: 25, button: 1 } as MouseEvent,\n\t\t{ pageX: 35, pageY: 25, button: 0 } as MouseEvent,\n\t\t{ pageX: 450, pageY: 25, button: 0 } as MouseEvent,\n\t\t{ pageX: 469, pageY: 25, button: 0 } as MouseEvent,\n\t\t{ offsetX: 470, offsetY: 25, button: 0 } as MouseEvent,\n\t\t{ pageX: 470, pageY: 25, button: 0 } as MouseEvent,\n\t\t{ x: 100, y: 100, button: 0 } as MouseEvent,\n\t];\n\t// constantes pour le bucket fill\n\tstatic SIZE_OF_DATA: number = 4;\n\tstatic PERCENTAGE_CONST: number = 100;\n\tstatic HEX_BASE: number = 16;\n\tstatic RANDOM_COLOR: { R: number; G: number; B: number; A: number } = {\n\t\tR: 255,\n\t\tG: 187,\n\t\tB: 204,\n\t\tA: 255,\n\t};\n\tstatic DUMMY_TOLERANCE: number = 20;\n\t// constante pour event manager\n\tstatic readonly REDO_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: 'z', ctrlKey: true, shiftKey: true });\n\tstatic readonly UNDO_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: 'z', ctrlKey: true, shiftKey: false });\n\tstatic readonly EXPORT_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: 'e', ctrlKey: true, shiftKey: false });\n\tstatic readonly CARROUSEL_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: 'g', ctrlKey: true, shiftKey: false });\n\tstatic readonly SAVE_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: 's', ctrlKey: true, shiftKey: false });\n\tstatic readonly OPEN_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: 'o', ctrlKey: true, shiftKey: false });\n\t// Constantes pour le color picker\n\tstatic readonly SELECTED_LINE_WIDTH: number = 5;\n\tstatic readonly SELECTED_RECTANGLE_HEIGHT: number = 10;\n\tstatic readonly RED_INDEX_HEX: number = 1;\n\tstatic readonly GREEN_INDEX_HEX: number = 3;\n\tstatic readonly BLUE_INDEX_HEX: number = 5;\n\tstatic readonly ALPHA_INDEX_HEX: number = 7;\n\tstatic readonly HEX_COLOR_LENGTH: number = 2;\n\tstatic readonly MAX_HEX_VALUE: number = 255;\n\tstatic readonly IMAGE_DATA_ALPHA_INDEX: number = 3;\n\tstatic readonly COLOR_HISTORY_COUNT: number = 10;\n\tstatic readonly UNDEFINED_COLOR: number = -1;\n\t// constantes pour aerosol\n\tstatic readonly SECOND_MS: number = 1000;\n\tstatic readonly TIME_DELAY: number = 25;\n\tstatic readonly MIN_SPRAY_SIZE: number = 10;\n\t// Constantes pour grille\n\tstatic readonly MAX_SQUARE_SIZE: number = 250;\n\tstatic readonly MIN_SQUARE_SIZE: number = 20;\n\tstatic readonly MAX_OPACITY: number = 100;\n\tstatic readonly MIN_OPACITY: number = 40;\n\tstatic readonly INCREMENT_VALUE: number = 5;\n\tstatic readonly KEYB_PLUS_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: '+' });\n\tstatic readonly KEYB_MINUS_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: '-' });\n\tstatic readonly KEYB_EQUAL_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: '=' });\n\t// constantes pour la sélection\n\tstatic readonly TEST_PNG_URL: string = 'png,test';\n\tstatic readonly TEST_JPEG_URL: string = 'jpeg,test';\n\t// save and carrousel\n\tstatic readonly ETIQUETTE_MAX_VALUE: number = 15;\n\tstatic readonly LESS_THEN_THREE_DRAWING: number = 3;\n\t// save and carrousel testing\n\tstatic readonly ARROW_LEFT_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: 'ArrowLeft' });\n\tstatic readonly ARROW_RIGHT_EVENT: KeyboardEvent = new KeyboardEvent('keydown', { key: 'ArrowRight' });\n\tstatic readonly DRAWING_TESTING: Dessin[] = [\n\t\t{ name: 'test1', etiquette: ['drole'] },\n\t\t{ name: 'test2', etiquette: ['test'] },\n\t\t{ name: 'test3', etiquette: ['test1'] },\n\t\t{ name: 'test4', etiquette: [] },\n\t];\n\tstatic readonly FICHE_INDEX_TESTING: number[] = [\n\t\t0, // drawing 0\n\t\t1, // drawing 1\n\t\t2, // drawing 2\n\t\tGlobal.LESS_THEN_THREE_DRAWING, // drawing 3\n\t];\n\t// Constantes pour texte\n\tstatic readonly DEFAULT_FONT_SIZE: number = 30;\n\tstatic readonly MIN_FONT_SIZE: number = 15;\n\tstatic readonly MAX_FONT_SIZE: number = 70;\n\tstatic readonly BASE_URL: string = 'http://localhost:3000/api/save/';\n}\nexport enum MouseEnum {\n\tDEFAULT = 0,\n\tENTER_DEFAULT = 1,\n\tTOP_LEFT = 2,\n\tONE_OFF_X = 3,\n\tRIGHT_CLICK = 4,\n\tOFFSET_20 = 5,\n\tPAGE_REF = 6,\n\tPAGE_INNER_CANVAS = 7,\n\tPAGE_INNER_OFFSET20 = 8,\n\tPAGE_OFFSET_ONE_OFF = 9,\n}\nexport enum MouseButton {\n\tLeft = 0,\n\tMiddle = 1,\n\tRight = 2,\n\tBack = 3,\n\tForward = 4,\n}\nexport enum RGB {\n\tR = 0,\n\tG = 1,\n\tB = 2,\n\tA = 3,\n}\nexport enum Shortcut {\n\tCRAYON = 'c',\n\tLIGNE = 'l',\n\tEFFACE = 'e',\n\tRECT_SELECTION = 'r',\n\tELLIPSE_SELECTION = 's',\n\tSURFACE_SELECTION = 'ctrl-a',\n}\nexport enum EnumAngleLigne {\n\tCENTTRENTECINQ = 0,\n\tQUARANTECINQ = 1,\n\tVERTICAL = 2,\n\tHORIZONTAL = 3,\n}\nexport enum Command {\n\tBACKSPACE = 'Backspace',\n\tSHIFT = 'Shift',\n\tESCAPE = 'Escape',\n\tDELETE = 'Delete',\n}\nexport enum Arrows {\n\tARROWDOWN = 'ArrowDown',\n\tARROWLEFT = 'ArrowLeft',\n\tARROWRIGHT = 'ArrowRight',\n\tARROWUP = 'ArrowUp',\n}\nexport enum Fonts {\n\tArial = 'Arial',\n\tVerdana = 'Verdana',\n\tGeorgia = 'Georgia',\n\tTimesNewRoman = 'Times New Roman',\n\tComicSans = 'Comic Sans MS',\n}\nexport const stamps: string[] = [\n\t'assets/stamps/shrek.jpg',\n\t'assets/stamps/unsure-boy.jpg',\n\t'assets/stamps/cloud.png',\n\t'assets/stamps/poly.jpg',\n\t'assets/stamps/cool-guy.png',\n];\nexport enum ControlPoint {\n\tCenter,\n\tCenterLeft,\n\tCenterRight,\n\tCenterUp,\n\tCenterDown,\n\tCornerUpLeft,\n\tCornerDownLeft,\n\tCornerUpRight,\n\tCornerDownRight,\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nimport { IEnvironment } from './IEnvironment';\n\nexport const environment: IEnvironment = {\n\tproduction: false,\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n\tenableProdMode();\n}\n\nplatformBrowserDynamic()\n\t.bootstrapModule(AppModule)\n\t.catch((err) => console.error(err));\n"],"sourceRoot":"webpack:///"}